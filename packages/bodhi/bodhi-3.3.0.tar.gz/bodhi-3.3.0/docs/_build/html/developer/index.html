<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Developer documentation &#8212; bodhi 3.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Vagrant" href="vagrant.html" />
    <link rel="prev" title="bodhi.client.bindings" href="../docblocks/bodhi.client.bindings.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="developer-documentation">
<h1>Developer documentation<a class="headerlink" href="#developer-documentation" title="Permalink to this headline">¶</a></h1>
<p>This page contains information for developers who wish to contribute to Bodhi.</p>
<div class="section" id="contribution-guidelines">
<h2>Contribution guidelines<a class="headerlink" href="#contribution-guidelines" title="Permalink to this headline">¶</a></h2>
<p>Before you submit a pull request to Bodhi, please ensure that it meets these criteria:</p>
<ul>
<li><p class="first">All tests must pass.</p>
</li>
<li><p class="first">New code must have 100% test coverage. This one is particularly important, as we don&#8217;t want to
deploy any broken code into production. After you&#8217;ve run <code class="docutils literal"><span class="pre">btest</span></code>, you can verify your new code&#8217;s
test coverage with <code class="docutils literal"><span class="pre">bdiff-cover</span></code> in the Vagrant environment, or
<code class="docutils literal"><span class="pre">diff-cover</span> <span class="pre">coverage.xml</span> <span class="pre">--compare-branch=origin/develop</span> <span class="pre">--fail-under=100</span></code> if you are not using
Vagrant.</p>
</li>
<li><p class="first">New functions, methods, and classes must have docblocks that explain what the code block is, and
describing any parameters it accepts and what it returns (if anything). You can use the
<code class="docutils literal"><span class="pre">pydocstyle</span></code> utility to automatically check your code for this. There is a
<code class="docutils literal"><span class="pre">bodhi.tests.test_style.TestStyle.test_code_with_pydocstyle</span></code> test, that is slowly being expanded
to enforce PEP-257 across the codebase.</p>
</li>
<li><p class="first">New code must follow <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP-8</a>. You can use the
<code class="docutils literal"><span class="pre">flake8</span></code> utility to automatically check your code. There is a
<code class="docutils literal"><span class="pre">bodhi.tests.test_style.TestStyle.test_code_with_flake8</span></code> to enforce this style.</p>
</li>
<li><p class="first">Add an entry to <code class="docutils literal"><span class="pre">docs/release_notes.rst</span></code> for any changes you make that should be in release
notes.</p>
</li>
<li><p class="first">Make sure your commits are atomic. Each commit should focus on one improvement or bug fix. If you
need to build upon changes that are related but aren&#8217;t atomic, feel free to send more than one
commit in the same pull request.</p>
</li>
<li><p class="first">Your commit messages must include a Signed-off-by tag with your name and e-mail address,
indicating that you agree to the
<a class="reference external" href="https://developercertificate.org/">Developer Certificate of Origin</a>. Bodhi uses version 1.1 of
the certificate, which reads:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Developer</span> <span class="n">Certificate</span> <span class="n">of</span> <span class="n">Origin</span>
<span class="n">Version</span> <span class="mf">1.1</span>

 <span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2004</span><span class="p">,</span> <span class="mi">2006</span> <span class="n">The</span> <span class="n">Linux</span> <span class="n">Foundation</span> <span class="ow">and</span> <span class="n">its</span> <span class="n">contributors</span><span class="o">.</span>
 <span class="mi">1</span> <span class="n">Letterman</span> <span class="n">Drive</span>
 <span class="n">Suite</span> <span class="n">D4700</span>
 <span class="n">San</span> <span class="n">Francisco</span><span class="p">,</span> <span class="n">CA</span><span class="p">,</span> <span class="mi">94129</span>

 <span class="n">Everyone</span> <span class="ow">is</span> <span class="n">permitted</span> <span class="n">to</span> <span class="n">copy</span> <span class="ow">and</span> <span class="n">distribute</span> <span class="n">verbatim</span> <span class="n">copies</span> <span class="n">of</span> <span class="n">this</span>
 <span class="n">license</span> <span class="n">document</span><span class="p">,</span> <span class="n">but</span> <span class="n">changing</span> <span class="n">it</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">allowed</span><span class="o">.</span>


 <span class="n">Developer</span><span class="s1">&#39;s Certificate of Origin 1.1</span>

 <span class="n">By</span> <span class="n">making</span> <span class="n">a</span> <span class="n">contribution</span> <span class="n">to</span> <span class="n">this</span> <span class="n">project</span><span class="p">,</span> <span class="n">I</span> <span class="n">certify</span> <span class="n">that</span><span class="p">:</span>

 <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="n">was</span> <span class="n">created</span> <span class="ow">in</span> <span class="n">whole</span> <span class="ow">or</span> <span class="ow">in</span> <span class="n">part</span> <span class="n">by</span> <span class="n">me</span> <span class="ow">and</span> <span class="n">I</span>
     <span class="n">have</span> <span class="n">the</span> <span class="n">right</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">it</span> <span class="n">under</span> <span class="n">the</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span>
     <span class="n">indicated</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">file</span><span class="p">;</span> <span class="ow">or</span>

 <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="ow">is</span> <span class="n">based</span> <span class="n">upon</span> <span class="n">previous</span> <span class="n">work</span> <span class="n">that</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">best</span>
     <span class="n">of</span> <span class="n">my</span> <span class="n">knowledge</span><span class="p">,</span> <span class="ow">is</span> <span class="n">covered</span> <span class="n">under</span> <span class="n">an</span> <span class="n">appropriate</span> <span class="nb">open</span> <span class="n">source</span>
     <span class="n">license</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">have</span> <span class="n">the</span> <span class="n">right</span> <span class="n">under</span> <span class="n">that</span> <span class="n">license</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">that</span>
     <span class="n">work</span> <span class="k">with</span> <span class="n">modifications</span><span class="p">,</span> <span class="n">whether</span> <span class="n">created</span> <span class="ow">in</span> <span class="n">whole</span> <span class="ow">or</span> <span class="ow">in</span> <span class="n">part</span>
     <span class="n">by</span> <span class="n">me</span><span class="p">,</span> <span class="n">under</span> <span class="n">the</span> <span class="n">same</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span> <span class="p">(</span><span class="n">unless</span> <span class="n">I</span> <span class="n">am</span>
     <span class="n">permitted</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">under</span> <span class="n">a</span> <span class="n">different</span> <span class="n">license</span><span class="p">),</span> <span class="k">as</span> <span class="n">indicated</span>
     <span class="ow">in</span> <span class="n">the</span> <span class="n">file</span><span class="p">;</span> <span class="ow">or</span>

 <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="n">was</span> <span class="n">provided</span> <span class="n">directly</span> <span class="n">to</span> <span class="n">me</span> <span class="n">by</span> <span class="n">some</span> <span class="n">other</span>
     <span class="n">person</span> <span class="n">who</span> <span class="n">certified</span> <span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">have</span> <span class="ow">not</span> <span class="n">modified</span>
     <span class="n">it</span><span class="o">.</span>

 <span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="n">I</span> <span class="n">understand</span> <span class="ow">and</span> <span class="n">agree</span> <span class="n">that</span> <span class="n">this</span> <span class="n">project</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">contribution</span>
     <span class="n">are</span> <span class="n">public</span> <span class="ow">and</span> <span class="n">that</span> <span class="n">a</span> <span class="n">record</span> <span class="n">of</span> <span class="n">the</span> <span class="n">contribution</span> <span class="p">(</span><span class="n">including</span> <span class="nb">all</span>
     <span class="n">personal</span> <span class="n">information</span> <span class="n">I</span> <span class="n">submit</span> <span class="k">with</span> <span class="n">it</span><span class="p">,</span> <span class="n">including</span> <span class="n">my</span> <span class="n">sign</span><span class="o">-</span><span class="n">off</span><span class="p">)</span> <span class="ow">is</span>
     <span class="n">maintained</span> <span class="n">indefinitely</span> <span class="ow">and</span> <span class="n">may</span> <span class="n">be</span> <span class="n">redistributed</span> <span class="n">consistent</span> <span class="k">with</span>
     <span class="n">this</span> <span class="n">project</span> <span class="ow">or</span> <span class="n">the</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">involved</span><span class="o">.</span>
</pre></div>
</div>
<p>For example, Randy Barlow&#8217;s commit messages include this line:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Signed</span><span class="o">-</span><span class="n">off</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">Randy</span> <span class="n">Barlow</span> <span class="o">&lt;</span><span class="n">randy</span><span class="nd">@electronsweatshop</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Code may be submitted by opening a pull request at
<a class="reference external" href="https://github.com/fedora-infra/bodhi/">github.com/fedora-infra/bodhi</a>, or you may e-mail a
patch to the
<a class="reference external" href="https://lists.fedoraproject.org/archives/list/bodhi&#64;lists.fedorahosted.org/">mailing list</a>.</p>
</li>
</ul>
</div>
<div class="section" id="easy-fix">
<h2>Easy Fix<a class="headerlink" href="#easy-fix" title="Permalink to this headline">¶</a></h2>
<p>If you are looking for some easy tasks to get started with Bodhi development, have a look at Bodhi&#8217;s
<a class="reference external" href="https://github.com/fedora-infra/bodhi/issues?q=is%3Aopen+is%3Aissue+label%3AEasyFix">EasyFix</a> tickets.</p>
</div>
<div class="section" id="ci-tests">
<h2>CI Tests<a class="headerlink" href="#ci-tests" title="Permalink to this headline">¶</a></h2>
<p>All Bodhi pull requests are tested in a <a class="reference external" href="https://ci.centos.org/job/bodhi-bodhi/">Jenkins instance</a>
that is graciously hosted for us by the CentOS Project. Sometimes tests fail, and when they do you
can visit the test job that failed and view its console output. This will display the output from
the <code class="docutils literal"><span class="pre">devel/ci/run_tests.sh</span></code> script. That script runs Bodhi&#8217;s test suite on a variety of
Fedora versions using containers.</p>
<p>It is possible for you to run these same tests locally. There is a <code class="docutils literal"><span class="pre">devel/run_tests.sh</span></code> script
that is used by <code class="docutils literal"><span class="pre">devel/ci/run_tests.sh</span></code> and does the heavy lifting. This script is intended to be
run as root since it uses <code class="docutils literal"><span class="pre">docker</span></code>. It has a handy <code class="docutils literal"><span class="pre">-x</span></code> flag that will cause it to exit
immediately upon failure. You can also set the <code class="docutils literal"><span class="pre">RELEASES</span></code> environment variable to a list of Fedora
releases you wish to test in a given run. Thus, if I want to run the tests on only f26 and f27 and I
want it to exit immediately upon failure, I can execute the script like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># RELEASES=&quot;f26 f27&quot; ./devel/run_tests.sh</span>
</pre></div>
</div>
<p>The CI system does not halt immediately upon failure, so that you can see all the problems at once.
Sometimes this makes it difficult to tell where the failure happened when looking at the console
output on the CI server. Some common failures will print out &#8220;JENKIES FAIL&#8221; to help with this. If
you browse to the console output on a job with failed tests, you can use your browser&#8217;s text search
feature to find that string in the output to more quickly identify where the failure occurred.</p>
</div>
<div class="section" id="create-a-bodhi-development-environment">
<h2>Create a Bodhi development environment<a class="headerlink" href="#create-a-bodhi-development-environment" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to bootstrap a Bodhi development environment. You can use Vagrant, or you can use
virtualenv on an existing host. <a class="reference external" href="https://www.vagrantup.com">Vagrant</a> allows contributors to get quickly up and running with a
Bodhi development environment by automatically configuring a virtual machine. <a class="reference external" href="https://virtualenv.pypa.io/en/stable/">Virtualenv</a> is
a more manual option for building a development environment on an existing system. If you aren&#8217;t
sure which development environment you would like to use, Vagrant is recommended as it get you a
working system more quickly and with less effort. If you would like to use Vagrant, see the
<a class="reference internal" href="vagrant.html"><span class="doc">Bodhi Vagrant Guide</span></a>. If you would like to use Virtualenv, see the
<a class="reference internal" href="virtualenv.html"><span class="doc">Bodhi Virtualenv Guide</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.svg" alt="Logo"/>
    
    <h1 class="logo logo-name">bodhi</h1>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=fedora-infra&repo=bodhi&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/update_states.html">Update states</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/man_pages/index.html">Man pages</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/release_notes.html">Release notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../server_api/index.html">Bodhi Server APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_bindings.html">Python bindings</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#contribution-guidelines">Contribution guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#easy-fix">Easy Fix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ci-tests">CI Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-bodhi-development-environment">Create a Bodhi development environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vagrant.html">Vagrant</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualenv.html">Virtualenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Database models</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../docblocks/bodhi.client.bindings.html" title="previous chapter">bodhi.client.bindings</a></li>
      <li>Next: <a href="vagrant.html" title="next chapter">Vagrant</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2007-2018, Red Hat, Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../_sources/developer/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>