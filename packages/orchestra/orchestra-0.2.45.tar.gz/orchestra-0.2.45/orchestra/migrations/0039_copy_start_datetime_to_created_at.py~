# -*- coding: utf-8 -*-
# Manually written
from __future__ import unicode_literals

from django.db import migrations, models

import datetime
import dateutil


def copy_start_datetime_to_created_at(apps, schema_editor):
    Iteration = apps.get_model('orchestra', 'Iteration')
    TaskAssignment = apps.get_model('orchestra', 'TaskAssignment')

    for assignment in Iteration.objects.all():
        assignment.created_at = assignment.start_datetime
        assignment.save()

    for assignment in TaskAssignment.objects.all():
        assignment.created_at = assignment.start_datetime
        assignment.save()


class Migration(migrations.Migration):

    dependencies = [
        ('orchestra', '0038_add_fields_to_taskassignment'),
    ]

    operations = [
        migrations.RunPython(copy_start_datetime_to_created_at),  # manually-reviewed
    ]
