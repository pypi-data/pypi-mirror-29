

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>About &mdash; MAVIS  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="#"/>
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="MAVIS  documentation" href="index.html"/>
        <link rel="next" title="Running the Pipeline" href="pipeline.html"/>
        <link rel="prev" title="Contents" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MAVIS
          

          
          </a>

          
            
            
              <div class="version">
                1.6.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#help">Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">Non-python dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#aligner">Aligner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Samtools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#resource-requirements">Resource Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uninformative-filter">Uninformative Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#splitting-validation-into-cluster-jobs">Splitting Validation into Cluster Jobs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Running the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="mavis_input.html">MAVIS standard input file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference Input Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration and Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools_supported.html">Supported SV Callers</a></li>
<li class="toctree-l1"><a class="reference internal" href="illustrations.html">Illustrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory and Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Guidelines for Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Package Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="citations.html">Literature</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MAVIS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>About</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/about.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="about">
<h1>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h1>
<object type='image/svg+xml' data='docs/source/_static/acronym.svg'>
    <object type='image/svg+xml' data='_static/acronym.svg'>
        <img src='docs/source/_static/acronym.svg' onerror='this.src="_static/acronym.svg"'>
    </object><br>
</object><a class="reference external image-reference" href="https://www.bcgsc.ca/bamboo/plugins/servlet/wittified/build-status/MAV-TEST"><img alt="master branch build Status" src="https://www.bcgsc.ca/bamboo/plugins/servlet/wittified/build-status/MAV-TEST" /></a>
<p><em>(master)</em></p>
<a class="reference external image-reference" href="https://www.bcgsc.ca/bamboo/plugins/servlet/wittified/build-status/MAV-TEST0"><img alt="develop branch build status" src="https://www.bcgsc.ca/bamboo/plugins/servlet/wittified/build-status/MAV-TEST0" /></a>
<p><em>(develop)</em></p>
<p><a class="reference external" href="http://mavis.bcgsc.ca">MAVIS</a> is a pipeline to merge and validate input from different structural variant callers into a single report.
The pipeline consists five of main steps</p>
<ul class="simple">
<li><a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/mavis.cluster.html#mavis-cluster">cluster</a></li>
<li><a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/mavis.validate.html#mavis-validate">validate</a></li>
<li><a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/mavis.annotate.html#mavis-annotate">annotate</a></li>
<li><a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/mavis.pairing.html#mavis-pairing">pairing</a></li>
<li><a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/mavis.summary.html#mavis-summary">summary</a></li>
</ul>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>There are 3 major steps to setting up and installing <a class="reference external" href="http://mavis.bcgsc.ca">MAVIS</a></p>
<ol class="arabic simple">
<li><strong>Install non-python dependencies</strong></li>
</ol>
<p>Before <a class="reference external" href="http://mavis.bcgsc.ca">MAVIS</a> can be installed, the <a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/about.html#non-python-dependencies">non-python dependencies</a> will need to be installed.
After these have been installed MAVIS itself can be installed through pip</p>
<p>These include: an aligner (<a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/glossary.html#term-blat">blat</a> or <a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/glossary.html#term-bwa">bwa mem</a>) and <a class="reference external" href="http://samtools.sourceforge.net">samtools</a>.</p>
<ol class="arabic simple">
<li><strong>Install MAVIS</strong></li>
</ol>
<p>The easiest way to install <a class="reference external" href="http://mavis.bcgsc.ca">MAVIS</a> is through the python package manager, pip</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>pip install git+https://github.com/bcgsc/mavis.git@vX.X.X#egg=mavis-X.X.X
</pre></div>
</div>
<p>Where X.X.X is the version number (for example 1.3.0). This will install mavis and its python dependencies.</p>
<ol class="arabic simple">
<li><strong>Build reference files</strong></li>
</ol>
<p>After <a class="reference external" href="http://mavis.bcgsc.ca">MAVIS</a> is installed the <a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/reference.html">reference files</a> must be generated (or downloaded) before it can be run.</p>
<p>Once the above 3 steps are complete <a class="reference external" href="http://mavis.bcgsc.ca">MAVIS</a> is ready to be run. See <a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/pipeline.html">running the pipeline</a>.</p>
</div>
<div class="section" id="help">
<h2>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h2>
<p>If you have a question or issue that is not answered in the <a class="reference external" href="http://mavis.bcgsc.ca/docs/latest/faqs.html">FAQs</a> please submit
an issue to our <a class="reference external" href="https://github.com/bcgsc/mavis/issues">github page</a> or contact us by email at <a class="reference external" href="mailto:mavis&#37;&#52;&#48;bcgsc&#46;ca">mavis<span>&#64;</span>bcgsc<span>&#46;</span>ca</a></p>
</div>
<div class="section" id="id6">
<span id="id7"></span><h2>Non-python dependencies<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="aligner">
<h3>Aligner<a class="headerlink" href="#aligner" title="Permalink to this headline">¶</a></h3>
<p>In addition to the python package dependencies, MAVIS also requires an aligner to be installed. Currently the only
aligners supported are <a class="reference internal" href="glossary.html#term-blat"><span class="xref std std-term">blat</span></a> and <a class="reference internal" href="glossary.html#term-bwa"><span class="xref std std-term">bwa mem</span></a>. For MAVIS to run successfully the aligner must be installed and accessible on the
path. If you have a non-std install you may find it useful to edit the PATH environment variable. For example</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>export PATH=/path/to/directory/containing/blat/binary:$PATH
</pre></div>
</div>
<p><a class="reference internal" href="glossary.html#term-blat"><span class="xref std std-term">Blat</span></a> is the default aligner. To configure MAVIS to use <a class="reference internal" href="glossary.html#term-bwa"><span class="xref std std-term">bwa mem</span></a> as a default instead, use the
<a class="reference internal" href="configuration.html#config-environment"><span class="std std-ref">MAVIS environment variables</span></a>. Both the <a class="reference internal" href="glossary.html#term-aligner"><span class="xref std std-term">aligner</span></a> and <a class="reference internal" href="reference.html#reference-files-aligner-reference"><span class="std std-ref">aligner reference</span></a> settings
should be specified</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">MAVIS_ALIGNER</span><span class="o">=</span><span class="s1">&#39;bwa mem&#39;</span>
<span class="n">export</span> <span class="n">MAVIS_ALIGNER_REFERENCE</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">mem</span><span class="o">/</span><span class="n">fasta</span><span class="o">/</span><span class="n">ref</span><span class="o">/</span><span class="n">file</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although MAVIS does attempt to standardize alignments there will still be some difference in the coordinates of the final
call set dependent on the aligner used to align putatative contigs. Additionally the aligner used on the input bam
will have a more significant impact as it will affect the reads collected in addition to the coordintates of all non-contig
calls.</p>
</div>
</div>
<div class="section" id="id8">
<h3>Samtools<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Samtools is only used in sorting and indexing the intermediary output bams. Eventually this will hopefully be
accomplished through <span class="xref std std-term">pysam</span> only.</p>
</div>
</div>
<div class="section" id="resource-requirements">
<span id="id9"></span><h2>Resource Requirements<a class="headerlink" href="#resource-requirements" title="Permalink to this headline">¶</a></h2>
<p>MAVIS has been tested on both unix and linux systems. For the standard pipeline, the validation stage is
the most computationally expensive. This will vary depending on the size of your input bam file and
the number of events input to be validated. There are a number of settings that can be adjusted to reduce
memory and cpu requirements depending on what the user is trying to analyze.</p>
<div class="section" id="uninformative-filter">
<h3>Uninformative Filter<a class="headerlink" href="#uninformative-filter" title="Permalink to this headline">¶</a></h3>
<p>For example, if the user is only interested in events in genes, then the <a class="reference internal" href="glossary.html#term-uninformative-filter"><span class="xref std std-term">uninformative_filter</span></a> can be used.
This will drop all events that are not within a certain distance (<a class="reference internal" href="glossary.html#term-max-proximity"><span class="xref std std-term">max_proximity</span></a>) to any annotation in the
annotations reference file. These events will be dropped prior to the validation stage which results in
significant speed up.</p>
<p>This can be set using the environment variable</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">MAVIS_UNINFORMATIVE_FILTER</span><span class="o">=</span><span class="kc">True</span>
</pre></div>
</div>
<p>or in the pipeline config file</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">cluster</span><span class="p">]</span>
<span class="n">uninformative_filter</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>or as a command line argument to the cluster stage</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">mavis</span> <span class="n">cluster</span> <span class="o">--</span><span class="n">uninformative_filter</span> <span class="kc">True</span> <span class="o">....</span>
</pre></div>
</div>
</div>
<div class="section" id="splitting-validation-into-cluster-jobs">
<h3>Splitting Validation into Cluster Jobs<a class="headerlink" href="#splitting-validation-into-cluster-jobs" title="Permalink to this headline">¶</a></h3>
<p>MAVIS chooses the number of jobs to split validate/annotate stages into based on
two settings: <a class="reference internal" href="glossary.html#term-max-files"><span class="xref std std-term">max_files</span></a> and <a class="reference internal" href="glossary.html#term-min-clusters-per-file"><span class="xref std std-term">min_clusters_per_file</span></a>.</p>
<p>For example, in the following situation say you have: 1000 clusters, <code class="docutils literal"><span class="pre">max_files=10</span></code>, and <code class="docutils literal"><span class="pre">min_clusters_per_file=10</span></code>. Then
MAVIS will set up 10 validation jobs each with 100 events.</p>
<p>However, if <code class="docutils literal"><span class="pre">min_clusters_per_file=500</span></code>, then MAVIS would only set up 2 jobs each with 500 events. This is because
<a class="reference internal" href="glossary.html#term-min-clusters-per-file"><span class="xref std std-term">min_clusters_per_file</span></a> takes precedence over <a class="reference internal" href="glossary.html#term-max-files"><span class="xref std std-term">max_files</span></a>.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pipeline.html" class="btn btn-neutral float-right" title="Running the Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Contents" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, creisle.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>