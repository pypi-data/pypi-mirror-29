

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Supported SV Callers &mdash; MAVIS  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="MAVIS  documentation" href="index.html"/>
        <link rel="next" title="Illustrations" href="illustrations.html"/>
        <link rel="prev" title="Configuration and Settings" href="configuration.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MAVIS
          

          
          </a>

          
            
            
              <div class="version">
                1.6.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Running the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="mavis_input.html">MAVIS standard input file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference Input Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration and Settings</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Supported SV Callers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#delly-post-processing"><code class="docutils literal"><span class="pre">DELLY</span></code> Post-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-a-custom-conversion-script">Writing A Custom Conversion Script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logic-example-chimerascan">Logic Example - <code class="docutils literal"><span class="pre">Chimerascan</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#calling-a-custom-conversion-script">Calling A Custom Conversion Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="illustrations.html">Illustrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory and Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Guidelines for Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Package Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="citations.html">Literature</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MAVIS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Supported SV Callers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tools_supported.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="supported-sv-callers">
<span id="id1"></span><h1>Supported SV Callers<a class="headerlink" href="#supported-sv-callers" title="Permalink to this headline">¶</a></h1>
<p>MAVIS supports output from a wide-variety of SV callers. Assumptions are made for each tool based on interpretation of
the output and the publications for each tool. The tools and versions currently supported are given below. Versions listed
indicate the version of the tool for which output files have been tested as input into MAVIS</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Version(s)</th>
<th class="head">MAVIS input</th>
<th class="head">Publication</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://github.com/genome/breakdancer">BreakDancer</a></td>
<td><code class="docutils literal"><span class="pre">1.4.5</span></code></td>
<td>&#160;</td>
<td><a class="reference internal" href="citations.html#chen-2009" id="id2">[Chen-2009]</a></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://code.google.com/archive/p/chimerascan">Chimerascan</a></td>
<td><code class="docutils literal"><span class="pre">0.4.5</span></code></td>
<td><code class="docutils literal"><span class="pre">*.bedpe</span></code></td>
<td><a class="reference internal" href="citations.html#iyer-2011" id="id3">[Iyer-2011]</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://bitbucket.org/dranew/defuse">DeFuse</a></td>
<td><code class="docutils literal"><span class="pre">0.6.2</span></code></td>
<td><code class="docutils literal"><span class="pre">results/results.classify.tsv</span></code></td>
<td><a class="reference internal" href="citations.html#mcpherson-2011" id="id4">[McPherson-2011]</a></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/dellytools/delly">DELLY</a></td>
<td><code class="docutils literal"><span class="pre">0.6.1</span></code> <code class="docutils literal"><span class="pre">0.7.3</span></code></td>
<td><code class="docutils literal"><span class="pre">combined.vcf</span></code> (converted from bcf)</td>
<td><a class="reference internal" href="citations.html#rausch-2012" id="id5">[Rausch-2012]</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/Illumina/manta">Manta</a></td>
<td><code class="docutils literal"><span class="pre">1.0.0</span></code></td>
<td><code class="docutils literal"><span class="pre">{diploidSV,somaticSV}.vcf</span></code></td>
<td><a class="reference internal" href="citations.html#chen-2016" id="id6">[Chen-2016]</a></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/genome/pindel">Pindel</a></td>
<td><code class="docutils literal"><span class="pre">0.2.5b9</span></code></td>
<td>&#160;</td>
<td><a class="reference internal" href="citations.html#ye-2009" id="id7">[Ye-2009]</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/bcgsc/transabyss">Trans-ABySS</a></td>
<td><code class="docutils literal"><span class="pre">1.4.8</span> <span class="pre">(custom)</span></code></td>
<td><code class="docutils literal"><span class="pre">fusions/*.tsv</span></code></td>
<td><a class="reference internal" href="citations.html#robertson-2010" id="id8">[Robertson-2010]</a></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The trans-abyss version used was an in-house dev version. However the output columns are compatible with 1.4.8 as that
was the version branched from</p>
</div>
<div class="section" id="delly-post-processing">
<h2><a class="reference internal" href="citations.html#rausch-2012"><span class="std std-ref">DELLY</span></a> Post-processing<a class="headerlink" href="#delly-post-processing" title="Permalink to this headline">¶</a></h2>
<p>Some post-processing on the delly output files is generally done prior to input. The output bcf files are converted to a vcf file</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">bcftools</span> <span class="n">concat</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="k">with</span><span class="o">/</span><span class="n">vcf</span><span class="o">/</span><span class="nb">list</span> <span class="o">--</span><span class="n">allow</span><span class="o">-</span><span class="n">overlaps</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="nb">type</span> <span class="n">v</span> <span class="o">--</span><span class="n">output</span> <span class="n">combined</span><span class="o">.</span><span class="n">vcf</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-a-custom-conversion-script">
<span id="custom-conversion"></span><h2>Writing A Custom Conversion Script<a class="headerlink" href="#writing-a-custom-conversion-script" title="Permalink to this headline">¶</a></h2>
<div class="section" id="logic-example-chimerascan">
<h3>Logic Example - <a class="reference internal" href="citations.html#iyer-2011"><span class="std std-ref">Chimerascan</span></a><a class="headerlink" href="#logic-example-chimerascan" title="Permalink to this headline">¶</a></h3>
<p>The following is a description of how the conversion script for <a class="reference internal" href="citations.html#iyer-2011"><span class="std std-ref">Chimerascan</span></a> was generated. While this is a built-in
conversion command now, the logic could also have been put in an external script. As mentioned above, there are a number of
assumptions that had to be made about the tools output to convert it to the <a class="reference internal" href="mavis_input.html#mavis-input-format"><span class="std std-ref">standard mavis format</span></a>.
Assumptions were then verified by reviewing at a series of called events in <a class="reference internal" href="glossary.html#term-igv"><span class="xref std std-term">IGV</span></a>. In the current example,
<a class="reference internal" href="citations.html#iyer-2011"><span class="std std-ref">Chimerascan</span></a> output has six columns of interest that were used in the conversion</p>
<ul class="simple">
<li>start3p</li>
<li>end3p</li>
<li>strand3p</li>
<li>start5p</li>
<li>end5p</li>
<li>strand5p</li>
</ul>
<p>The above columns describe two segments which are joined. MAVIS requires the position of the join. It was assumed that the
segments are always joined as a <span class="xref std std-term">sense fusion</span>. Using this assumption there are four logical cases to determine the position of the breakpoints.</p>
<p>i.e. the first case would be: If both strands are positive, then the end of the five-prime segment (end5p)
is the first breakpoint and the start of the three-prime segment is the second breakpoint</p>
<p>The logic for all cases is shown in the code below</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_parse_chimerascan</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    transforms the chimerscan output into the common format for expansion. Maps the input column</span>
<span class="sd">    names to column names which MAVIS can read</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">std_row</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">retained_column</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;genes5p&#39;</span><span class="p">,</span> <span class="s1">&#39;genes3p&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">retained_column</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
            <span class="n">std_row</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SUPPORTED_TOOL</span><span class="o">.</span><span class="n">CHIMERASCAN</span><span class="p">,</span> <span class="n">retained_column</span><span class="p">)]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">retained_column</span><span class="p">]</span>
<span class="hll">    <span class="k">if</span> <span class="n">TRACKING_COLUMN</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
</span><span class="hll">        <span class="n">std_row</span><span class="p">[</span><span class="n">TRACKING_COLUMN</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">-</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SUPPORTED_TOOL</span><span class="o">.</span><span class="n">CHIMERASCAN</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;chimera_cluster_id&#39;</span><span class="p">])</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">std_row</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break1_chromosome</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;chrom5p&#39;</span><span class="p">],</span> <span class="n">COLUMNS</span><span class="o">.</span><span class="n">break2_chromosome</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;chrom3p&#39;</span><span class="p">]})</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;strand5p&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
</span><span class="hll">        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break1_position_start</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;end5p&#39;</span><span class="p">]</span>
</span><span class="hll">        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break1_orientation</span><span class="p">]</span> <span class="o">=</span> <span class="n">ORIENT</span><span class="o">.</span><span class="n">LEFT</span>
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break1_position_start</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;start5p&#39;</span><span class="p">]</span>
</span><span class="hll">        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break1_orientation</span><span class="p">]</span> <span class="o">=</span> <span class="n">ORIENT</span><span class="o">.</span><span class="n">RIGHT</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;strand3p&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
</span><span class="hll">        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break2_position_start</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;start3p&#39;</span><span class="p">]</span>
</span><span class="hll">        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break2_orientation</span><span class="p">]</span> <span class="o">=</span> <span class="n">ORIENT</span><span class="o">.</span><span class="n">RIGHT</span>
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break2_position_start</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;end3p&#39;</span><span class="p">]</span>
        <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">break2_orientation</span><span class="p">]</span> <span class="o">=</span> <span class="n">ORIENT</span><span class="o">.</span><span class="n">LEFT</span>
    <span class="n">std_row</span><span class="p">[</span><span class="n">COLUMNS</span><span class="o">.</span><span class="n">opposing_strands</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;strand5p&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;strand3p&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">std_row</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-a-custom-conversion-script">
<h3>Calling A Custom Conversion Script<a class="headerlink" href="#calling-a-custom-conversion-script" title="Permalink to this headline">¶</a></h3>
<p>Custom conversion scripts can be specified during <a class="reference internal" href="configuration.html#pipeline-config"><span class="std std-ref">automatic config generation</span></a> using the
<code class="docutils literal"><span class="pre">--external_conversion</span></code> option.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any external conversion scripts must take a <code class="docutils literal"><span class="pre">-o</span></code> option which requires a single
outputfile argument. This outputfile must be the converted file output by the script.
Additionally, the conversion script must be specified by its full path name and have executeable permissions.</p>
</div>
<p>In the following example the user has created a custom conversion script <code class="docutils literal"><span class="pre">my_convert_script.py</span></code> which they
are passing an input file named <code class="docutils literal"><span class="pre">my_input1.txt</span></code>.</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">mavis</span> <span class="n">config</span> <span class="o">--</span><span class="n">external_conversion</span> <span class="n">my_converted_input1</span> <span class="s2">&quot;my_convert_script.py my_input1.txt ... &quot;</span>
</pre></div>
</div>
<p>This will then be called during the pipeline step as</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">my_convert_script</span><span class="o">.</span><span class="n">py</span> <span class="n">my_input1</span><span class="o">.</span><span class="n">txt</span> <span class="o">...</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">output</span><span class="o">/</span><span class="nb">dir</span><span class="o">/</span><span class="n">converted_inputs</span><span class="o">/</span><span class="n">my_converted_input1</span><span class="o">.</span><span class="n">tab</span>
</pre></div>
</div>
<p>You can also re-use the same conversion script if you have multiple inputs to convert simply by specifying a different alias</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">mavis</span> <span class="n">config</span> \
    <span class="o">--</span><span class="n">external_conversion</span> <span class="n">my_converted_input1</span> <span class="s2">&quot;my_convert_script.py my_input1.txt&quot;</span> \
    <span class="o">--</span><span class="n">external_conversion</span> <span class="n">my_converted_input2</span> <span class="s2">&quot;my_convert_script.py my_input2.txt&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="illustrations.html" class="btn btn-neutral float-right" title="Illustrations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral" title="Configuration and Settings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, creisle.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>