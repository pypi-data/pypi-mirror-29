
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Subscriptions / Policies &#8212; Rucio 1.2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributor Guide" href="contributing.html" />
    <link rel="prev" title="Notifications" href="overview_Notifications.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="subscriptions-policies">
<h1>Subscriptions / Policies<a class="headerlink" href="#subscriptions-policies" title="Permalink to this headline">¶</a></h1>
<p>Policies are system entities which generate rules or transfer requests based on matching
particular dataset metadata at registration time. Polices are owned by an account and can
only generate rules for that account. Policies may have a lifetime, after which they will expire.</p>
<p>An example of a policy is given below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Owner</td>
<td>tzero</td>
</tr>
<tr class="row-odd"><td>match</td>
<td>project=data11 7TeV, dataType=RAW, stream=physics*</td>
</tr>
<tr class="row-even"><td>rule</td>
<td>1&#64;CERNTAPE, 1&#64;T1TAPE</td>
</tr>
<tr class="row-odd"><td>lifetime</td>
<td>2012-01-01 00:00</td>
</tr>
</tbody>
</table>
<p>Policies can also create transfer primitives, so generate extra copies of data as it is produced:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Owner</td>
<td>prod</td>
</tr>
<tr class="row-odd"><td>match</td>
<td>project=mc11 7TeV, dataType=merge.AOD, tag=*(p795|p796|p805)*, replicationPolicy=RPValue</td>
</tr>
<tr class="row-even"><td>rule</td>
<td>1&#64;T1DISK, 1&#64;T2DISK,</td>
</tr>
<tr class="row-odd"><td>transfer</td>
<td>1&#64;T1DISK, 2&#64;T2DISK</td>
</tr>
<tr class="row-even"><td>lifetime</td>
<td>2011-12-01 00:00</td>
</tr>
</tbody>
</table>
<p>In this case the transfer request is for extra copies, in addition to those set by rules.
(This is different behaviour to that for rules themselves, which are always independent.)</p>
<p>Rucio Subscriptions / Policies (name <strong>TBD</strong>) exist for the purpose of making data
placement decisions before the actual data has been created. In the current
DQ<sub>2</sub> system there are basically 3 applications which are responsible
for this behavior:</p>
<ul class="simple">
<li>DaTRI</li>
<li>SantaClaus</li>
<li>AK47</li>
</ul>
<div class="section" id="short-application-descriptions">
<h2>Short application descriptions<a class="headerlink" href="#short-application-descriptions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="datri">
<h3>DaTRI<a class="headerlink" href="#datri" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference external" href="https://twiki.cern.ch/twiki/bin/viewauth/Atlas/DataTransferRequestInterface">https://twiki.cern.ch/twiki/bin/viewauth/Atlas/DataTransferRequestInterface</a></p>
<p>DaTRI is a data-transfer tool which basically offers two functionalities:</p>
<ul class="simple">
<li>Transfers of existing data to a site X</li>
<li>Transfer-Subscriptions of non-existing data, which match a certain pattern to a site X</li>
</ul>
<p>Data is identified by dataset-names, patterns, container-names or
patterns. Requests can either finish after a transfer is complete or stay active
to look for newly-created data (which match a request pattern) to continously
transfer the data to a site.</p>
<p>All requests (there are exceptions) have to be approved by either a DaTRI admin
or a cloud coordinator.</p>
<p>There also exists a website which shows the status of all requests.</p>
</div>
<div class="section" id="santaclaus">
<h3>SantaClaus<a class="headerlink" href="#santaclaus" title="Permalink to this headline">¶</a></h3>
<p><strong>TODO</strong></p>
</div>
</div>
<div class="section" id="ak47">
<h2>AK47<a class="headerlink" href="#ak47" title="Permalink to this headline">¶</a></h2>
<p><strong>TODO</strong></p>
</div>
<div class="section" id="workflow">
<h2>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<p>In order to represent all (or most) of this functonality in Rucio in a generic
way, the respective steps of the workflow of the current applications have to be
identified and described. At the moment we spotted three fundamental steps for all
the applications which should be described in the following section.</p>
<ul class="simple">
<li><strong>Input Selection</strong>: How is the input data selected? (Patterns on files/ds? etc.)</li>
<li><strong>Destination Selection</strong>: How is the destination selected?</li>
<li><strong>Output Generation</strong>: What are the characteristics of the output generation (source dataset just moved, subset of dataset moved into new dataset, etc.)?</li>
</ul>
<div class="section" id="id1">
<h3>DaTRI<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="input-selection">
<h4>Input Selection<a class="headerlink" href="#input-selection" title="Permalink to this headline">¶</a></h4>
<p>Based on:</p>
<ul class="simple">
<li>Pattern: Either a full datasetname, dataset pattern, containername or containerpattern</li>
<li>Type: Data type of the dataset (e.g.: DESDM_EGAMMA, EVGEN)</li>
</ul>
</div>
<div class="section" id="destination-selection">
<h4>Destination Selection<a class="headerlink" href="#destination-selection" title="Permalink to this headline">¶</a></h4>
<p>Specific destination endpoint; However, based on the endpoint the request has to be <strong>approved</strong> by an admin or cloud coordinator.</p>
</div>
<div class="section" id="output-generation">
<h4>Output Generation<a class="headerlink" href="#output-generation" title="Permalink to this headline">¶</a></h4>
<p>The output generation can be based on:</p>
<ul class="simple">
<li>Volume: The user selects a percentage of the original data</li>
<li>Files List: File names or File name patterns</li>
<li>Both volume and file list</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h3>SantaClaus<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id3">
<h4>Input Selection<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p><strong>TODO</strong></p>
</div>
<div class="section" id="id4">
<h4>Destination Selection<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><strong>TODO</strong></p>
</div>
<div class="section" id="id5">
<h4>Output Generation<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p><strong>TODO</strong></p>
</div>
</div>
<div class="section" id="id6">
<h3>AK47<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id7">
<h4>Input Selection<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p><strong>TODO</strong></p>
</div>
<div class="section" id="id8">
<h4>Destination Selection<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p><strong>TODO</strong></p>
</div>
<div class="section" id="id9">
<h4>Output Generation<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p><strong>TODO</strong></p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Rucio</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="concepts.html">Concepts and terminology</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">RESTful APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">The Client API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing_clients.html">Installing Rucio Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="clis.html">Rucio CLI Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html">Rucio Clients</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing_server.html">Installing Rucio server</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing_daemons.html">Installing Rucio daemons</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="concepts.html">Concepts and terminology</a><ul>
      <li>Previous: <a href="overview_Notifications.html" title="previous chapter">Notifications</a></li>
      <li>Next: <a href="contributing.html" title="next chapter">Contributor Guide</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017 CERN for the benefit of the ATLAS collaboration.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/overview_Subscriptions.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>