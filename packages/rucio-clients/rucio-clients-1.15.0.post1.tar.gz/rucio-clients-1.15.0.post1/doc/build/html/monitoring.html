
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Monitoring &#8212; Rucio 1.2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Individual contributors to the source code" href="authors.html" />
    <link rel="prev" title="Installing Rucio daemons" href="installing_daemons.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="monitoring">
<h1>Monitoring<a class="headerlink" href="#monitoring" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>There are three different monitoring components:</dt>
<dd><ul class="first last simple">
<li>Rucio internal monitoring using Graphite/Grafana</li>
<li>Transfer monitoring using the messages sent by Hermes</li>
<li>File/Dataset Access monitoring using the traces</li>
</ul>
</dd>
</dl>
<div class="section" id="internal-monitoring">
<h2>Internal Monitoring<a class="headerlink" href="#internal-monitoring" title="Permalink to this headline">¶</a></h2>
<p>This is to monitor the internals of Rucio servers and
daemons, e.g., submission rate of the conveyor, state of conveyor queues, reaper
deletion rate, server response times, server active session, etc. We use Graphite[1]
for this. It’s easy to setup and then you have to point your Rucio instance to the
Graphite server using the “carbon_server” options in the “monitor” section in etc/rucio.cfg.
The different Rucio components then will send metrics using those “record_*” functions you
will find all over the code. Graphite has a built-in web interface to show graphs but
more comfortable to use is Grafana. You can find an example dashboard from us here [2].</p>
</div>
<div class="section" id="transfer-monitoring">
<h2>Transfer monitoring<a class="headerlink" href="#transfer-monitoring" title="Permalink to this headline">¶</a></h2>
<p>If a transfer is submitted, queued, waiting, done or failed  messages are sent to
ActiveMQ via Hermes and are also archived in the messages_history table. Same is true for deletions.
In the ATLAS case we have a dedicated monitoring infrastructure that reads
the messages from ActiveMQ, aggregates them and then writes the aggregated data
into Elasticsearch/InfluxDB from where it then can be visualised using Kibana/Grafana.</p>
</div>
<div class="section" id="access-monitoring">
<h2>Access monitoring<a class="headerlink" href="#access-monitoring" title="Permalink to this headline">¶</a></h2>
<p>The traces are sent by the pilots or the rucio clients whenever a file is downloaded/uploaded.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Monitoring</a><ul>
<li><a class="reference internal" href="#internal-monitoring">Internal Monitoring</a></li>
<li><a class="reference internal" href="#transfer-monitoring">Transfer monitoring</a></li>
<li><a class="reference internal" href="#access-monitoring">Access monitoring</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="installing_daemons.html" title="previous chapter">Installing Rucio daemons</a></li>
      <li>Next: <a href="authors.html" title="next chapter">Individual contributors to the source code</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/monitoring.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2012-2018 CERN for the benefit of the ATLAS collaboration..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/monitoring.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>