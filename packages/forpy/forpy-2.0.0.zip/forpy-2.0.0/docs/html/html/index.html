<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=9"/>
        <meta name="generator" content="Doxygen 1.8.14"/>
        <title>forpy: forpy</title>
        <link href="tabs.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
        <link href="stylesheet.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div id="titlearea">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr style="height: 56px;">
                            <td style="padding-left: 0.5em;">
                                <div id="projectname">forpy
                                    &#160;<span id="projectnumber">2</span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">forpy </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Elegant Decision Forests in Python. Fast, clean and clear C++14 implementation with no dependencies and with an easy to use interface in Python and C++.</p>
<h2>Principles</h2>
<ol type="1">
<li>Easy to hack <br />
 The library provides an object oriented implementation of parts of the theoretical framework of <a href="https://www.microsoft.com/en-us/research/publication/decision-forests-for-classification-regression-density-estimation-manifold-learning-and-semi-supervised-learning/">Criminisi et al.</a>. This makes the library easy to understand and extend while maintaining full generality. Objects are easy to reuse and recombine.</li>
<li>Easy to compile <br />
 There are no dependencies. The only build requirement is a C++14 compatible compiler (tested with GCC and clang). We use the CMake build system with pre-compiled headers for fast builds and compatibility to many platforms.</li>
<li>Easy to use <br />
 The library exposes a Python and C++ interface that accepts numpy/Eigen arrays of many types. The interface follows the widely used Scikit-learn interface with <code>fit</code> and <code>predict</code> methods.</li>
<li>Fast <br />
 The implementation of algorithms, while caring for readability and maintainability, is highly optimized for speed (benchmarks see below). We outperform scikit learn in all settings by notable margins at fit and predict time. For fitting, we enable fully deterministic parallelization even during node optimization, allowing to fully leverage modern CPUs with many cores.</li>
<li>Efficient <br />
 We use the <a href="https://uscilab.github.io/cereal/">cereal</a> C++ serialization library enabling binary persistence (C++, pickle) or JSON export. The binary models need only a fraction of space of the corresponding scikit learn models.</li>
</ol>
<h2>Approach</h2>
<p>We use modern C++14 to create highly flexible, highly efficient data structures and algorithm implementations. Core building blocks are:</p>
<ul>
<li>A highly efficient <a href="https://github.com/mapbox/variant"><code>variant</code> implementation</a> for high efficiency w.r.t. datatype dependent storage and processing while maintaining an uncluttered interface and implementation. <a href="https://github.com/google/glog"><code>glog</code></a> and <a href="https://github.com/gperftools/gperftools"><code>gperftools</code></a> integration is used for easy debugging and optimization. All dependency libraries don't need to be installed but are part of the repository and completely integrated into the build.</li>
<li>CMake is used as a build system so that many platforms and compilers can be targeted easily. <a href="https://github.com/sakra/cotire"><code>cotire</code></a> is used for automatic fast pre-compiled header builds. The whole package is automatically <code>pip</code> installable even without an installed CMake thanks to <a href="https://github.com/scikit-build/scikit-build"><code>scikit-build</code></a>.</li>
<li>We use standard <a href="http://eigen.tuxfamily.org"><code>Eigen</code></a> datastructures wrapped in <code>variant</code> to provide an easy-to-use C++ interface. We create a small and sleek Python interface thanks to <a href="https://github.com/pybind/pybind11">pybind11</a>.</li>
<li>Threading is implemented with <a href="https://github.com/Kolkir/cpptask">cpptask</a> to be efficient and cross-platform.</li>
</ul>
<h2>Compilation &amp; Installation</h2>
<p>If you want to use it from python, a simple <code>python setup.py install</code> should do. If you want to use it from C++, you can rely on CMake and do <code>mkdir build; cd build; cmake ..; cmake --build . -- -j</code> for an out-of-source build.</p>
<h2>Development &amp; Contributing</h2>
<h3>Formatting and conventions</h3>
<p>The code is formatted with <a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> according to the google C++ style guidelines (a <code>.clang-format</code> file is provided on project level). We use abbreviated CamCase class names. For library internal functions, assertions must be done using the <code>FASSERT</code> macro to selectively enable it, but should be disabled for performance reasons for release builds.</p>
<p>Error messages <em>must</em> be meaningful and provide additional information on what caused the error.</p>
<p>Design decisions are made according to the following priorities:: correctness &amp; numerical stability &gt;&gt; speed &gt;&gt; in-memory efficiency &gt;&gt; storage efficiency.</p>
<h4>Rough naming conventions</h4>
<p>Raw pointer variable names end with <code>_p</code>, indicating (1) high performance element access and (2) special care. In performance relevant loops, only <code>_p</code> variables should be used. Variant variable names end with <code>_v</code>.</p>
<h3>Programming concepts</h3>
<p><b>Lock-free parallelism:</b></p>
<p>Memory is allocated for the tree and leaf storage structures in before entering parallel regions in a pessimistic way. Since it is linear in the number of samples, this is not too much of an overhead. The pointer to where next nodes/leafs can be created is an <code>std::atomic&lt;size_t&gt;</code>. After training, the datastructures are resized to their proper size.</p>
<p><b>The <a class="el" href="group__forpydesk_group.html">Desk</a> classes:</b> this is a helper concept to simplify safe parallelism. A 'desk' contains all thread-local variables and pointers to the shared storage. Each thread has its own <a class="el" href="structforpy_1_1_desk.html">desk</a> with sub-objects containing thread-local storage for the corresponding sub-functions. It is constructed with pointers to the memory for storing the results of the training.</p>
<h2>License</h2>
<p>The library itself is available under the 2-clause BSD license. All libraries used are also available under open source licenses, for details see <code>build_support/external</code>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
        <li class="footer">Generated on Sat Feb 10 2018 01:06:57 for forpy by
            <a href="http://www.doxygen.org/index.html">
                <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
    </ul>
</div>
</body>
</html>
