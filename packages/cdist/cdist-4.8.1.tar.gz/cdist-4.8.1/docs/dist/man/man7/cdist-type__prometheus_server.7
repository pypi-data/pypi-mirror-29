.\" Man page generated from reStructuredText.
.
.TH "CDIST-TYPE__PROMETHEUS_SERVER" "7" "Mar 09, 2018" "4.8.1" "cdist"
.SH NAME
cdist-type__prometheus_server \- 
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH NAME
.sp
cdist\-type__prometheus_server \- install Prometheus
.SH DESCRIPTION
.sp
Install and configure Prometheus (\fI\%https://prometheus.io/\fP).
.sp
This type creates a daemontools\-compatible service directory under /service/prometheus.
Daemontools (or something compatible) must be installed (in particular, the command \fIsvc\fP must be executable).
.SH REQUIRED PARAMETERS
.INDENT 0.0
.TP
.B config
Prometheus configuration file. It will be saved as /etc/prometheus/prometheus.yml on the target.
.TP
.B listen\-address
Passed as web.listen\-address.
.TP
.B alertmanager\-url
Passed as alertmanager.url
.UNINDENT
.SH OPTIONAL PARAMETERS
.INDENT 0.0
.TP
.B retention\-days
How long to keep data. Default: 30
.TP
.B rule\-files
Path to rule files. They will be installed under /etc/prometheus/<filename>. You need to include \fIrule_files: [/etc/prometheus/<your\-pattern>]\fP in the config file if you use this.
.TP
.B storage\-path
Where to put data. Default: /data/prometheus. (Directory will be created if needed.)
.TP
.B target\-heap\-size
Passed as storage.local.target\-heap\-size. Default: 1/2 of RAM.
.UNINDENT
.SH BOOLEAN PARAMETERS
.sp
None
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
PROMPORT=9090
ALERTPORT=9093

__daemontools
__golang_from_vendor \-\-version 1.8.1  # required for prometheus and many exporters

require="__daemontools __golang_from_vendor" __prometheus_server \e
    \-\-with\-daemontools \e
    \-\-config "$__manifest/files/prometheus.yml" \e
    \-\-retention\-days 14 \e
    \-\-storage\-path /data/prometheus \e
    \-\-listen\-address "[::]:$PROMPORT" \e
    \-\-rule\-files "$__manifest/files/*.rules" \e
    \-\-alertmanager\-url "http://monitoring1.node.consul:$ALERTPORT,http://monitoring2.node.consul:$ALERTPORT"
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fBcdist\-type__prometheus_alertmanager\fP(7), \fBcdist\-type__daemontools\fP(7),
Prometheus documentation: \fI\%https://prometheus.io/docs/introduction/overview/\fP
.SH AUTHORS
.sp
Kamila Součková <\fI\%kamila\-\-@\-\-ksp.sk\fP>
.SH COPYING
.sp
Copyright (C) 2017 Kamila Součková. You can redistribute it
and/or modify it under the terms of the GNU General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
.\" Generated by docutils manpage writer.
.
