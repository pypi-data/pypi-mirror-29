

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating the MIDIFile Object &mdash; MIDIUtil 1.1.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="MIDIUtil 1.1.1 documentation" href="index.html"/>
        <link rel="next" title="Common Events and Function" href="common.html"/>
        <link rel="prev" title="MIDIUtil" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MIDIUtil
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating the MIDIFile Object</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#numtracks">numTracks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#removeduplicates">removeDuplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deinterleave">deinterleave</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adjust-origin">adjust_origin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-format">file_format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common Events and Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning.html">Tuning and Microtonalities</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="class.html">Class Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">MIDIUtil</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Creating the MIDIFile Object</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/creating.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-the-midifile-object">
<h1>Creating the MIDIFile Object<a class="headerlink" href="#creating-the-midifile-object" title="Permalink to this headline">¶</a></h1>
<p>The first step in using the library is creating a <code class="docutils literal"><span class="pre">MIDIFile</span></code> object.
There are only a few parameters that need be specified, but they affect
the functioning of the library, so it&#8217;s good to understand what they do.</p>
<p>The signature of of the <code class="docutils literal"><span class="pre">MIDIFile</span></code> <code class="docutils literal"><span class="pre">__init__()</span></code> function is
as follows:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numTracks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">removeDuplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">deinterleave</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">adjust_origin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</pre></div>
</div>
<p>where the parameters do the following:</p>
<div class="section" id="numtracks">
<h2>numTracks<a class="headerlink" href="#numtracks" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">numTracks</span></code> specifies the number of tracks the MIDI file should have.
It should be set to at least 1 (after all, a MIDI file without tracks isn&#8217;t
very useful), but it may be set higher for a multi-track file.</p>
<p>This parameter defaults to <code class="docutils literal"><span class="pre">1</span></code>.</p>
</div>
<div class="section" id="removeduplicates">
<h2>removeDuplicates<a class="headerlink" href="#removeduplicates" title="Permalink to this headline">¶</a></h2>
<p>If set to <code class="docutils literal"><span class="pre">True</span></code> (the default), duplicate notes will be removed from
the file. This is done on a track-by-track basis.</p>
<p>Notes are considered duplicates if they occur at the same time, and have
equivalent pitch, and MIDI channel. If set to <code class="docutils literal"><span class="pre">False</span></code> no attempt is made
to remove notes which appear to be duplicates.</p>
<p><code class="docutils literal"><span class="pre">removeDuplicates()</span></code> also attempts to remove other kinds of duplicates. For
example, if there are two tempo events at the same time and same tempo, they
are considered duplicates.</p>
<p>Of course, it&#8217;s best not to insert duplicate events in the first place,
but this could be unavoidable in some instances &#8211; for example, if the software
is used in the creation of <a class="reference external" href="https://en.wikipedia.org/wiki/Generative_music">Generative Music</a>
using an algorithm that can create duplication of events.</p>
</div>
<div class="section" id="deinterleave">
<h2>deinterleave<a class="headerlink" href="#deinterleave" title="Permalink to this headline">¶</a></h2>
<p>If <code class="docutils literal"><span class="pre">deinterleave</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code> (the default), an attempt will be made
to remove interleaved notes.</p>
<p>To understand what an <em>interleaved</em> note is, it is useful to have some understanding
of the MIDI standard.</p>
<p>To make this library more human-centric, one of the fundamental concepts used is
that of the <strong>note</strong>. But the MIDI standard doesn&#8217;t have notes; instead, it has
<strong>note on</strong> and <strong>note off</strong> events. These are correlated by channel and pitch.</p>
<p>So if, for example, you create two notes of duration 1 and separated by 1/2 of
a beat, ie:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">duration</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">addNote</span><span class="p">(</span><span class="n">track</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">pitch</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">duration</span><span class="p">,</span><span class="n">volume</span><span class="p">)</span>
<span class="n">time</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">addNote</span><span class="p">(</span><span class="n">track</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">pitch</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">duration</span><span class="p">,</span><span class="n">volume</span><span class="p">)</span>
</pre></div>
</div>
<p>you end up with a note on event at 0, another note on event a 0.5, and
two note off events, one at 1.0 and one at 1.5. So when the first note off
event is processed it raises the question: which note on event does it correspond to?
The channel and pitch are the same, so there is some ambiguity in the
way that a hardware or software instrument will respond.</p>
<p>if <code class="docutils literal"><span class="pre">deinterleave</span></code> is <code class="docutils literal"><span class="pre">True</span></code> the library tries to disambiguate the situation
by shifting the first note&#8217;s off event to be immediately before the second
note&#8217;s on event. Thus in the example above the first note on would be at 0,
the first note off would be at 0.5, the second note on would also be at
0.5 (but would be processed after the note off at that time), and the last
note off would be at 1.5.</p>
<p>If this parameter is set to <code class="docutils literal"><span class="pre">False</span></code> no events will be shifted.</p>
</div>
<div class="section" id="adjust-origin">
<h2>adjust_origin<a class="headerlink" href="#adjust-origin" title="Permalink to this headline">¶</a></h2>
<p>If <code class="docutils literal"><span class="pre">adjust_origin</span></code> is <code class="docutils literal"><span class="pre">True</span></code> the library will find the earliest
event in all the tracks and shift all events so that that time is t=0.
If it is <code class="docutils literal"><span class="pre">False</span></code> no time-shifting will occur.</p>
<p>If it is left at it&#8217;s default value, <code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">adjust_origin</span></code> will be
set to <code class="docutils literal"><span class="pre">True</span></code> and a <code class="docutils literal"><span class="pre">FutureWarning</span></code> will be displayed. This is because in
the next release the default behavior will change and no adjustment will be
performed by default.</p>
</div>
<div class="section" id="file-format">
<h2>file_format<a class="headerlink" href="#file-format" title="Permalink to this headline">¶</a></h2>
<p>This specifies the format of the file to be written. Both format 1 (the default)
and format 2 files are supported.</p>
<p>In the format 1 file there is a separate &#8220;tempo&#8221; track to which tempo and
time signature events are written. The calls to create these events &#8211;
<code class="docutils literal"><span class="pre">addTemo()</span></code> and <code class="docutils literal"><span class="pre">addTimeSignature()</span></code> accept a track parameter, but in
a format 1 file these are ignored. In format 2 files they are interpreted
literally (and zero-origined, so that a two track file has indices <code class="docutils literal"><span class="pre">0</span></code> and
<code class="docutils literal"><span class="pre">1</span></code>).</p>
<p>Track indexing is always zero-based, but with the format 1 file the tempo track
is not indexed. Thus if you create a one track file:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">MyMIDI</span> <span class="o">=</span> <span class="n">MIDIFile</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>you would only have <code class="docutils literal"><span class="pre">0</span></code> as a valid index; the tempo track is managed independently
for you. Thus:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">track</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">big_track</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">addTempo</span><span class="p">(</span><span class="n">big_track</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">)</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">addNote</span><span class="p">(</span><span class="n">track</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>works, even though &#8220;track 0&#8221; is really the second track in the file, and there is
no track 1000.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="common.html" class="btn btn-neutral float-right" title="Common Events and Function" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="MIDIUtil" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Mark Conway Wirt.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>