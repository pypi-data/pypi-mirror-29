

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tuning and Microtonalities &mdash; MIDIUtil 1.1.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="MIDIUtil 1.1.1 documentation" href="index.html"/>
        <link rel="next" title="Extending the Library" href="extending.html"/>
        <link rel="prev" title="Common Events and Function" href="common.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MIDIUtil
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="creating.html">Creating the MIDIFile Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common Events and Function</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tuning and Microtonalities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tuning-program">Tuning Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tuning-bank">Tuning Bank</a></li>
<li class="toctree-l2"><a class="reference internal" href="#an-example">An Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-pitch-bend">Using Pitch Bend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#to-do">To Do</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="class.html">Class Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">MIDIUtil</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Tuning and Microtonalities</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tuning.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tuning-and-microtonalities">
<h1>Tuning and Microtonalities<a class="headerlink" href="#tuning-and-microtonalities" title="Permalink to this headline">¶</a></h1>
<p>One of my interests is microtonalities/non-standard tunings, so support
for such explorations has been included in the library.</p>
<p>There are several ways that tuning data can be specified in the MIDI standard,
two of the most common being note pitch-bend and bulk tuning dumps. In this
library I have implemented the real-time change note tuning of the MIDI
tuning standard. I chose that as a first implementation because most of the
soft-synthesizers I use support this standard.</p>
<p>Note, however, that implementation of the MIDI tuning standard is somewhat spotty,
so you may want to verify that your hardware and/or software supports it before
you spend too much time.</p>
<p>Recently the pitch bend message had been implemented. The advantage of the pitch
bend is that almost all software and hardware understand it. The disadvantage is that
different software and hardware can interpret the values differently.</p>
<p>The main function to support a tuning change is <code class="docutils literal"><span class="pre">changeNoteTuning</span></code>.</p>
<dl class="method">
<dt id="midiutil.MidiFile.MIDIFile.changeNoteTuning">
<code class="descclassname">MIDIFile.</code><code class="descname">changeNoteTuning</code><span class="sig-paren">(</span><em>track</em>, <em>tunings</em>, <em>sysExChannel=127</em>, <em>realTime=True</em>, <em>tuningProgam=0</em><span class="sig-paren">)</span><a class="headerlink" href="#midiutil.MidiFile.MIDIFile.changeNoteTuning" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a real-time MIDI tuning standard update to a track.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>track</strong> &#8211; The track to which the tuning is applied.</li>
<li><strong>tunings</strong> &#8211; A list to tuples representing the tuning. See below for
an explanation.</li>
<li><strong>sysExChannel</strong> &#8211; The SysEx channel of the event. This is mapped to
&#8220;manufacturer ID&#8221; in the event which is written. Unless there is a
specific reason for changing it, it should be left at its default
value.</li>
<li><strong>realTime</strong> &#8211; Speicifes if the Universal SysEx event should be
flagged as real-time or non-real-time. As with the <code class="docutils literal"><span class="pre">sysExChannel</span></code>
argument, this should in general be left at it&#8217;s default value.</li>
<li><strong>tuningProgram</strong> &#8211; The tuning program number.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function specifically implements the &#8220;real time single note tuning
change&#8221; (although the name is misleading, as multiple notes can be
included in each event). It should be noted that not all hardware or
software implements the MIDI tuning standard, and that which does often
does not implement it in its entirety.</p>
<p>The <code class="docutils literal"><span class="pre">tunings</span></code> argument is a list of tuples, in (<em>note number</em>,
<em>frequency</em>) format.  As an example, if one wanted to change the
frequency on MIDI note 69 to 500 (it is normally 440 Hz), one could do
it thus:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">midiutil.MidiFile</span> <span class="k">import</span> <span class="n">MIDIFile</span>
<span class="n">MyMIDI</span> <span class="o">=</span> <span class="n">MIDIFile</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">tuning</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">69</span><span class="p">,</span> <span class="mi">500</span><span class="p">)]</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">changeNoteTuning</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tuning</span><span class="p">,</span> <span class="n">tuningProgam</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="tuning-program">
<h2>Tuning Program<a class="headerlink" href="#tuning-program" title="Permalink to this headline">¶</a></h2>
<p>With some instruments, such as <a class="reference external" href="http://timidity.sourceforge.net/">timidity</a>, this
is all you need to do: timidity will apply the tuning change to the notes.
Other instruments, such as <a class="reference external" href="http://www.fluidsynth.org/">fluidsynth</a>, require
that the tuning program be explicitly assigned. This is done with the
<code class="docutils literal"><span class="pre">changeTuningProgram</span></code> function:</p>
<dl class="method">
<dt id="midiutil.MidiFile.MIDIFile.changeTuningProgram">
<code class="descclassname">MIDIFile.</code><code class="descname">changeTuningProgram</code><span class="sig-paren">(</span><em>track</em>, <em>channel</em>, <em>time</em>, <em>program</em>, <em>time_order=False</em><span class="sig-paren">)</span><a class="headerlink" href="#midiutil.MidiFile.MIDIFile.changeTuningProgram" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the tuning program for a selected track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>track</strong> &#8211; The track to which the data should be written</li>
<li><strong>channel</strong> &#8211; The channel for the event</li>
<li><strong>time</strong> &#8211; The time of the event</li>
<li><strong>program</strong> &#8211; The tuning program number (0-127)</li>
<li><strong>time_order</strong> &#8211; Preserve the ordering of the component events by
ordering in time. See <code class="docutils literal"><span class="pre">makeRPNCall()</span></code> for a discussion of when
this may be necessary</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Note that this is a convenience function, as the same
functionality is available from directly sequencing controller
events.</p>
<p>The specified tuning should already have been written to the
stream with <code class="docutils literal"><span class="pre">changeNoteTuning</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="tuning-bank">
<h2>Tuning Bank<a class="headerlink" href="#tuning-bank" title="Permalink to this headline">¶</a></h2>
<p>The tuning bank can also be specified (fluidsynth assumes that any tuning
you transmit via <code class="docutils literal"><span class="pre">changeNoteTuning</span></code> is assigned to bank zero):</p>
<dl class="method">
<dt id="midiutil.MidiFile.MIDIFile.changeTuningBank">
<code class="descclassname">MIDIFile.</code><code class="descname">changeTuningBank</code><span class="sig-paren">(</span><em>track</em>, <em>channel</em>, <em>time</em>, <em>bank</em>, <em>time_order=False</em><span class="sig-paren">)</span><a class="headerlink" href="#midiutil.MidiFile.MIDIFile.changeTuningBank" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the tuning bank for a selected track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>track</strong> &#8211; The track to which the data should be written</li>
<li><strong>channel</strong> &#8211; The channel for the event</li>
<li><strong>time</strong> &#8211; The time of the event</li>
<li><strong>bank</strong> &#8211; The tuning bank (0-127)</li>
<li><strong>time_order</strong> &#8211; Preserve the ordering of the component events by
ordering in time. See <code class="docutils literal"><span class="pre">makeRPNCall()</span></code> for a discussion of when
this may be necessary</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Note that this is a convenience function, as the same
functionality is available from directly sequencing controller
events.</p>
<p>The specified tuning should already have been written to the
stream with <code class="docutils literal"><span class="pre">changeNoteTuning</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="an-example">
<h2>An Example<a class="headerlink" href="#an-example" title="Permalink to this headline">¶</a></h2>
<p>So, as a complete example, the following code fragment would get rid of that
pesky 440 Hz A and tell the instrument to use the tuning that you just
transmitted:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">track</span>   <span class="o">=</span> <span class="mi">0</span>
<span class="n">channel</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">tuning</span>  <span class="o">=</span> <span class="p">[(</span><span class="mi">69</span><span class="p">,</span> <span class="mi">500</span><span class="p">)]</span>
<span class="n">program</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">bank</span>    <span class="o">=</span> <span class="mi">0</span>
<span class="n">time</span>    <span class="o">=</span> <span class="mi">0</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">changeNoteTuning</span><span class="p">(</span><span class="n">track</span><span class="p">,</span> <span class="n">tuning</span><span class="p">,</span> <span class="n">tuningProgam</span><span class="o">=</span><span class="n">program</span><span class="p">)</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">changeTuningBank</span><span class="p">(</span><span class="n">track</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">bank</span><span class="p">)</span> <span class="c1"># may or may not be needed</span>
<span class="n">MyMIDI</span><span class="o">.</span><span class="n">changeTuningProgram</span><span class="p">(</span><span class="n">track</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">program</span><span class="p">)</span> <span class="c1"># ditto</span>
</pre></div>
</div>
</div>
<div class="section" id="using-pitch-bend">
<h2>Using Pitch Bend<a class="headerlink" href="#using-pitch-bend" title="Permalink to this headline">¶</a></h2>
<p>Pitch bend is a <em>channel level event</em>, meaning that if you pass a pitch wheel event, all
notes on that channel will be affected.</p>
<dl class="method">
<dt id="midiutil.MidiFile.MIDIFile.addPitchWheelEvent">
<code class="descclassname">MIDIFile.</code><code class="descname">addPitchWheelEvent</code><span class="sig-paren">(</span><em>track</em>, <em>channel</em>, <em>time</em>, <em>pitchWheelValue</em><span class="sig-paren">)</span><a class="headerlink" href="#midiutil.MidiFile.MIDIFile.addPitchWheelEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a channel pitch wheel event</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>track</strong> &#8211; The track to which the event is added.</li>
<li><strong>channel</strong> &#8211; the MIDI channel to assign to the event. [Integer, 0-15]</li>
<li><strong>time</strong> &#8211; The time (in beats) at which the event is placed [Float].</li>
<li><strong>pitchWheelValue</strong> &#8211; 0 for no pitch change. [Integer, -8192-8192]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="to-do">
<h2>To Do<a class="headerlink" href="#to-do" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Implement the tuning change with bank select event type.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extending.html" class="btn btn-neutral float-right" title="Extending the Library" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="common.html" class="btn btn-neutral" title="Common Events and Function" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Mark Conway Wirt.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>