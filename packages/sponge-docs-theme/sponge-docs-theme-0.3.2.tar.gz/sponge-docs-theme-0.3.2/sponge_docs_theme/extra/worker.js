importScripts("_static/jszip.js");var t,n=registration.scope,e=function(){var t=n.split("/"),e=t.length-1;return"spongedocs-"+t[e-2]+"-"+t[e-1]}(),i=""+n+e+".zip";function r(){return t||(t=caches.open(e)),t}function a(t){var n=new URL(t.url);return n.hash||n.search?(n.hash="",n.search="",new Request(n.toString())):t}function s(t){var n=Object.values(t.files);return console.log("Installing",n.length,"files from zip"),Promise.all(n.map(o))}function o(t){return t.dir?Promise.resolve():t.async("blob").then(function(e){return r().then(function(i){var r=new Response(e,{headers:{"Content-Type":f(t.name)}}),a=u(t.name,"/");console.log("-> Caching",t.name);var s=n+t.name;return"index.html"===a?Promise.all([i.put(n+c(t.name,"/"),r.clone()),i.put(s,r)]):i.put(s,r)})})}function c(t,n){return t.substring(0,t.lastIndexOf(n)+1)}function u(t,n){return t.substring(t.lastIndexOf(n)+1)}function f(t){return p[u(t,".")]||l}addEventListener("install",function(t){return t.waitUntil(caches.delete(e).then(function(){return fetch(i)}).then(function(t){return 200===t.status?t.arrayBuffer():Promise.reject(new Error(t.statusText))}).then(JSZip.loadAsync).then(s).then(self.skipWaiting()))}),addEventListener("activate",function(t){return t.waitUntil(self.clients.claim())}),addEventListener("fetch",function(t){return t.respondWith(r().then(function(n){return n.match(a(t.request))}).then(function(n){return n||fetch(t.request)}))});var l="application/octet-stream",p={html:"text/html",css:"text/css",js:"application/javascript",txt:"text/plain",jpg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",woff:"application/font-woff",woff2:"application/font-woff2"};