#:kivy 1.0

<Controller>:
    btn_start: btn_start
    btn_load_audio_file: btn_load_audio_file
    btn_stop: btn_stop
    label_result: label_result
    graph_mic: indicator_mic
    conn_indicator: connection_indicator

    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        BoxLayout:
            size_hint: (1, 0.9)
            orientation: 'vertical'
            Label:
                size_hint: (1, 0.2)
                text: '[color=0066ff]VAIS[/color] [color=000066]Speech Recognition Demo[/color]'
                font_size: '40sp'
                markup: True
            Label:
                size_hint: (1, 0.05)
                text: '[color=000000]2018 ' + u"\u00a9"  + '[/color][color=0066ff] VAIS [/color] [color=000000]ALL RIGHTS RESERVED[/color]'
                markup: True
            Widget:
                id: connection_indicator
                size_hint_y: None
                height: 6
                canvas:
                    Color:
                        rgb: 0., 0., 1.
                    Rectangle:
                        pos: 0, connection_indicator.center_y
                        size: connection_indicator.width, 2
            Label:
                size_hint: (1, 0.7)
                text: '[color=000066]' + root.asr_result + '[/color]'
                id: label_result
                font_size: '20sp'
                markup: True
                halign: "left"
            Label:
                size_hint: (1, 0.05)
                text: '[color=000000]Status: [/color]' + root.conn_status
                markup: True

        Widget:
            id: separator
            size_hint_y: None
            height: 6
            canvas:
                Color:
                    rgb: 1., 0., 0.
                Rectangle:
                    pos: 0, separator.center_y
                    size: separator.width, 2
        BoxLayout:
            size_hint: (1, 0.1)
            orientation: 'horizontal'
            Button:
                id: btn_select_mic
                text: 'Select mic'
                on_press: root.show_mic_dialog()
            Button:
                id: btn_start
                text: 'Record from mic'
                background_color: 0.08, 0.38, 1., 1.
            Button:
                id: btn_stop
                text: 'Stop'
                background_color: 1., 0., 0., 1.
            Button:
                id: btn_load_audio_file
                text: 'Load audio file'
                background_color: 0.08, 0.38, 1., 1.
        Widget:
            id: indicator_mic
            size_hint_y: None
            height: 6
            canvas:
                Color:
                    rgb: 0.95, 0.25, 0.77
                Rectangle:
                    pos: 0, indicator_mic.center_y
                    size: 0, 10

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<LoadDialog_MIC>:
    list_view_mic: list_view_mic
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        ListView:
            id: list_view_mic

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()



#
#        Button:
#            text: 'My controller info is: ' + root.info
#            on_press: root.do_action()
#
#        Label:
#            id: my_custom_label
#            text: 'My label before button press'
