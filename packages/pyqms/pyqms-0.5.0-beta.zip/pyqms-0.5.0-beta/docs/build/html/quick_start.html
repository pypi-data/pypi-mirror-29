

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick start &mdash; pyQms 0.5.0-beta documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pyQms 0.5.0-beta documentation" href="index.html"/>
        <link rel="next" title="Isotopologue Library" href="isotopologue_library.html"/>
        <link rel="prev" title="Introduction" href="intro.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pyQms
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#download-and-installation">Download and installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matching-a-peak-list">Matching a peak list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-and-interpret-the-results">Access and interpret the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quantify-peptides-in-a-whole-lc-ms-run">Quantify peptides in a whole LC-MS run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-the-adaptors-luke">Use the adaptors, Luke</a></li>
<li class="toctree-l2"><a class="reference internal" href="#further-examples-and-more-adavanced-usage">Further examples and more adavanced usage</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="isotopologue_library.html">Isotopologue Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">Result Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="chemical_composition.html">Chemical composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="unimod_mapper.html">Unimod mapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="adaptors.html">Adaptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="params.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_scripts.html">Example Scripts</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyQms</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quick start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quick_start.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start">
<h1>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<div class="section" id="download-and-installation">
<h2>Download and installation<a class="headerlink" href="#download-and-installation" title="Permalink to this headline">¶</a></h2>
<p>Please <a class="reference internal" href="intro.html#download-instructions"><span class="std std-ref">Download</span></a> and install pyQms following these
<a class="reference internal" href="intro.html#installation-instructions"><span class="std std-ref">Installation</span></a> instructions. Please consider using a
virtual environment (e.g. using the excellent <a class="reference external" href="https://virtualenvwrapper.readthedocs.io/en/latest/">virtualenvwrapper</a>) for using
and developing pyQms.</p>
</div>
<div class="section" id="matching-a-peak-list">
<h2>Matching a peak list<a class="headerlink" href="#matching-a-peak-list" title="Permalink to this headline">¶</a></h2>
<p>Let’s start with a most simple example: Mathing a single peptide on a predefined
peak list. Start a Python (3.4+) console and start quantifying in 4 steps:</p>
<p>First import pyQms:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyqms</span>
</pre></div>
</div>
<p>Second, initialize a isotopologue library (<a class="reference internal" href="isotopologue_library.html#pyqms.IsotopologueLibrary" title="pyqms.IsotopologueLibrary"><code class="xref py py-class docutils literal"><span class="pre">pyqms.IsotopologueLibrary</span></code></a>)
using ‘DDSPDLPK’ as the example peptide (from BSA example file) and the charge
state 2:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">lib</span> <span class="o">=</span> <span class="n">pyqms</span><span class="o">.</span><span class="n">IsotopologueLibrary</span><span class="p">(</span>
    <span class="n">molecules</span>  <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;DDSPDLPK&#39;</span> <span class="p">],</span>
    <span class="n">charges</span>    <span class="o">=</span> <span class="p">[</span> <span class="mi">2</span> <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Third, match the library on the provided peak list. You can find a peak list
<a class="reference internal" href="example_peak_list.html#example-peak-list"><span class="std std-ref">here</span></a>, which will produce a match with this peptide.
Copy and paste the peak list into the Python console.</p>
<p>Fourth, use the <a class="reference internal" href="isotopologue_library.html#pyqms.IsotopologueLibrary.match_all" title="pyqms.IsotopologueLibrary.match_all"><code class="xref py py-func docutils literal"><span class="pre">pyqms.IsotopologueLibrary.match_all()</span></code></a> function to quantify
the peptide using the peak list:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">match_all</span><span class="p">(</span>
    <span class="n">mz_i_list</span> <span class="o">=</span> <span class="n">peak_list</span><span class="p">,</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span>
    <span class="n">spec_id</span>   <span class="o">=</span> <span class="mi">1165</span><span class="p">,</span>
    <span class="n">spec_rt</span>   <span class="o">=</span> <span class="mf">29.10</span><span class="p">,</span>
    <span class="n">results</span>   <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Done! The peptide has been quantified in the given peak list. Please continue
with the next section to learn how to access and process the results.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The keyword arguments <cite>file_name</cite>, <cite>spec_id</cite> and <cite>spec_rt</cite> are hardcoded in
this example case. In the advanced examples these information (as well as
the peak list) are parsed from the mzML file directly.</p>
</div>
</div>
<div class="section" id="access-and-interpret-the-results">
<span id="access-results"></span><h2>Access and interpret the results<a class="headerlink" href="#access-and-interpret-the-results" title="Permalink to this headline">¶</a></h2>
<p>The results object represents the <a class="reference internal" href="results.html#pyqms.Results" title="pyqms.Results"><code class="xref py py-class docutils literal"><span class="pre">pyqms.Results</span></code></a> class and is
organized as a dictionary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
<p>Will give the following output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dict_keys</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">m_key</span><span class="p">(</span>
            <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span>
            <span class="n">formula</span><span class="o">=</span><span class="s1">&#39;C(37)H(59)N(9)O(16)&#39;</span><span class="p">,</span>
            <span class="n">charge</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">label_percentiles</span><span class="o">=</span><span class="p">((</span><span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="s1">&#39;0.000&#39;</span><span class="p">),)</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The keys of the <a class="reference internal" href="results.html#pyqms.Results" title="pyqms.Results"><code class="xref py py-class docutils literal"><span class="pre">pyqms.Results</span></code></a> class are <code class="xref py py-func docutils literal"><span class="pre">namedtuple()</span></code> with
the following field_names:</p>
<blockquote>
<div><ul class="simple">
<li>file_name</li>
<li>formula</li>
<li>charge</li>
<li>label_percentiles</li>
</ul>
</div></blockquote>
<p><cite>file_name</cite> related to the original file name of the LC-MS/MS runs, <cite>formula</cite> is
the molecular formula of the input molecule/peptide, <cite>charge</cite> refers to the
charge state of the matched isotope envelope and <cite>label_percentile</cite> indicates
the labeling of the molecule. Default behaviour is to use the natural abundance
of the element isotopes (default this fieldname is set to 0% artificical
enrichment of nitrogen i.e. (‘N’,‘0.000’) in a <code class="xref py py-obj docutils literal"><span class="pre">tuple</span></code> of multiple
possible labeling percentiles i.e. ((‘N’,‘0.000’),).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Every input molecule (e.g. peptide ‘DDSPDLPK’ ) will be converted to its
molecular formula (‘C(37)H(59)N(9)O(16)’) in <a class="reference external" href="https://en.wikipedia.org/wiki/Hill_system">Hill notation</a> by pyQms. To
map between the peptide and formula, please use the integrated lookups, i.e.
<cite>results.lookup[‘formula to molecule’]</cite> or results.lookup[‘molecule to formula’]`.
Please consider, that multiple molecules can have the same formula, therefor
e.g. <cite>results.lookup[‘formula to molecule’][‘C(37)H(59)N(9)O(16)’]</cite> is by
default a list.</p>
</div>
<p>For each of the keys one will get the following dict:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">match</span><span class="p">(</span>
            <span class="n">spec_id</span><span class="o">=</span><span class="mi">1165</span><span class="p">,</span>
            <span class="n">rt</span><span class="o">=</span><span class="mf">29.1</span><span class="p">,</span>
            <span class="n">score</span><span class="o">=</span><span class="mf">0.9606609710868856</span><span class="p">,</span>
            <span class="n">scaling_factor</span><span class="o">=</span><span class="mf">40.75802642055527</span><span class="p">,</span>
            <span class="n">peaks</span><span class="o">=</span><span class="p">(</span>
                <span class="p">(</span><span class="mf">443.7112735313511</span><span class="p">,</span> <span class="mf">2517650.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">443.7112648946701</span><span class="p">,</span> <span class="mi">62091</span><span class="p">),</span> <span class="p">(</span><span class="mf">444.21248374593875</span><span class="p">,</span> <span class="mf">1156173.75</span><span class="p">,</span> <span class="mf">0.4459422196277157</span><span class="p">,</span> <span class="mf">444.2127374486285</span><span class="p">,</span> <span class="mi">27689</span><span class="p">),</span>
                <span class="p">(</span><span class="mf">444.71384916266277</span><span class="p">,</span> <span class="mf">336326.96875</span><span class="p">,</span> <span class="mf">0.12958327918547244</span><span class="p">,</span> <span class="mf">444.7142840859656</span><span class="p">,</span> <span class="mi">8046</span><span class="p">),</span>
                <span class="p">(</span><span class="mf">445.21533524843596</span><span class="p">,</span> <span class="mf">58547.0703125</span><span class="p">,</span> <span class="mf">0.02805309805863953</span><span class="p">,</span> <span class="mf">445.21582563050043</span><span class="p">,</span> <span class="mi">1742</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">],</span>
    <span class="s1">&#39;max_score&#39;</span><span class="p">:</span> <span class="mf">0.9606609710868856</span><span class="p">,</span>
    <span class="s1">&#39;len_data&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;max_score_index&#39;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The keys on the top level of this dictionary are:</p>
<blockquote>
<div><ul class="simple">
<li>data</li>
<li>max_score</li>
<li>len_data</li>
<li>max_score_index</li>
</ul>
</div></blockquote>
<p>While <cite>len_data</cite> will indicate how many spectra were matched for the formula in the
repective key, <cite>max_score</cite> and <cite>max_score_index</cite> provides the maximum score,
which was obtained during matching and the index of this match in the <cite>data</cite>
list, respectively. The <cite>data</cite> list contains matches for all single spectra
as <code class="xref py py-func docutils literal"><span class="pre">namedtuple()</span></code>. The following fieldnames are contained in each <cite>match</cite>:</p>
<blockquote>
<div><ul class="simple">
<li>spec_id</li>
<li>rt</li>
<li>score</li>
<li>scaling_factor</li>
<li>peaks</li>
</ul>
</div></blockquote>
<p>Besides the given input information on the spectrum like the spectrum ID
(<cite>spec_id</cite>) and the retention time (<cite>spec_rt</cite>) the mScore of the match is
provided (<cite>score</cite>) as well as the determined amount/intensity of the molecule in
the spectrum (<cite>scaling_factor</cite>). Furthermore, detailed match information are
given in <cite>peaks</cite>. This tuple contains for each peak of the isotopologue the
following information in this order:</p>
<blockquote>
<div><ul class="simple">
<li>The measured (and matched) m/z value of the isotope peak in the spectrum</li>
<li>The measured intensity of the isotope peak in the spectrum</li>
<li>The relative intensity of the isotopologue peak to the monoisotopic peak</li>
<li>The calculated m/z value of the isotope peak of the input molecule</li>
<li>The calculated intensity of the isotope peak of the input molecule</li>
</ul>
</div></blockquote>
<p>These information can be processed to further analyze, besides the mScore, the
quality of the <cite>match</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please note, that measured m/z entry in <cite>peaks</cite> can be <cite>None</cite>, if this peak
was not found in the input data.</p>
</div>
<p>We have now seen, how peptides/molecules can be quantified and how the results
can be accessed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="results.html#pyqms.Results" title="pyqms.Results"><code class="xref py py-class docutils literal"><span class="pre">pyqms.Results</span></code></a> class offers several functions to access,
process and visualize the data. E.g. <a class="reference internal" href="results.html#pyqms.Results.extract_results" title="pyqms.Results.extract_results"><code class="xref py py-func docutils literal"><span class="pre">pyqms.Results.extract_results()</span></code></a>
provides and iterator yielding <cite>key</cite>, <cite>i</cite>, <cite>entry</cite>.
The <cite>key</cite> is the <code class="xref py py-func docutils literal"><span class="pre">namedtuple()</span></code> containing the molecules information,
<cite>i</cite> is the position of <cite>entry</cite> in results[key][‘data’] and <cite>entry</cite> is the
<cite>match</cite> <code class="xref py py-func docutils literal"><span class="pre">namedtuple()</span></code>.</p>
</div>
</div>
<div class="section" id="quantify-peptides-in-a-whole-lc-ms-run">
<h2>Quantify peptides in a whole LC-MS run<a class="headerlink" href="#quantify-peptides-in-a-whole-lc-ms-run" title="Permalink to this headline">¶</a></h2>
<p>This part will describe how to process a whole LC-MS/MS run and quantify
multiple peptides in one batch. This example assumes you have started your
Python console in the pyqms base folder.</p>
<p>For this example we will use pymzML, which is used to parse mzML files and
retrieve the spectra and meta data used for quantification. pymzML will be
installed as a requirement (See: <a class="reference internal" href="intro.html#installation-instructions"><span class="std std-ref">Installation</span></a>).</p>
<p>We start again by importing pyQms and initializing a isotopologue library
( <a class="reference internal" href="isotopologue_library.html#pyqms.IsotopologueLibrary" title="pyqms.IsotopologueLibrary"><code class="xref py py-class docutils literal"><span class="pre">pyqms.IsotopologueLibrary</span></code></a> ):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyqms</span>
<span class="n">lib</span> <span class="o">=</span> <span class="n">pyqms</span><span class="o">.</span><span class="n">IsotopologueLibrary</span><span class="p">(</span>
    <span class="n">molecules</span>        <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;HLVDEPQNLIK&#39;</span><span class="p">,</span>
        <span class="s1">&#39;YICDNQDTISSK&#39;</span><span class="p">,</span>
        <span class="s1">&#39;DLGEEHFK&#39;</span>
    <span class="p">],</span>
    <span class="n">charges</span>          <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We need to import pymzML and initialize the run. Note, that the path to the BSA1
mzML file (‘data/BSA1.mzML’) may have to be adjusted. This file can be
downloaded using this example script <cite>get_example_BSA_file</cite>
(See: <a class="reference internal" href="example_scripts.html#get-bsa-file"><span class="std std-ref">Get the BSA example mzML file</span></a>) and can then be found under the ‘data’ folder in the
pyqms base folder.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pymzml</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">pymzml</span><span class="o">.</span><span class="n">run</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span> <span class="s1">&#39;data/BSA1.mzML&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>We now iterate over the spectra in the mzML file and quantify all peptides in
all MS1 spectra. Before we start the loop we set the results variable to <cite>None</cite>.
Please note, that the <cite>results</cite> variable is iteratively passed to <a class="reference internal" href="isotopologue_library.html#pyqms.IsotopologueLibrary.match_all" title="pyqms.IsotopologueLibrary.match_all"><code class="xref py py-func docutils literal"><span class="pre">pyqms.IsotopologueLibrary.match_all()</span></code></a>. This will lead to one <cite>results</cite>
object, which combines quantifications for all peptides in every spectra. See
also description above (see: <a class="reference internal" href="#access-results">access results</a>) or refer directly to the <a class="reference internal" href="results.html#pyqms.Results" title="pyqms.Results"><code class="xref py py-class docutils literal"><span class="pre">pyqms.Results</span></code></a>: class
:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">for</span> <span class="n">spectrum</span> <span class="ow">in</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">scan_time</span> <span class="o">=</span> <span class="n">spectrum</span><span class="p">[</span><span class="s1">&#39;scan time&#39;</span><span class="p">]</span>
    <span class="n">spec_id</span>   <span class="o">=</span> <span class="n">spectrum</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">spectrum</span><span class="p">[</span><span class="s1">&#39;ms level&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">match_all</span><span class="p">(</span>
            <span class="n">mz_i_list</span> <span class="o">=</span> <span class="n">spectrum</span><span class="o">.</span><span class="n">centroidedPeaks</span><span class="p">,</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;BSA1&#39;</span><span class="p">,</span>
            <span class="n">spec_id</span>   <span class="o">=</span> <span class="n">spec_id</span><span class="p">,</span>
            <span class="n">spec_rt</span>   <span class="o">=</span> <span class="n">scan_time</span><span class="p">,</span>
            <span class="n">results</span>   <span class="o">=</span> <span class="n">results</span>
        <span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">pymzML centroids spectra if these are not already centroided, if
<cite>spectrum.centroidedPeaks</cite> is accessed.</p>
</div>
<p>The <cite>results</cite> can now be accessed as described above (see: <a class="reference internal" href="#access-results">access results</a>).
Furthermore the <a class="reference internal" href="results.html#pyqms.Results" title="pyqms.Results"><code class="xref py py-class docutils literal"><span class="pre">pyqms.Results</span></code></a> class can be pickled:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span>
    <span class="n">results</span><span class="p">,</span>
    <span class="nb">open</span><span class="p">(</span>
        <span class="s1">&#39;data/BSA1_pyQms_results.pkl&#39;</span><span class="p">,</span>
        <span class="s1">&#39;wb&#39;</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For further examples and how to use the adaptor functions, please refer to the
next section.</p>
</div>
<div class="section" id="use-the-adaptors-luke">
<h2>Use the adaptors, Luke<a class="headerlink" href="#use-the-adaptors-luke" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="adaptors.html#adaptors"><span class="std std-ref">Adaptors</span></a> functions are useful for parsing a set of identified peptides
(e.g. from <a class="reference external" href="https://github.com/ursgal/ursgal">Ursgal</a> result files; <a class="reference external" href="http://ursgal.readthedocs.io/en/latest/">Ursgal documentation</a>) including retention time
information for determining the maximum intensity of every (identified) peptide
in the LC-MS/MS measurement. Furthermore, adaptors can be added to e.g. read
results of other analysis pipelines and tools.</p>
<p>The current adaptor to read <a class="reference external" href="https://github.com/ursgal/ursgal">Ursgal</a> results can be used as follows for the
shipped identification result file of the database search engine OMSSA. Please
note, that if the adaptors are used one need to define fixed modifications like
Carbamidomathylation as presented. This modification and the molecules will then
be correctly formatted as input for pyqms:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyqms</span>
<span class="kn">import</span> <span class="nn">pyqms.adaptors</span>
<span class="n">input_fixed_labels</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;C&#39;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;element_composition&#39;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;O&#39;</span>   <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;H&#39;</span>   <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s1">&#39;14N&#39;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;C&#39;</span>   <span class="p">:</span> <span class="mi">2</span>
            <span class="p">},</span>
            <span class="s1">&#39;evidence_mod_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Carbamidomethyl&#39;</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span>
<span class="n">formatted_fixed_labels</span><span class="p">,</span> <span class="n">evidence_lookup</span><span class="p">,</span> <span class="n">molecules</span> <span class="o">=</span> <span class="n">pyqms</span><span class="o">.</span><span class="n">adaptors</span><span class="o">.</span><span class="n">parse_evidence</span><span class="p">(</span>
    <span class="n">fixed_labels</span>   <span class="o">=</span> <span class="n">input_fixed_labels</span><span class="p">,</span>
    <span class="n">evidence_files</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;data/BSA1_omssa_2_1_9_unified.csv&#39;</span> <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The returned objects can be used a direct input for the pyQms <a class="reference internal" href="isotopologue_library.html#pyqms.IsotopologueLibrary" title="pyqms.IsotopologueLibrary"><code class="xref py py-class docutils literal"><span class="pre">pyqms.IsotopologueLibrary</span></code></a>. The advantage of parsing evidence files is, that
MS2 identification information is added to the results and can e.g. be used for
defining RT windows for a correct quantification of every peptide:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">lib</span> <span class="o">=</span> <span class="n">pyqms</span><span class="o">.</span><span class="n">IsotopologueLibrary</span><span class="p">(</span>
    <span class="n">molecules</span>    <span class="o">=</span> <span class="n">molecules</span><span class="p">,</span>
    <span class="n">charges</span>      <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="n">fixed_labels</span> <span class="o">=</span> <span class="n">formatted_fixed_labels</span><span class="p">,</span>
    <span class="n">evidences</span>    <span class="o">=</span> <span class="n">evidence_lookup</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="further-examples-and-more-adavanced-usage">
<h2>Further examples and more adavanced usage<a class="headerlink" href="#further-examples-and-more-adavanced-usage" title="Permalink to this headline">¶</a></h2>
<p>Please refer to the <a class="reference internal" href="example_scripts.html#example-scripts"><span class="std std-ref">Example Scripts</span></a> section for more usage examples and
ready-to-go Python scripts for quantification, data analysis and visualization.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="isotopologue_library.html" class="btn btn-neutral float-right" title="Isotopologue Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Johannes Leufken, Anna Niehues, L. Peter Sarin, Michael Hippler, Sebastian A. Leidel and Christian Fufezan.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.0-beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>