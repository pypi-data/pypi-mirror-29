

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adaptors &mdash; pyQms 0.5.0-beta documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pyQms 0.5.0-beta documentation" href="index.html"/>
        <link rel="next" title="Parameters" href="params.html"/>
        <link rel="prev" title="Unimod mapper" href="unimod_mapper.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pyQms
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick start</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="isotopologue_library.html">Isotopologue Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">Result Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="chemical_composition.html">Chemical composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="unimod_mapper.html">Unimod mapper</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Adaptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="params.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_scripts.html">Example Scripts</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyQms</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Adaptors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/adaptors.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="adaptors">
<span id="id1"></span><h1>Adaptors<a class="headerlink" href="#adaptors" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="adaptors._parse_evidence_and_format_fixed_labels">
<code class="descclassname">adaptors.</code><code class="descname">_parse_evidence_and_format_fixed_labels</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#adaptors._parse_evidence_and_format_fixed_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats input params to pyQms compatible params. Additionally evidence
files are read in and the fixed labels are reformatted (stripped
from the modifications if peptides are read in) as required by pyQms.
This is especially required if data/samples contains Carbamidomethylation
as modification and the sample was e.g. 15N labeled. This ensures that the
nitrogens pools of the peptides (which are 15N labeled) do not mix up with
the nitrogen pool of the Carbamidomethylation (14N since intriduced during
sample preparation).
All fixed modifications needs to be specified so that is can be ignored from
the input evidence file but correctly formatted for the parameters.</p>
<p>Example format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;molecules&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;PEPTIDEA&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">},</span>
    <span class="s1">&#39;evidences&#39;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;C18H36O18N9&#39;</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;PEPTIDEA&#39;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;evidences&#39;</span> <span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;RT&#39;</span><span class="p">:</span><span class="mf">13.37</span><span class="p">,</span>
                        <span class="s1">&#39;score&#39;</span><span class="p">:</span><span class="mf">0.01</span><span class="p">,</span>
                        <span class="s1">&#39;score_field&#39;</span><span class="p">:</span><span class="s1">&#39;PEP&#39;</span>
                    <span class="p">},</span>
                    <span class="o">...</span>
                <span class="p">],</span>
                <span class="s1">&#39;trivial_names&#39;</span><span class="p">:[</span>
                    <span class="s1">&#39;PROTEIN_NAME&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;PATHWAY_NAME&#39;</span><span class="p">,</span>
                    <span class="o">...</span>
                <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s1">&#39;charges&#39;</span>   <span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">...</span><span class="p">},</span>
    <span class="s1">&#39;params&#39;</span>    <span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;MACHINE_OFFSET_IN_PPM&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">},</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Example of data passed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;measurement_and_reporting&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">}},</span>
    <span class="s1">&#39;fixed_labels&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;modification&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;unimodID&#39;</span><span class="p">:</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span>
                <span class="s1">&#39;specificity_sites&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
                <span class="s1">&#39;mono_mass&#39;</span><span class="p">:</span> <span class="mf">57.021464</span><span class="p">,</span>
                <span class="s1">&#39;element&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Carbamidomethyl&#39;</span>
            <span class="p">},</span>
            <span class="s1">&#39;AA&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;molecules&#39;</span><span class="p">:</span> <span class="s1">&#39;AA&#39;</span><span class="p">,</span>
    <span class="s1">&#39;metabolic_labels&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;modification&#39;</span><span class="p">:</span> <span class="s1">&#39;0, 0.99&#39;</span><span class="p">,</span> <span class="s1">&#39;atom&#39;</span><span class="p">:</span> <span class="s1">&#39;15N&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;charges&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="s1">&#39;/BSA1.mzML&#39;</span>
<span class="p">}</span>

<span class="n">Returns</span><span class="p">:</span>
<span class="nb">dict</span><span class="p">:</span> <span class="n">molecules</span><span class="p">,</span> <span class="n">evidences</span><span class="p">,</span> <span class="n">correctly</span> <span class="n">fomatted</span> <span class="n">fixed</span> <span class="n">labels</span><span class="p">,</span> <span class="n">charges</span> <span class="ow">and</span>
    <span class="n">parameters</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="adaptors.parse_evidence">
<code class="descclassname">adaptors.</code><code class="descname">parse_evidence</code><span class="sig-paren">(</span><em>fixed_labels=None</em>, <em>evidence_files=None</em>, <em>molecules=None</em>, <em>evidence_score_field=None</em>, <em>return_raw_csv_data=False</em><span class="sig-paren">)</span><a class="headerlink" href="#adaptors.parse_evidence" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in the evidence file and returns the final formatted fixed labels,
the evidence lookup, which is passed to the isotopologue library and the
final formatted molecules (fixed labels are stripped form the molecules).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Output .csv files from <a class="reference external" href="https://github.com/ursgal/ursgal">Ursgal</a> (<a class="reference external" href="http://ursgal.readthedocs.io/en/latest/">Documentation</a>) can directly be
used. Also <a class="reference external" href="http://www.psidev.info/mztab">mzTab</a> files can be used as input.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fixed_labels</strong> (<em>dict</em>) – dict with fixed labels, example format is shown
below.</li>
<li><strong>evidence_files</strong> (<em>list</em>) – list of evidence file paths.</li>
<li><strong>molecules</strong> (<em>list</em>) – list of additional molecules</li>
<li><strong>evidence_score_field</strong> (<em>str</em>) – specify fieldname which holds the search
engine score (Default is “PEP”)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example fixed label format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;C&#39;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;element&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s1">&#39;14N&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="mi">2</span>
            <span class="p">},</span>
            <span class="s1">&#39;evidence_mod_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Carbamidomethyl&#39;</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">final formatted fixed label dict, evidence lookup, list of molecules</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="adaptors.calc_amount_function">
<code class="descclassname">adaptors.</code><code class="descname">calc_amount_function</code><span class="sig-paren">(</span><em>obj_for_calc_amount</em><span class="sig-paren">)</span><a class="headerlink" href="#adaptors.calc_amount_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Fucntion to calculate actual molecule amounts. Three types of amounts are
calculated for a matched isotope chromatogram (MIC), maximum intensity,
summed up intensity and area under curve.
Additionally the score and the retention time at the maximum
intensity are determined.</p>
<p>A test function exists to check correct amount determination.</p>
<p>Returned keys in amound dict:</p>
<blockquote>
<div><ul class="simple">
<li>‘max I in window’</li>
<li>‘max I in window (rt)’</li>
<li>‘max I in window (score)’</li>
<li>‘auc in window’</li>
<li>‘sum I in window’</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">amount dict with keys shown above.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="params.html" class="btn btn-neutral float-right" title="Parameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="unimod_mapper.html" class="btn btn-neutral" title="Unimod mapper" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Johannes Leufken, Anna Niehues, L. Peter Sarin, Michael Hippler, Sebastian A. Leidel and Christian Fufezan.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.0-beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>