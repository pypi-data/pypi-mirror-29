webpackJsonp([4],{128:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function JupyterService(){}return JupyterService.prototype.setServiceManager=function(e){this.serviceManager=e},JupyterService.prototype.setContentsManager=function(e){this.contentsManager=e},JupyterService=o([i.Injectable()],JupyterService)}();t.JupyterService=r},129:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(70),a=function(){function FormService(){this.formStore={},this.initialising="initialising",this.formStatus=new r.BehaviorSubject(this.initialising)}return FormService.prototype.formInitialisation=function(e){var t=this;this.formStatus.next("initialising"),this.currentFormSessionId=e,e in this.formStore||(this.formStore[e]={template:new r.BehaviorSubject(null),component:null},this.formStore[e].template.subscribe(function(n){null!==n&&t.formBuilderComponent.buildForm(e,n).then(function(n){t.formStore[e].component=n,n.formReady.promise.then(function(){t.formStatus.next("ready")})})}))},FormService.prototype.restartFormKernel=function(){var e=this;this.formStatus.next("restarting");var t=this.formStore[this.currentFormSessionId].component.restartFormKernel();return t.then(function(){e.formStatus.next("ready")}),t},FormService.prototype.setTemplate=function(e,t){this.formStore[t].template.next(e)},FormService.prototype.getTemplate=function(e){return this.formStore[e].template.getValue()},FormService=o([i.Injectable()],FormService)}();t.FormService=a},1357:function(e,t,n){"use strict";function main(){var e=new a.ServiceManager,t=new a.ContentsManager,n=new m({serviceManager:e,contentsManager:t});window.onresize=function(){n.update()},r.Widget.attach(n,document.body)}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),n(573),n(379),n(1358),n(301);var i=n(2),r=n(25),a=n(36),s=n(80),l=n(1361),c=n(586),u=n(1368);console.log("angular in production mode"),i.enableProdMode();var p=function(e){function AngularWrapperWidget(t){var n=e.call(this,c.AppComponent,u.AppModule)||this,o=Object.assign({node:n.node},t);return n.run(function(){n.componentInstance.initiliseScriptedForms(o)}),n}return o(AngularWrapperWidget,e),AngularWrapperWidget}(l.AngularWidget);t.AngularWrapperWidget=p;var m=function(e){function ScriptedFormsWidget(t){var n=e.call(this)||this;n.addClass("container");var o=n.layout=new r.BoxLayout,i=new s.Toolbar;i.addClass("jp-NotebookPanel-toolbar"),i.addClass("custom-toolbar"),o.addWidget(i),r.BoxLayout.setStretch(i,0);var a=Object.assign({toolbar:i},t);return n.form=new p(a),n.form.addClass("form"),o.addWidget(n.form),r.BoxLayout.setStretch(n.form,1),n}return o(ScriptedFormsWidget,e),ScriptedFormsWidget}(r.Widget);t.ScriptedFormsWidget=m,window.onload=main},1358:function(e,t,n){var o=n(1359);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(48)(o,i);o.locals&&(e.exports=o.locals)},1359:function(e,t,n){t=e.exports=n(13)(void 0),t.push([e.i,'/* Scripted Forms -- Making GUIs easy for everyone on your team.\nCopyright (C) 2017 Simon Biggs\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as published\nby the Free Software Foundation, either version 3 of the License, or\n(at your option) any later version (the "AGPL-3.0+").\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\nGNU Affero General Public License and the additional terms for more\ndetails.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with this program. If not, see <http://www.gnu.org/licenses/>.\n\nADDITIONAL TERMS are also included as allowed by Section 7 of the GNU\nAffrero General Public License. These aditional terms are Sections 1, 5,\n6, 7, 8, and 9 from the Apache License, Version 2.0 (the "Apache-2.0")\nwhere all references to the definition "License" are instead defined to\nmean the AGPL-3.0+.\n\nYou should have received a copy of the Apache-2.0 along with this\nprogram. If not, see <http://www.apache.org/licenses/LICENSE-2.0>. */\n\n.pypi-icon {\n  background: url('+n(1360)+');\n  background-size: cover;\n  width: 24px;\n  height: 24px;\n  margin: 0 0;\n}\n\n.form {\n  font-family: Roboto, "Helvetica Neue", sans-serif;\n}\n\n\n@media print {\n  body, html {\n    size: 21cm 29.7cm !important;\n    width: 21cm !important;\n    position: static !important;\n    margin: 0 0 !important;\n  }\n\n  div, span {\n    margin: 0 0 !important;\n    max-width: 21cm !important;\n  }\n\n  .form-contents {\n    width: 20cm !important;\n    padding: 0 5mm !important;\n  }\n  \n  .margin {\n    margin: 0 0 !important;\n  }\n\n  .hide-on-print {\n    display: none !important;\n  }\n\n  .custom-toolbar {\n    display: none !important;\n  }\n\n  .floating-spinner {\n    display: none !important;\n  }\n\n  .p-Widget {\n    position: static !important;\n  }\n}\n\n\n@media only screen {\n  body {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  }\n\n  .form-contents {\n    max-width: 940px;\n    margin: 0 auto;\n  }\n  \n  .container {\n    flex: 1 1 auto;\n    margin: 0;\n    padding: 0;\n  }\n\n  .form {\n    overflow: auto;\n  }\n\n  .output-container div .jp-RenderedText {\n    padding-left: 0;\n  }\n\n  .output-container div div .jp-OutputPrompt {\n    padding: 0;\n    flex: 0;\n    border: 0;\n  }\n\n  .floating-spinner {\n    position: fixed !important;\n    top: 50px;\n    right: 40px;\n  }\n\n  .footer-space {\n    height: 300px;\n  }\n\n  .custom-toolbar {\n    min-height: 40px !important;\n  }\n}',""])},1360:function(e,t){e.exports="\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='65.812' height='58' viewBox='0 0 65.812035 58.000001'%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath d='M18.93 18.826l9.323 3.394v10.957l-9.323-3.394z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M9.47 22.27v10.957l9.46-3.444V18.826z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M9.47 33.227l9.322 3.393 9.46-3.443-9.322-3.394z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M9.47 22.27l9.322 3.393 9.46-3.443-9.322-3.394z' fill='%23f7f7f4'/%3E%3Cpath d='M18.792 25.663V36.62l9.46-3.443V22.22z' fill='%23fff'/%3E%3Cpath d='M9.47 22.27l9.322 3.393V36.62L9.47 33.227z' fill='%23efeeea'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M28.293 11.166l9.323 3.393v10.957l-9.323-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M18.833 14.609v10.957l9.46-3.443V11.166z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M18.833 25.566l9.322 3.393 9.461-3.443-9.323-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M18.833 14.609l9.322 3.393 9.461-3.443-9.323-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M28.155 18.002V28.96l9.461-3.443V14.559z' fill='%23fff'/%3E%3Cpath d='M18.833 14.609l9.322 3.393V28.96l-9.322-3.393z' fill='%23efeeea'/%3E%3Cpath d='M9.567 33.297l9.322 3.393v10.957l-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M.106 36.74v10.957l9.46-3.443V33.297z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M.106 47.697L9.43 51.09l9.46-3.443-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M.106 36.74l9.323 3.393 9.46-3.443-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M9.429 40.133V51.09l9.46-3.443V36.69z' fill='%23fff'/%3E%3Cpath d='M.106 36.74l9.323 3.393V51.09L.106 47.697z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M18.93 36.702l9.323 3.393v10.957l-9.323-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M9.47 40.145v10.957l9.46-3.443V36.702z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M9.47 51.102l9.322 3.393 9.46-3.443-9.322-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M9.47 40.145l9.322 3.393 9.46-3.443-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M18.792 43.538v10.957l9.46-3.443V40.095z' fill='%23fff'/%3E%3Cpath d='M9.47 40.145l9.322 3.393v10.957L9.47 51.102z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath d='M18.93 25.636l9.323 3.393v10.957l-9.323-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M9.47 29.08v10.956l9.46-3.443V25.636z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M9.47 40.036l9.322 3.394 9.46-3.444-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M9.47 29.08l9.322 3.393 9.46-3.444-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M18.792 32.473V43.43l9.46-3.444V29.03z' fill='%23fff'/%3E%3Cpath d='M9.47 29.08l9.322 3.393V43.43L9.47 40.036z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M56.383 29.892l9.323 3.393v10.957l-9.323-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M46.923 33.335v10.957l9.46-3.443V29.892z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M46.923 44.292l9.322 3.394 9.46-3.444-9.322-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M46.923 33.335l9.322 3.394 9.46-3.444-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M56.245 36.729v10.957l9.46-3.444V33.285z' fill='%23fff'/%3E%3Cpath d='M46.923 33.335l9.322 3.394v10.957l-9.322-3.394z' fill='%23efeeea'/%3E%3C/g%3E%3Cg transform='translate(-1683.66 -513.275) scale(.65177)'%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.328' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M2655.349 838.594l14.303 5.206v16.811l-14.303-5.206z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M2640.834 843.877v16.811l14.515-5.283v-16.81z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M2640.834 860.688l14.303 5.206 14.515-5.283-14.303-5.206z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M2640.834 843.877l14.303 5.206 14.515-5.283-14.303-5.206z' fill='%23f7f7f4'/%3E%3Cpath d='M2655.137 849.083v16.811l14.515-5.283v-16.81z' fill='%23ffd242'/%3E%3Cpath d='M2640.834 843.877l14.303 5.206v16.811l-14.303-5.206z' fill='%23efeeea'/%3E%3C/g%3E%3Ccircle transform='skewY(-20) scale(.9397 1)' cy='1823.899' cx='2835.218' r='2.967' fill='%23fff'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath d='M37.657 36.702l9.322 3.393v10.957l-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M28.196 40.145v10.957l9.46-3.443V36.702z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M28.196 51.102l9.323 3.393 9.46-3.443-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M28.196 40.145l9.323 3.393 9.46-3.443-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M37.519 43.538v10.957l9.46-3.443V40.095z' fill='%23ffd242'/%3E%3Cpath d='M28.196 40.145l9.323 3.393v10.957l-9.323-3.393z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M28.293 40.107l9.323 3.393v10.957l-9.323-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M18.833 43.55v10.957l9.46-3.443V40.107z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M18.833 54.507l9.322 3.393 9.46-3.443-9.322-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M18.833 43.55l9.322 3.393 9.46-3.443-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M28.155 46.943V57.9l9.46-3.443V43.5z' fill='%23fff'/%3E%3Cpath d='M18.833 43.55l9.322 3.393V57.9l-9.322-3.393z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath d='M56.383 18.826l9.323 3.394v10.957l-9.323-3.394z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M46.923 22.27v10.957l9.46-3.444V18.826z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M46.923 33.227l9.322 3.393 9.46-3.443-9.322-3.394z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M46.923 22.27l9.322 3.393 9.46-3.443-9.322-3.394z' fill='%23f7f7f4'/%3E%3Cpath d='M56.245 25.663V36.62l9.46-3.443V22.22z' fill='%23ffd242'/%3E%3Cpath d='M46.923 22.27l9.322 3.393V36.62l-9.322-3.393z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M56.383 7.76l9.323 3.394V22.11l-9.323-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M46.923 11.204v10.957l9.46-3.443V7.76z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M46.923 22.161l9.322 3.393 9.46-3.443-9.322-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M46.923 11.204l9.322 3.393 9.46-3.443-9.322-3.393z' fill='%23ffc91d'/%3E%3Cpath d='M56.245 14.597v10.957l9.46-3.443V11.154z' fill='%23ffd242'/%3E%3Cpath d='M46.923 11.204l9.322 3.393v10.957l-9.322-3.393z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M47.02 22.231l9.322 3.393v10.957l-9.322-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M37.56 25.675v10.957l9.46-3.444V22.231z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M37.56 36.632l9.322 3.393 9.46-3.444-9.322-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M37.56 25.675l9.322 3.393 9.46-3.444-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M46.882 29.068v10.957l9.46-3.444V25.624z' fill='%23ffd242'/%3E%3Cpath d='M37.56 25.675l9.322 3.393v10.957l-9.323-3.393z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath d='M47.02 11.166l9.322 3.393v10.957l-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M37.56 14.609v10.957l9.46-3.443V11.166z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M37.56 25.566l9.322 3.393 9.46-3.443-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M37.56 14.609l9.322 3.393 9.46-3.443-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M46.882 18.002V28.96l9.46-3.443V14.559z' fill='%233775a9'/%3E%3Cpath d='M37.56 14.609l9.322 3.393V28.96l-9.323-3.393z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M47.02.1l9.322 3.393V14.45l-9.322-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M37.56 3.543V14.5l9.46-3.443V.1z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M37.56 14.5l9.322 3.393 9.46-3.443-9.322-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M37.56 3.543l9.322 3.393 9.46-3.443L47.02.1z' fill='%232f6491'/%3E%3Cpath d='M46.882 6.936v10.957l9.46-3.443V3.493z' fill='%233775a9'/%3E%3Cpath d='M37.56 3.543l9.322 3.393v10.957L37.559 14.5z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath d='M37.657 25.636l9.322 3.393v10.957l-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M28.196 29.08v10.956l9.46-3.443V25.636z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M28.196 40.036l9.323 3.394 9.46-3.444-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M28.196 29.08l9.323 3.393 9.46-3.444-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M37.519 32.473V43.43l9.46-3.444V29.03z' fill='%23ffd242'/%3E%3Cpath d='M28.196 29.08l9.323 3.393V43.43l-9.323-3.394z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M37.657 14.57l9.322 3.394V28.92l-9.322-3.394z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M28.196 18.014V28.97l9.46-3.444V14.57z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M28.196 28.97l9.323 3.394 9.46-3.443-9.322-3.394z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M28.196 18.014l9.323 3.393 9.46-3.443-9.322-3.394z' fill='%23f7f7f4'/%3E%3Cpath d='M37.519 21.407v10.957l9.46-3.443V17.964z' fill='%233775a9'/%3E%3Cpath d='M28.196 18.014l9.323 3.393v10.957l-9.323-3.393z' fill='%23efeeea'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M28.293 29.04l9.323 3.394v10.957l-9.323-3.393z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M18.833 32.484v10.957l9.46-3.443V29.04z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M18.833 43.441l9.322 3.393 9.46-3.443-9.322-3.393z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M18.833 32.484l9.322 3.393 9.46-3.443-9.322-3.393z' fill='%23f7f7f4'/%3E%3Cpath d='M28.155 35.877v10.957l9.46-3.443V32.434z' fill='%233775a9'/%3E%3Cpath d='M18.833 32.484l9.322 3.393v10.957l-9.322-3.393z' fill='%232f6491'/%3E%3C/g%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.214' stroke-linejoin='bevel'%3E%3Cpath d='M28.293 17.975l9.323 3.393v10.957l-9.323-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath d='M18.833 21.419v10.957l9.46-3.444V17.975z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath d='M18.833 32.376l9.322 3.393 9.46-3.444-9.322-3.393z' style='isolation:auto;mix-blend-mode:normal' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M18.833 21.419l9.322 3.393 9.46-3.444-9.322-3.393z' fill='%232f6491'/%3E%3Cpath d='M28.155 24.812v10.957l9.46-3.444V21.368z' fill='%233775a9'/%3E%3Cpath d='M18.833 21.419l9.322 3.393v10.957l-9.322-3.393z' fill='%232f6491'/%3E%3C/g%3E%3Cg transform='translate(-1683.66 -513.275) scale(.65177)'%3E%3Cg fill='%23a29d86' stroke='%23ccc' stroke-width='.328' stroke-linejoin='bevel'%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M2640.983 792.885l14.304 5.206v16.811l-14.304-5.206z' color='%23000' overflow='visible' fill='%23e9e9ff'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M2626.468 798.168v16.811l14.515-5.283v-16.811z' color='%23000' overflow='visible' fill='%23353564'/%3E%3Cpath style='isolation:auto;mix-blend-mode:normal' d='M2626.468 814.979l14.304 5.206 14.515-5.283-14.304-5.206z' color='%23000' overflow='visible' fill='%23afafde'/%3E%3Cpath d='M2626.468 798.168l14.304 5.206 14.515-5.283-14.304-5.206z' fill='%232f6491'/%3E%3Cpath d='M2640.772 803.374v16.811l14.515-5.283v-16.811z' fill='%233775a9'/%3E%3Cpath d='M2626.468 798.168l14.304 5.206v16.811l-14.304-5.206z' fill='%232f6491'/%3E%3C/g%3E%3Ccircle transform='skewY(-20) scale(.9397 1)' cy='1772.922' cx='2816.017' r='2.967' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\""},1361:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0}),n(256);var i=n(25),r=n(9),a=n(2),s=n(300),l=function(){function AngularLoader(e){this.injector=e.injector,this.applicationRef=this.injector.get(a.ApplicationRef),this.ngZone=this.injector.get(a.NgZone),this.componentFactoryResolver=this.injector.get(a.ComponentFactoryResolver)}return AngularLoader.prototype.attachComponent=function(e,t){var n,o=this;return this.ngZone.run(function(){var i=o.componentFactoryResolver.resolveComponentFactory(e);n=i.create(o.injector,[],t),o.applicationRef.attachView(n.hostView)}),n},AngularLoader}();t.AngularLoader=l;var c=function(e){function AngularWidget(t,n,o){var i=e.call(this,o)||this;return i.componentReady=new r.PromiseDelegate,s.platformBrowserDynamic().bootstrapModule(n).then(function(e){i.angularLoader=new l(e),i.ngZone=i.angularLoader.ngZone,i.componentRef=i.angularLoader.attachComponent(t,i.node),i.componentInstance=i.componentRef.instance,i.componentReady.resolve(void 0)}),i}return o(AngularWidget,e),AngularWidget.prototype.run=function(e){var t=this;this.componentReady.promise.then(function(){t.ngZone.run(e)})},AngularWidget.prototype.dispose=function(){var t=this;this.ngZone.run(function(){t.componentRef.destroy()}),e.prototype.dispose.call(this)},AngularWidget}(i.Widget);t.AngularWidget=c},1362:function(e,t,n){"use strict";function createFormComponentFactory(e,t,n){var M=function(){function FormComponent(e,t,n,o,i){this.myKernelSevice=e,this.myVariableService=t,this.myFileService=n,this.elementRef=o,this.myChangeDetectorRef=i,this.formViewInitialised=new l.PromiseDelegate,this.formReady=new l.PromiseDelegate,this.variableComponents=[],this.sectionComponents=[]}return FormComponent.prototype.ngAfterViewInit=function(){var e=this,t=Array.from(this.elementRef.nativeElement.getElementsByTagName("a"));this.myFileService.morphLinksToUpdateFile(t),this.formViewInitialised.resolve(null),this.variableComponents=this.variableComponents.concat(this.toggleComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.tickComponents.toArray()),this.buttonComponents.toArray().forEach(function(t){t.conditional&&(e.variableComponents=e.variableComponents.concat([t.conditionalComponent]))}),this.variableComponents=this.variableComponents.concat(this.numberComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.sliderComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.tableComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.stringComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.dropdownComponents.toArray()),this.dropdownComponents.toArray().forEach(function(t){t.items&&(e.variableComponents=e.variableComponents.concat([t.stringListParameterComponent]))}),this.sectionComponents=this.sectionComponents.concat(this.startComponents.toArray()),this.sectionComponents=this.sectionComponents.concat(this.liveComponents.toArray()),this.sectionComponents=this.sectionComponents.concat(this.buttonComponents.toArray()),this.sectionComponents=this.sectionComponents.concat(this.outputComponents.toArray()),this.sectionComponents=this.sectionComponents.concat(this.sectionFileChangeComponents.toArray()),this.sectionFileChangeComponents.toArray().forEach(function(t){e.variableComponents=e.variableComponents.concat([t.stringListParameterComponent])}),this.setComponentIds(),this.myKernelSevice.sessionConnected.promise.then(function(t){e._sessionId=t,e.sectionComponents.forEach(function(e){e.sessionId=t}),e.variableComponents.forEach(function(e){e.sessionId=t}),e.outputComponents.toArray().forEach(function(e){e.subscribeToVariableChanges()}),e.initialiseForm()})},FormComponent.prototype.setComponentIds=function(){this.sectionComponents.forEach(function(e,t){e.setId(t)}),this.variableComponents.forEach(function(e,t){e.setId(t)}),this.myChangeDetectorRef.detectChanges()},FormComponent.prototype.restartFormKernel=function(){var e=this;return this.formReady=new l.PromiseDelegate,this.buttonComponents.toArray().forEach(function(e){e.formReady(!1)}),this.variableComponents.forEach(function(e){e.formReady(!1)}),this.liveComponents.toArray().forEach(function(e){e.formReady(!1)}),this.myKernelSevice.restartKernel().then(function(){e.initialiseForm()}),this.formReady.promise},FormComponent.prototype.initialiseForm=function(){var e=this;this.startComponents.toArray().forEach(function(t,n){""===t.always?t.runCode():e.myKernelSevice.sessionStore[e._sessionId].isNewSession&&t.runCode()}),this.myVariableService.resetVariableService(this._sessionId),this.variableComponents.forEach(function(e,t){e.initialise()}),this.myVariableService.allVariablesInitilised(this._sessionId),this.sectionFileChangeComponents.toArray().forEach(function(e){e.runCode()}),this.myKernelSevice.sessionStore[this._sessionId].queue.then(function(){e.liveComponents.toArray().forEach(function(e){e.formReady(!0)}),e.variableComponents.forEach(function(e){e.formReady(!0)}),e.buttonComponents.toArray().forEach(function(e){e.formReady(!0)}),e.formReady.resolve(null)})},o([r.ViewChildren(d.StartComponent),i("design:type",r.QueryList)],FormComponent.prototype,"startComponents",void 0),o([r.ViewChildren(h.LiveComponent),i("design:type",r.QueryList)],FormComponent.prototype,"liveComponents",void 0),o([r.ViewChildren(y.ButtonComponent),i("design:type",r.QueryList)],FormComponent.prototype,"buttonComponents",void 0),o([r.ViewChildren(v.OutputComponent),i("design:type",r.QueryList)],FormComponent.prototype,"outputComponents",void 0),o([r.ViewChildren(g.SectionFileChangeComponent),i("design:type",r.QueryList)],FormComponent.prototype,"sectionFileChangeComponents",void 0),o([r.ViewChildren(C.ToggleComponent),i("design:type",r.QueryList)],FormComponent.prototype,"toggleComponents",void 0),o([r.ViewChildren(S.TickComponent),i("design:type",r.QueryList)],FormComponent.prototype,"tickComponents",void 0),o([r.ViewChildren(_.NumberComponent),i("design:type",r.QueryList)],FormComponent.prototype,"numberComponents",void 0),o([r.ViewChildren(E.SliderComponent),i("design:type",r.QueryList)],FormComponent.prototype,"sliderComponents",void 0),o([r.ViewChildren(A.TableComponent),i("design:type",r.QueryList)],FormComponent.prototype,"tableComponents",void 0),o([r.ViewChildren(T.StringComponent),i("design:type",r.QueryList)],FormComponent.prototype,"stringComponents",void 0),o([r.ViewChildren(w.DropdownComponent),i("design:type",r.QueryList)],FormComponent.prototype,"dropdownComponents",void 0),o([r.ViewChildren(O.CodeComponent),i("design:type",r.QueryList)],FormComponent.prototype,"codeComponents",void 0),FormComponent=o([r.Component(n),i("design:paramtypes",[u.KernelService,p.VariableService,m.FileService,r.ElementRef,r.ChangeDetectorRef])],FormComponent)}(),R=function(){function FormComponentModule(){}return FormComponentModule=o([r.NgModule({imports:[a.CommonModule,s.FormsModule,c.MaterialModule,f.SectionsModule,b.VariablesModule,P.CodeModule],declarations:[M]})],FormComponentModule)}();return t.compileModuleAndAllComponentsSync(R).componentFactories.find(function(e){return e.componentType===M})}var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(7),s=n(32),l=n(9),c=n(241),u=n(74),p=n(93),m=n(84),f=n(1365),d=n(588),h=n(589),y=n(591),v=n(592),g=n(593),b=n(594),C=n(242),S=n(244),_=n(246),E=n(247),A=n(248),T=n(249),w=n(250),P=n(1367),O=n(85);t.createFormComponentFactory=createFormComponentFactory},1363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStartCode="\nimport os\nimport json\n\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nfrom scriptedforms._utilities import _VariableHandler, _json_table_to_df\n"},1364:function(e,t,n){"use strict";function jupyterSessionConnect(e,t,n){var i=new o.PromiseDelegate;return e.sessions.findByPath(t).then(function(t){e.sessions.connectTo(t).then(function(e){i.resolve({session:e,isNewSession:!1})})}).catch(function(){connectToNewSession(e,t).then(function(e){return i.resolve(e)})}),i.promise}function connectToNewSession(e,t){var n=new o.PromiseDelegate,r=i.ServerConnection.makeSettings({}),a={kernelName:"python3",serverSettings:r,path:t};return e.sessions.startNew(a).then(function(e){n.resolve({session:e,isNewSession:!0})}),n.promise}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=n(36);t.jupyterSessionConnect=jupyterSessionConnect},1365:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(7),a=n(103),s=n(588),l=n(589),c=n(591),u=n(592),p=n(593),m=n(594),f=function(){function SectionsModule(){}return SectionsModule=o([i.NgModule({imports:[r.CommonModule,a.MatButtonModule,a.MatIconModule,m.VariablesModule],declarations:[s.StartComponent,l.LiveComponent,c.ButtonComponent,u.OutputComponent,p.SectionFileChangeComponent],exports:[s.StartComponent,l.LiveComponent,c.ButtonComponent,u.OutputComponent,p.SectionFileChangeComponent]})],SectionsModule)}();t.SectionsModule=f},1366:function(e,t,n){"use strict";function addObserverPathCode(e){return"\nnext_path = os.path.dirname(os.path.abspath(\n    os.path.expanduser(os.path.expandvars('"+e+"'))))\nobserver.schedule(event_handler, path=next_path)"}Object.defineProperty(t,"__esModule",{value:!0}),t.startWatchdogSessionCode="\ntry:\n    observer\n    raise AssertionError(\"observer shouldn't exist yet\")\nexcept NameError:\n    import os\n    from watchdog.observers import Observer\n    from watchdog.events import FileSystemEventHandler, FileModifiedEvent\n\n    class MyHandler(FileSystemEventHandler):\n        def on_modified(self, event):\n            print('absolute: {}'.format(os.path.abspath(event.src_path)))\n            try:\n                print('relative: {}'.format(os.path.relpath(event.src_path)))\n            finally:\n                pass\n\n    event_handler = MyHandler()\n    observer = Observer()\n    observer.start()\n",t.addObserverPathCode=addObserverPathCode,t.watchdogWatchModeCode="\nimport os\nfrom watchdog.observers import Observer\nfrom watchdog.events import FileSystemEventHandler, FileModifiedEvent\n\nimport scriptedforms\n\nclass MyHandler(FileSystemEventHandler):\n    def on_modified(self, event):\n        if type(event) == FileModifiedEvent:\n            print(os.path.abspath(event.src_path))\n\nevent_handler = MyHandler()\nobserver = Observer()\nobserver.schedule(\n    event_handler, \n    path=os.path.join(os.path.dirname(scriptedforms.__file__), 'lib'),\n    recursive=True)\nobserver.start()\n"},1367:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(7),a=n(85),s=function(){function CodeModule(){}return CodeModule=o([i.NgModule({imports:[r.CommonModule],declarations:[a.CodeComponent],exports:[a.CodeComponent]})],CodeModule)}();t.CodeModule=s},1368:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),r=n(2),a=n(32),s=n(1369),l=n(241),c=n(1371),u=n(74),p=n(93),m=n(84),f=n(252),d=n(129),h=n(128),y=n(595),v=n(253),g=n(1372),b=n(1373),C=n(254),S=n(586),_=function(){function AppModule(){}return AppModule.prototype.ngDoBootstrap=function(e){},AppModule=o([r.NgModule({declarations:[S.AppComponent],imports:[s.BrowserAnimationsModule,i.BrowserModule,a.FormsModule,l.MaterialModule,g.FormBuilderModule,b.ToolbarModule],entryComponents:[S.AppComponent,C.ToolbarButtonComponent],providers:[u.KernelService,p.VariableService,m.FileService,f.WatchdogService,d.FormService,h.JupyterService,y.InitialisationService,v.ToolbarService,{provide:r.ErrorHandler,useClass:c.AppErrorHandler}]})],AppModule)}();t.AppModule=_},1369:function(e,t,n){"use strict";function issueAnimationCommand(e,t,n,o,i){return e.setProperty(t,"@@"+n+":"+o,i)}function resolveElementFromTarget(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}function parseTriggerCallbackName(e){var t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}function instantiateSupportedAnimationDriver(){return Object(s.g)()?new s.e:new s.d}function instantiateDefaultStyleNormalizer(){return new s.f}function instantiateRendererFactory(e,t,n){return new p(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"BrowserAnimationsModule",function(){return g}),n.d(t,"NoopAnimationsModule",function(){return b}),n.d(t,"ɵBrowserAnimationBuilder",function(){return l}),n.d(t,"ɵBrowserAnimationFactory",function(){return c}),n.d(t,"ɵAnimationRenderer",function(){return f}),n.d(t,"ɵAnimationRendererFactory",function(){return p}),n.d(t,"ɵa",function(){return m}),n.d(t,"ɵf",function(){return y}),n.d(t,"ɵg",function(){return v}),n.d(t,"ɵb",function(){return d}),n.d(t,"ɵd",function(){return instantiateDefaultStyleNormalizer}),n.d(t,"ɵe",function(){return instantiateRendererFactory}),n.d(t,"ɵc",function(){return instantiateSupportedAnimationDriver});var o=n(2),i=n(57),r=n(3),a=n(42),s=n(1370),l=function(e){function BrowserAnimationBuilder(t,n){var i=e.call(this)||this;i._nextAnimationId=0;var r={id:"0",encapsulation:o.ViewEncapsulation.None,styles:[],data:{animation:[]}};return i._renderer=t.createRenderer(n.body,r),i}return Object(r.b)(BrowserAnimationBuilder,e),BrowserAnimationBuilder.prototype.build=function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?Object(a.sequence)(e):e;return issueAnimationCommand(this._renderer,null,t,"register",[n]),new c(t,this._renderer)},BrowserAnimationBuilder.decorators=[{type:o.Injectable}],BrowserAnimationBuilder.ctorParameters=function(){return[{type:o.RendererFactory2},{type:void 0,decorators:[{type:o.Inject,args:[i.DOCUMENT]}]}]},BrowserAnimationBuilder}(a.AnimationBuilder),c=function(e){function BrowserAnimationFactory(t,n){var o=e.call(this)||this;return o._id=t,o._renderer=n,o}return Object(r.b)(BrowserAnimationFactory,e),BrowserAnimationFactory.prototype.create=function(e,t){return new u(this._id,e,t||{},this._renderer)},BrowserAnimationFactory}(a.AnimationFactory),u=function(){function RendererAnimationPlayer(e,t,n,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return RendererAnimationPlayer.prototype._listen=function(e,t){return this._renderer.listen(this.element,"@@"+this.id+":"+e,t)},RendererAnimationPlayer.prototype._command=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return issueAnimationCommand(this._renderer,this.element,this.id,e,t)},RendererAnimationPlayer.prototype.onDone=function(e){this._listen("done",e)},RendererAnimationPlayer.prototype.onStart=function(e){this._listen("start",e)},RendererAnimationPlayer.prototype.onDestroy=function(e){this._listen("destroy",e)},RendererAnimationPlayer.prototype.init=function(){this._command("init")},RendererAnimationPlayer.prototype.hasStarted=function(){return this._started},RendererAnimationPlayer.prototype.play=function(){this._command("play"),this._started=!0},RendererAnimationPlayer.prototype.pause=function(){this._command("pause")},RendererAnimationPlayer.prototype.restart=function(){this._command("restart")},RendererAnimationPlayer.prototype.finish=function(){this._command("finish")},RendererAnimationPlayer.prototype.destroy=function(){this._command("destroy")},RendererAnimationPlayer.prototype.reset=function(){this._command("reset")},RendererAnimationPlayer.prototype.setPosition=function(e){this._command("setPosition",e)},RendererAnimationPlayer.prototype.getPosition=function(){return 0},RendererAnimationPlayer}(),p=function(){function AnimationRendererFactory(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return AnimationRendererFactory.prototype.createRenderer=function(e,t){var n=this,o=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var i=this._rendererCache.get(o);return i||(i=new m("",o,this.engine),this._rendererCache.set(o,i)),i}var r=t.id,a=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,e),t.data.animation.forEach(function(t){return n.engine.registerTrigger(r,a,e,t.name,t)}),new f(this,a,o,this.engine)},AnimationRendererFactory.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},AnimationRendererFactory.prototype._scheduleCountTask=function(){var e=this;this.promise.then(function(){e._microtaskId++})},AnimationRendererFactory.prototype.scheduleListenerCallback=function(e,t,n){var o=this;if(e>=0&&e<this._microtaskId)return void this._zone.run(function(){return t(n)});0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){o._zone.run(function(){o._animationCallbacksBuffer.forEach(function(e){(0,e[0])(e[1])}),o._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n])},AnimationRendererFactory.prototype.end=function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()},AnimationRendererFactory.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},AnimationRendererFactory.decorators=[{type:o.Injectable}],AnimationRendererFactory.ctorParameters=function(){return[{type:o.RendererFactory2},{type:s.b},{type:o.NgZone}]},AnimationRendererFactory}(),m=function(){function BaseAnimationRenderer(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(e){return t.destroyNode(e)}:null}return Object.defineProperty(BaseAnimationRenderer.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),BaseAnimationRenderer.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},BaseAnimationRenderer.prototype.createElement=function(e,t){return this.delegate.createElement(e,t)},BaseAnimationRenderer.prototype.createComment=function(e){return this.delegate.createComment(e)},BaseAnimationRenderer.prototype.createText=function(e){return this.delegate.createText(e)},BaseAnimationRenderer.prototype.appendChild=function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)},BaseAnimationRenderer.prototype.insertBefore=function(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)},BaseAnimationRenderer.prototype.removeChild=function(e,t){this.engine.onRemove(this.namespaceId,t,this.delegate)},BaseAnimationRenderer.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},BaseAnimationRenderer.prototype.parentNode=function(e){return this.delegate.parentNode(e)},BaseAnimationRenderer.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},BaseAnimationRenderer.prototype.setAttribute=function(e,t,n,o){this.delegate.setAttribute(e,t,n,o)},BaseAnimationRenderer.prototype.removeAttribute=function(e,t,n){this.delegate.removeAttribute(e,t,n)},BaseAnimationRenderer.prototype.addClass=function(e,t){this.delegate.addClass(e,t)},BaseAnimationRenderer.prototype.removeClass=function(e,t){this.delegate.removeClass(e,t)},BaseAnimationRenderer.prototype.setStyle=function(e,t,n,o){this.delegate.setStyle(e,t,n,o)},BaseAnimationRenderer.prototype.removeStyle=function(e,t,n){this.delegate.removeStyle(e,t,n)},BaseAnimationRenderer.prototype.setProperty=function(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)},BaseAnimationRenderer.prototype.setValue=function(e,t){this.delegate.setValue(e,t)},BaseAnimationRenderer.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},BaseAnimationRenderer.prototype.disableAnimations=function(e,t){this.engine.disableAnimations(e,t)},BaseAnimationRenderer}(),f=function(e){function AnimationRenderer(t,n,o,i){var r=e.call(this,n,o,i)||this;return r.factory=t,r.namespaceId=n,r}return Object(r.b)(AnimationRenderer,e),AnimationRenderer.prototype.setProperty=function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?(n=void 0===n||!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)},AnimationRenderer.prototype.listen=function(e,t,n){var o=this;if("@"==t.charAt(0)){var i=resolveElementFromTarget(e),r=t.substr(1),a="";return"@"!=r.charAt(0)&&(s=parseTriggerCallbackName(r),r=s[0],a=s[1]),this.engine.listen(this.namespaceId,i,r,a,function(e){var t=e._data||-1;o.factory.scheduleListenerCallback(t,n,e)})}return this.delegate.listen(e,t,n);var s},AnimationRenderer}(m),d=function(e){function InjectableAnimationEngine(t,n){return e.call(this,t,n)||this}return Object(r.b)(InjectableAnimationEngine,e),InjectableAnimationEngine.decorators=[{type:o.Injectable}],InjectableAnimationEngine.ctorParameters=function(){return[{type:s.a},{type:s.c}]},InjectableAnimationEngine}(s.b),h=[{provide:a.AnimationBuilder,useClass:l},{provide:s.c,useFactory:instantiateDefaultStyleNormalizer},{provide:s.b,useClass:d},{provide:o.RendererFactory2,useFactory:instantiateRendererFactory,deps:[i["ɵDomRendererFactory2"],s.b,o.NgZone]}],y=[{provide:s.a,useFactory:instantiateSupportedAnimationDriver}].concat(h),v=[{provide:s.a,useClass:s.d}].concat(h),g=function(){function BrowserAnimationsModule(){}return BrowserAnimationsModule.decorators=[{type:o.NgModule,args:[{exports:[i.BrowserModule],providers:y}]}],BrowserAnimationsModule.ctorParameters=function(){return[]},BrowserAnimationsModule}(),b=function(){function NoopAnimationsModule(){}return NoopAnimationsModule.decorators=[{type:o.NgModule,args:[{exports:[i.BrowserModule],providers:v}]}],NoopAnimationsModule.ctorParameters=function(){return[]},NoopAnimationsModule}()},1370:function(e,t,n){"use strict";/**
 * @license Angular v5.2.5
 * (c) 2010-2018 Google, Inc. https://angular.io/
 * License: MIT
 */
function optimizeGroupPlayer(e){switch(e.length){case 0:return new o.NoopAnimationPlayer;case 1:return e[0];default:return new o["ɵAnimationGroupPlayer"](e)}}function normalizeKeyframes(e,t,n,i,r,a){void 0===r&&(r={}),void 0===a&&(a={});var s=[],l=[],c=-1,u=null;if(i.forEach(function(e){var n=e.offset,i=n==c,p=i&&u||{};Object.keys(e).forEach(function(n){var i=n,l=e[n];if("offset"!==n)switch(i=t.normalizePropertyName(i,s),l){case o["ɵPRE_STYLE"]:l=r[n];break;case o.AUTO_STYLE:l=a[n];break;default:l=t.normalizeStyleValue(n,i,l,s)}p[i]=l}),i||l.push(p),u=p,c=n}),s.length){throw new Error("Unable to animate due to the following errors:\n - "+s.join("\n - "))}return l}function listenOnPlayer(e,t,n,o){switch(t){case"start":e.onStart(function(){return o(n&&copyAnimationEvent(n,"start",e.totalTime))});break;case"done":e.onDone(function(){return o(n&&copyAnimationEvent(n,"done",e.totalTime))});break;case"destroy":e.onDestroy(function(){return o(n&&copyAnimationEvent(n,"destroy",e.totalTime))})}}function copyAnimationEvent(e,t,n){var o=makeAnimationEvent(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,void 0==n?e.totalTime:n),i=e._data;return null!=i&&(o._data=i),o}function makeAnimationEvent(e,t,n,o,i,r){return void 0===i&&(i=""),void 0===r&&(r=0),{element:e,triggerName:t,fromState:n,toState:o,phaseName:i,totalTime:r}}function getOrSetAsInMap(e,t,n){var o;return e instanceof Map?(o=e.get(t))||e.set(t,o=n):(o=e[t])||(o=e[t]=n),o}function parseTimelineCommand(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}function containsVendorPrefix(e){return"ebkit"==e.substring(1,6)}function validateStyleProperty(e){u||(u=getBodyNode()||{},p=!!u.style&&"WebkitAppearance"in u.style);var t=!0;if(u.style&&!containsVendorPrefix(e)&&!(t=e in u.style)&&p){t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in u.style}return t}function getBodyNode(){return"undefined"!=typeof document?document.body:null}function resolveTimingValue(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:_convertTimeValueToMS(parseFloat(t[1]),t[2])}function _convertTimeValueToMS(e,t){switch(t){case"s":return e*v;default:return e}}function resolveTiming(e,t,n){return e.hasOwnProperty("duration")?e:parseTimeExpression(e,t,n)}function parseTimeExpression(e,t,n){var o,i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r=0,a="";if("string"==typeof e){var s=e.match(i);if(null===s)return t.push('The provided timing value "'+e+'" is invalid.'),{duration:0,delay:0,easing:""};o=_convertTimeValueToMS(parseFloat(s[1]),s[2]);var l=s[3];null!=l&&(r=_convertTimeValueToMS(Math.floor(parseFloat(l)),s[4]));var c=s[5];c&&(a=c)}else o=e;if(!n){var u=!1,p=t.length;o<0&&(t.push("Duration values below 0 are not allowed for this animation step."),u=!0),r<0&&(t.push("Delay values below 0 are not allowed for this animation step."),u=!0),u&&t.splice(p,0,'The provided timing value "'+e+'" is invalid.')}return{duration:o,delay:r,easing:a}}function copyObj(e,t){return void 0===t&&(t={}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t}function normalizeStyles(e){var t={};return Array.isArray(e)?e.forEach(function(e){return copyStyles(e,!1,t)}):copyStyles(e,!1,t),t}function copyStyles(e,t,n){if(void 0===n&&(n={}),t)for(var o in e)n[o]=e[o];else copyObj(e,n);return n}function setStyles(e,t){e.style&&Object.keys(t).forEach(function(n){var o=dashCaseToCamelCase(n);e.style[o]=t[n]})}function eraseStyles(e,t){e.style&&Object.keys(t).forEach(function(t){var n=dashCaseToCamelCase(t);e.style[n]=""})}function normalizeAnimationEntry(e){return Array.isArray(e)?1==e.length?e[0]:Object(o.sequence)(e):e}function validateStyleParams(e,t,n){var o=t.params||{},i=extractStyleParams(e);i.length&&i.forEach(function(e){o.hasOwnProperty(e)||n.push("Unable to resolve the local animation param "+e+" in the given list of values")})}function extractStyleParams(e){var t=[];if("string"==typeof e){for(var n=e.toString(),o=void 0;o=C.exec(n);)t.push(o[1]);C.lastIndex=0}return t}function interpolateParams(e,t,n){var o=e.toString(),i=o.replace(C,function(e,o){var i=t[o];return t.hasOwnProperty(o)||(n.push("Please provide a value for the animation param "+o),i=""),i.toString()});return i==o?e:i}function iteratorToArray(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}function dashCaseToCamelCase(e){return e.replace(S,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1].toUpperCase()})}function allowPreviousPlayerStylesMerge(e,t){return 0===e||0===t}function visitDslNode(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #"+t.type)}}function parseTransitionExpr(e,t){var n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(function(e){return parseInnerTransitionStr(e,n,t)}):n.push(e),n}function parseInnerTransitionStr(e,t,n){if(":"==e[0]){var o=parseAnimationAlias(e,n);if("function"==typeof o)return void t.push(o);e=o}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+e+'" is not supported'),t;var r=i[1],a=i[2],s=i[3];t.push(makeLambdaFromStates(r,s));var l=r==_&&s==_;"<"!=a[0]||l||t.push(makeLambdaFromStates(s,r))}function parseAnimationAlias(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'+e+'" is not supported'),"* => *"}}function makeLambdaFromStates(e,t){var n=E.has(e)||A.has(e),o=E.has(t)||A.has(t);return function(i,r){var a=e==_||e==i,s=t==_||t==r;return!a&&n&&"boolean"==typeof i&&(a=i?E.has(e):A.has(e)),!s&&o&&"boolean"==typeof r&&(s=r?E.has(t):A.has(t)),a&&s}}function buildAnimationAst(e,t,n){return new P(e).build(t,n)}function normalizeSelector(e){var t=!!e.split(/\s*,\s*/).find(function(e){return e==T});return t&&(e=e.replace(w,"")),e=e.replace(/@\*/g,g).replace(/@\w+/g,function(e){return g+"-"+e.substr(1)}).replace(/:animating/g,b),[e,t]}function normalizeParams(e){return e?copyObj(e):null}function consumeOffset(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach(function(e){if(isObject(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}});else if(isObject(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}function isObject(e){return!Array.isArray(e)&&"object"==typeof e}function constructTimingAst(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e){var o=resolveTiming(e,t).duration;return makeTimingAst(o,0,"")}var i=e;if(i.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var r=makeTimingAst(0,0,"");return r.dynamic=!0,r.strValue=i,r}return n=n||resolveTiming(i,t),makeTimingAst(n.duration,n.delay,n.easing)}function normalizeAnimationOptions(e){return e?(e=copyObj(e),e.params&&(e.params=normalizeParams(e.params))):e={},e}function makeTimingAst(e,t,n){return{duration:e,delay:t,easing:n}}function createTimelineInstruction(e,t,n,o,i,r,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:o,duration:i,delay:r,totalTime:i+r,easing:a,subTimeline:s}}function buildAnimationTimelines(e,t,n,o,i,r,a,s,l,c){return void 0===r&&(r={}),void 0===a&&(a={}),void 0===c&&(c=[]),(new j).buildKeyframes(e,t,n,o,i,r,a,s,l,c)}function roundOffset(e,t){void 0===t&&(t=3);var n=Math.pow(10,t-1);return Math.round(e*n)/n}function flattenStyles(e,t){var n,i={};return e.forEach(function(e){"*"===e?(n=n||Object.keys(t),n.forEach(function(e){i[e]=o.AUTO_STYLE})):copyStyles(e,!1,i)}),i}function createTransitionInstruction(e,t,n,o,i,r,a,s,l,c,u,p){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:r,toState:o,toStyles:a,timelines:s,queriedElements:l,preStyleProps:c,postStyleProps:u,errors:p}}function oneOrMoreTransitionsMatch(e,t,n){return e.some(function(e){return e(t,n)})}function buildTrigger(e,t){return new q(e,t)}function createFallbackTransition(e,t){return new L(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},t)}function balanceProperties(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}function deleteOrUnsetInMap(e,t,n){var o;if(e instanceof Map){if(o=e.get(t)){if(o.length){var i=o.indexOf(n);o.splice(i,1)}0==o.length&&e.delete(t)}}else if(o=e[t]){if(o.length){var i=o.indexOf(n);o.splice(i,1)}0==o.length&&delete e[t]}return o}function normalizeTriggerValue(e){return null!=e?e:null}function isElementNode(e){return e&&1===e.nodeType}function isTriggerEventValid(e){return"start"==e||"done"==e}function cloakElement(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function cloakAndComputeStyles(e,t,n,o,i){var r=[];n.forEach(function(e){return r.push(cloakElement(e))});var a=[];o.forEach(function(n,o){var r={};n.forEach(function(e){var n=r[e]=t.computeStyle(o,e,i);n&&0!=n.length||(o[G]=J,a.push(o))}),e.set(o,r)});var s=0;return n.forEach(function(e){return cloakElement(e,r[s++])}),a}function buildRootMap(e,t){function getRoot(e){if(!e)return o;var t=r.get(e);if(t)return t;var a=e.parentNode;return t=n.has(a)?a:i.has(a)?o:getRoot(a),r.set(e,t),t}var n=new Map;if(e.forEach(function(e){return n.set(e,[])}),0==t.length)return n;var o=1,i=new Set(t),r=new Map;return t.forEach(function(e){var t=getRoot(e);t!==o&&n.get(t).push(e)}),n}function addClass(e,t){if(e.classList)e.classList.add(t);else{var n=e[ne];n||(n=e[ne]={}),n[t]=!0}}function removeClass(e,t){if(e.classList)e.classList.remove(t);else{var n=e[ne];n&&delete n[t]}}function removeNodesAfterAnimationDone(e,t,n){optimizeGroupPlayer(n).onDone(function(){return e.processLeaveNode(t)})}function flattenGroupPlayers(e){var t=[];return _flattenGroupPlayersRecur(e,t),t}function _flattenGroupPlayersRecur(e,t){for(var n=0;n<e.length;n++){var i=e[n];i instanceof o["ɵAnimationGroupPlayer"]?_flattenGroupPlayersRecur(i.players,t):t.push(i)}}function objEquals(e,t){var n=Object.keys(e),o=Object.keys(t);if(n.length!=o.length)return!1;for(var i=0;i<n.length;i++){var r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}function replacePostStylesAsPre(e,t,n){var o=n.get(e);if(!o)return!1;var i=t.get(e);return i?o.forEach(function(e){return i.add(e)}):t.set(e,o),n.delete(e),!0}function _computeStyle(e,t){return window.getComputedStyle(e)[t]}function supportsWebAnimations(){return"undefined"!=typeof Element&&"function"==typeof Element.prototype.animate}n.d(t,"a",function(){return y}),n.d(t,"c",function(){return I}),n.d(t,"f",function(){return k}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return oe}),n.d(t,"e",function(){return re}),n.d(t,"g",function(){return supportsWebAnimations});var o=n(42),i=n(3),r=function(e,t){return!1},a=function(e,t){return!1},s=function(e,t,n){return[]};if("undefined"!=typeof Element){if(r=function(e,t){return e.contains(t)},Element.prototype.matches)a=function(e,t){return e.matches(t)};else{var l=Element.prototype,c=l.matchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector||l.webkitMatchesSelector;c&&(a=function(e,t){return c.apply(e,[t])})}s=function(e,t,n){var o=[];if(n)o.push.apply(o,e.querySelectorAll(t));else{var i=e.querySelector(t);i&&o.push(i)}return o}}var u=null,p=!1,m=a,f=r,d=s,h=function(){function NoopAnimationDriver(){}return NoopAnimationDriver.prototype.validateStyleProperty=function(e){return validateStyleProperty(e)},NoopAnimationDriver.prototype.matchesElement=function(e,t){return m(e,t)},NoopAnimationDriver.prototype.containsElement=function(e,t){return f(e,t)},NoopAnimationDriver.prototype.query=function(e,t,n){return d(e,t,n)},NoopAnimationDriver.prototype.computeStyle=function(e,t,n){return n||""},NoopAnimationDriver.prototype.animate=function(e,t,n,i,r,a){return void 0===a&&(a=[]),new o.NoopAnimationPlayer},NoopAnimationDriver}(),y=function(){function AnimationDriver(){}return AnimationDriver.NOOP=new h,AnimationDriver}(),v=1e3,g=".ng-trigger",b=".ng-animating",C=new RegExp("{{\\s*(.+?)\\s*}}","g"),S=/-+([a-z0-9])/g,_="*",E=new Set(["true","1"]),A=new Set(["false","0"]),T=":self",w=new RegExp("s*"+T+"s*,?","g"),P=function(){function AnimationAstBuilderVisitor(e){this._driver=e}return AnimationAstBuilderVisitor.prototype.build=function(e,t){var n=new O(t);return this._resetContextStyleTimingState(n),visitDslNode(this,normalizeAnimationEntry(e),n)},AnimationAstBuilderVisitor.prototype._resetContextStyleTimingState=function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0},AnimationAstBuilderVisitor.prototype.visitTrigger=function(e,t){var n=this,o=t.queryCount=0,i=t.depCount=0,r=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(n._resetContextStyleTimingState(t),0==e.type){var s=e,l=s.name;l.split(/\s*,\s*/).forEach(function(e){s.name=e,r.push(n.visitState(s,t))}),s.name=l}else if(1==e.type){var c=n.visitTransition(e,t);o+=c.queryCount,i+=c.depCount,a.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:r,transitions:a,queryCount:o,depCount:i,options:null}},AnimationAstBuilderVisitor.prototype.visitState=function(e,t){var n=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(n.containsDynamicStyles){var i=new Set,r=o||{};if(n.styles.forEach(function(e){if(isObject(e)){var t=e;Object.keys(t).forEach(function(e){extractStyleParams(t[e]).forEach(function(e){r.hasOwnProperty(e)||i.add(e)})})}}),i.size){var a=iteratorToArray(i.values());t.errors.push('state("'+e.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:e.name,style:n,options:o?{params:o}:null}},AnimationAstBuilderVisitor.prototype.visitTransition=function(e,t){t.queryCount=0,t.depCount=0;var n=visitDslNode(this,normalizeAnimationEntry(e.animation),t);return{type:1,matchers:parseTransitionExpr(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:normalizeAnimationOptions(e.options)}},AnimationAstBuilderVisitor.prototype.visitSequence=function(e,t){var n=this;return{type:2,steps:e.steps.map(function(e){return visitDslNode(n,e,t)}),options:normalizeAnimationOptions(e.options)}},AnimationAstBuilderVisitor.prototype.visitGroup=function(e,t){var n=this,o=t.currentTime,i=0,r=e.steps.map(function(e){t.currentTime=o;var r=visitDslNode(n,e,t);return i=Math.max(i,t.currentTime),r});return t.currentTime=i,{type:3,steps:r,options:normalizeAnimationOptions(e.options)}},AnimationAstBuilderVisitor.prototype.visitAnimate=function(e,t){var n=constructTimingAst(e.timings,t.errors);t.currentAnimateTimings=n;var i,r=e.styles?e.styles:Object(o.style)({});if(5==r.type)i=this.visitKeyframes(r,t);else{var a=e.styles,s=!1;if(!a){s=!0;var l={};n.easing&&(l.easing=n.easing),a=Object(o.style)(l)}t.currentTime+=n.duration+n.delay;var c=this.visitStyle(a,t);c.isEmptyStep=s,i=c}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}},AnimationAstBuilderVisitor.prototype.visitStyle=function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n},AnimationAstBuilderVisitor.prototype._makeStyleAst=function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?e==o.AUTO_STYLE?n.push(e):t.errors.push("The provided style string value "+e+" is not allowed."):n.push(e)}):n.push(e.styles);var i=!1,r=null;return n.forEach(function(e){if(isObject(e)){var t=e,n=t.easing;if(n&&(r=n,delete t.easing),!i)for(var o in t){var a=t[o];if(a.toString().indexOf("{{")>=0){i=!0;break}}}}),{type:6,styles:n,easing:r,offset:e.offset,containsDynamicStyles:i,options:null}},AnimationAstBuilderVisitor.prototype._validateStyleAst=function(e,t){var n=this,o=t.currentAnimateTimings,i=t.currentTime,r=t.currentTime;o&&r>0&&(r-=o.duration+o.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(o){if(!n._driver.validateStyleProperty(o))return void t.errors.push('The provided animation property "'+o+'" is not a supported CSS property for animations');var a=t.collectedStyles[t.currentQuerySelector],s=a[o],l=!0;s&&(r!=i&&r>=s.startTime&&i<=s.endTime&&(t.errors.push('The CSS property "'+o+'" that exists between the times of "'+s.startTime+'ms" and "'+s.endTime+'ms" is also being animated in a parallel animation between the times of "'+r+'ms" and "'+i+'ms"'),l=!1),r=s.startTime),l&&(a[o]={startTime:r,endTime:i}),t.options&&validateStyleParams(e[o],t.options,t.errors)})})},AnimationAstBuilderVisitor.prototype.visitKeyframes=function(e,t){var n=this,o={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),o;var i=0,r=[],a=!1,s=!1,l=0,c=e.steps.map(function(e){var o=n._makeStyleAst(e,t),c=null!=o.offset?o.offset:consumeOffset(o.styles),u=0;return null!=c&&(i++,u=o.offset=c),s=s||u<0||u>1,a=a||u<l,l=u,r.push(u),o});s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");var u=e.steps.length,p=0;i>0&&i<u?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(p=1/(u-1));var m=u-1,f=t.currentTime,d=t.currentAnimateTimings,h=d.duration;return c.forEach(function(e,i){var a=p>0?i==m?1:p*i:r[i],s=a*h;t.currentTime=f+d.delay+s,d.duration=s,n._validateStyleAst(e,t),e.offset=a,o.styles.push(e)}),o},AnimationAstBuilderVisitor.prototype.visitReference=function(e,t){return{type:8,animation:visitDslNode(this,normalizeAnimationEntry(e.animation),t),options:normalizeAnimationOptions(e.options)}},AnimationAstBuilderVisitor.prototype.visitAnimateChild=function(e,t){return t.depCount++,{type:9,options:normalizeAnimationOptions(e.options)}},AnimationAstBuilderVisitor.prototype.visitAnimateRef=function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:normalizeAnimationOptions(e.options)}},AnimationAstBuilderVisitor.prototype.visitQuery=function(e,t){var n=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;var i=normalizeSelector(e.selector),r=i[0],a=i[1];t.currentQuerySelector=n.length?n+" "+r:r,getOrSetAsInMap(t.collectedStyles,t.currentQuerySelector,{});var s=visitDslNode(this,normalizeAnimationEntry(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:r,limit:o.limit||0,optional:!!o.optional,includeSelf:a,animation:s,originalSelector:e.selector,options:normalizeAnimationOptions(e.options)}},AnimationAstBuilderVisitor.prototype.visitStagger=function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:resolveTiming(e.timings,t.errors,!0);return{type:12,animation:visitDslNode(this,normalizeAnimationEntry(e.animation),t),timings:n,options:null}},AnimationAstBuilderVisitor}(),O=function(){function AnimationAstBuilderContext(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}return AnimationAstBuilderContext}(),M=function(){function ElementInstructionMap(){this._map=new Map}return ElementInstructionMap.prototype.consume=function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t},ElementInstructionMap.prototype.append=function(e,t){var n=this._map.get(e);n||this._map.set(e,n=[]),n.push.apply(n,t)},ElementInstructionMap.prototype.has=function(e){return this._map.has(e)},ElementInstructionMap.prototype.clear=function(){this._map.clear()},ElementInstructionMap}(),R=new RegExp(":enter","g"),V=new RegExp(":leave","g"),j=function(){function AnimationTimelineBuilderVisitor(){}return AnimationTimelineBuilderVisitor.prototype.buildKeyframes=function(e,t,n,o,i,r,a,s,l,c){void 0===c&&(c=[]),l=l||new M;var u=new B(e,t,l,o,i,c,[]);u.options=s,u.currentTimeline.setStyles([r],null,u.errors,s),visitDslNode(this,n,u);var p=u.timelines.filter(function(e){return e.containsAnimation()});if(p.length&&Object.keys(a).length){var m=p[p.length-1];m.allowOnlyTimelineStyles()||m.setStyles([a],null,u.errors,s)}return p.length?p.map(function(e){return e.buildKeyframes()}):[createTimelineInstruction(t,[],[],[],0,0,"",!1)]},AnimationTimelineBuilderVisitor.prototype.visitTrigger=function(e,t){},AnimationTimelineBuilderVisitor.prototype.visitState=function(e,t){},AnimationTimelineBuilderVisitor.prototype.visitTransition=function(e,t){},AnimationTimelineBuilderVisitor.prototype.visitAnimateChild=function(e,t){var n=t.subInstructions.consume(t.element);if(n){var o=t.createSubContext(e.options),i=t.currentTimeline.currentTime,r=this._visitSubInstructions(n,o,o.options);i!=r&&t.transformIntoNewTimeline(r)}t.previousNode=e},AnimationTimelineBuilderVisitor.prototype.visitAnimateRef=function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e},AnimationTimelineBuilderVisitor.prototype._visitSubInstructions=function(e,t,n){var o=t.currentTimeline.currentTime,i=o,r=null!=n.duration?resolveTimingValue(n.duration):null,a=null!=n.delay?resolveTimingValue(n.delay):null;return 0!==r&&e.forEach(function(e){var n=t.appendInstructionToTimeline(e,r,a);i=Math.max(i,n.duration+n.delay)}),i},AnimationTimelineBuilderVisitor.prototype.visitReference=function(e,t){t.updateOptions(e.options,!0),visitDslNode(this,e.animation,t),t.previousNode=e},AnimationTimelineBuilderVisitor.prototype.visitSequence=function(e,t){var n=this,o=t.subContextCount,i=t,r=e.options;if(r&&(r.params||r.delay)&&(i=t.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=F);var a=resolveTimingValue(r.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(function(e){return visitDslNode(n,e,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>o&&i.transformIntoNewTimeline()),t.previousNode=e},AnimationTimelineBuilderVisitor.prototype.visitGroup=function(e,t){var n=this,o=[],i=t.currentTimeline.currentTime,r=e.options&&e.options.delay?resolveTimingValue(e.options.delay):0;e.steps.forEach(function(a){var s=t.createSubContext(e.options);r&&s.delayNextStep(r),visitDslNode(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),o.push(s.currentTimeline)}),o.forEach(function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)}),t.transformIntoNewTimeline(i),t.previousNode=e},AnimationTimelineBuilderVisitor.prototype._visitTiming=function(e,t){if(e.dynamic){var n=e.strValue;return resolveTiming(t.params?interpolateParams(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}},AnimationTimelineBuilderVisitor.prototype.visitAnimate=function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),o.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e},AnimationTimelineBuilderVisitor.prototype.visitStyle=function(e,t){var n=t.currentTimeline,o=t.currentAnimateTimings;!o&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=o&&o.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e},AnimationTimelineBuilderVisitor.prototype.visitKeyframes=function(e,t){var n=t.currentAnimateTimings,o=t.currentTimeline.duration,i=n.duration,r=t.createSubContext(),a=r.currentTimeline;a.easing=n.easing,e.styles.forEach(function(e){var n=e.offset||0;a.forwardTime(n*i),a.setStyles(e.styles,e.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(o+i),t.previousNode=e},AnimationTimelineBuilderVisitor.prototype.visitQuery=function(e,t){var n=this,o=t.currentTimeline.currentTime,i=e.options||{},r=i.delay?resolveTimingValue(i.delay):0;r&&(6===t.previousNode.type||0==o&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=F);var a=o,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=s.length;var l=null;s.forEach(function(o,i){t.currentQueryIndex=i;var s=t.createSubContext(e.options,o);r&&s.delayNextStep(r),o===t.element&&(l=s.currentTimeline),visitDslNode(n,e.animation,s),s.currentTimeline.applyStylesToKeyframe();var c=s.currentTimeline.currentTime;a=Math.max(a,c)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e},AnimationTimelineBuilderVisitor.prototype.visitStagger=function(e,t){var n=t.parentContext,o=t.currentTimeline,i=e.timings,r=Math.abs(i.duration),a=r*(t.currentQueryTotal-1),s=r*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var l=t.currentTimeline;s&&l.delayNextStep(s);var c=l.currentTime;visitDslNode(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=o.currentTime-c+(o.startTime-n.currentTimeline.startTime)},AnimationTimelineBuilderVisitor}(),F={},B=function(){function AnimationTimelineContext(e,t,n,o,i,r,a,s){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=o,this._leaveClassName=i,this.errors=r,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=F,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new N(this._driver,t,0),a.push(this.currentTimeline)}return Object.defineProperty(AnimationTimelineContext.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),AnimationTimelineContext.prototype.updateOptions=function(e,t){var n=this;if(e){var o=e,i=this.options;null!=o.duration&&(i.duration=resolveTimingValue(o.duration)),null!=o.delay&&(i.delay=resolveTimingValue(o.delay));var r=o.params;if(r){var a=i.params;a||(a=this.options.params={}),Object.keys(r).forEach(function(e){t&&a.hasOwnProperty(e)||(a[e]=interpolateParams(r[e],a,n.errors))})}}},AnimationTimelineContext.prototype._copyOptions=function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach(function(e){n[e]=t[e]})}}return e},AnimationTimelineContext.prototype.createSubContext=function(e,t,n){void 0===e&&(e=null);var o=t||this.element,i=new AnimationTimelineContext(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i},AnimationTimelineContext.prototype.transformIntoNewTimeline=function(e){return this.previousNode=F,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline},AnimationTimelineContext.prototype.appendInstructionToTimeline=function(e,t,n){var o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new x(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(i),o},AnimationTimelineContext.prototype.incrementTime=function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)},AnimationTimelineContext.prototype.delayNextStep=function(e){e>0&&this.currentTimeline.delayNextStep(e)},AnimationTimelineContext.prototype.invokeQuery=function(e,t,n,o,i,r){var a=[];if(o&&a.push(this.element),e.length>0){e=e.replace(R,"."+this._enterClassName),e=e.replace(V,"."+this._leaveClassName);var s=1!=n,l=this._driver.query(this.element,e,s);0!==n&&(l=n<0?l.slice(l.length+n,l.length):l.slice(0,n)),a.push.apply(a,l)}return i||0!=a.length||r.push('`query("'+t+'")` returned zero elements. (Use `query("'+t+'", { optional: true })` if you wish to allow this.)'),a},AnimationTimelineContext}(),N=function(){function TimelineBuilder(e,t,n,o){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}return TimelineBuilder.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},TimelineBuilder.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(TimelineBuilder.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),TimelineBuilder.prototype.delayNextStep=function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e},TimelineBuilder.prototype.fork=function(e,t){return this.applyStylesToKeyframe(),new TimelineBuilder(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)},TimelineBuilder.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},TimelineBuilder.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},TimelineBuilder.prototype.forwardTime=function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()},TimelineBuilder.prototype._updateStyle=function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}},TimelineBuilder.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},TimelineBuilder.prototype.applyEmptyStep=function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){t._backFill[e]=t._globalTimelineStyles[e]||o.AUTO_STYLE,t._currentKeyframe[e]=o.AUTO_STYLE}),this._currentEmptyStepKeyframe=this._currentKeyframe},TimelineBuilder.prototype.setStyles=function(e,t,n,i){var r=this;t&&(this._previousKeyframe.easing=t);var a=i&&i.params||{},s=flattenStyles(e,this._globalTimelineStyles);Object.keys(s).forEach(function(e){var t=interpolateParams(s[e],a,n);r._pendingStyles[e]=t,r._localTimelineStyles.hasOwnProperty(e)||(r._backFill[e]=r._globalTimelineStyles.hasOwnProperty(e)?r._globalTimelineStyles[e]:o.AUTO_STYLE),r._updateStyle(e,t)})},TimelineBuilder.prototype.applyStylesToKeyframe=function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){var o=t[n];e._currentKeyframe[n]=o}),Object.keys(this._localTimelineStyles).forEach(function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])}))},TimelineBuilder.prototype.snapshotCurrentStyles=function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)})},TimelineBuilder.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(TimelineBuilder.prototype,"properties",{get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e},enumerable:!0,configurable:!0}),TimelineBuilder.prototype.mergeTimelineCollectedStyles=function(e){var t=this;Object.keys(e._styleSummary).forEach(function(n){var o=t._styleSummary[n],i=e._styleSummary[n];(!o||i.time>o.time)&&t._updateStyle(n,i.value)})},TimelineBuilder.prototype.buildKeyframes=function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration,r=[];this._keyframes.forEach(function(a,s){var l=copyStyles(a,!0);Object.keys(l).forEach(function(e){var i=l[e];i==o["ɵPRE_STYLE"]?t.add(e):i==o.AUTO_STYLE&&n.add(e)}),i||(l.offset=s/e.duration),r.push(l)});var a=t.size?iteratorToArray(t.values()):[],s=n.size?iteratorToArray(n.values()):[];if(i){var l=r[0],c=copyObj(l);l.offset=0,c.offset=1,r=[l,c]}return createTimelineInstruction(this.element,r,a,s,this.duration,this.startTime,this.easing,!1)},TimelineBuilder}(),x=function(e){function SubTimelineBuilder(t,n,o,i,r,a,s){void 0===s&&(s=!1);var l=e.call(this,t,n,a.delay)||this;return l.element=n,l.keyframes=o,l.preStyleProps=i,l.postStyleProps=r,l._stretchStartingKeyframe=s,l.timings={duration:a.duration,delay:a.delay,easing:a.easing},l}return Object(i.b)(SubTimelineBuilder,e),SubTimelineBuilder.prototype.containsAnimation=function(){return this.keyframes.length>1},SubTimelineBuilder.prototype.buildKeyframes=function(){var e=this.keyframes,t=this.timings,n=t.delay,o=t.duration,i=t.easing;if(this._stretchStartingKeyframe&&n){var r=[],a=o+n,s=n/a,l=copyStyles(e[0],!1);l.offset=0,r.push(l);var c=copyStyles(e[0],!1);c.offset=roundOffset(s),r.push(c);for(var u=e.length-1,p=1;p<=u;p++){var m=copyStyles(e[p],!1),f=m.offset,d=n+f*o;m.offset=roundOffset(d/a),r.push(m)}o=a,n=0,i="",e=r}return createTimelineInstruction(this.element,e,this.preStyleProps,this.postStyleProps,o,n,i,!0)},SubTimelineBuilder}(N),I=(function(){function Animation(e,t){this._driver=e;var n=[],o=buildAnimationAst(e,t,n);if(n.length){var i="animation validation failed:\n"+n.join("\n");throw new Error(i)}this._animationAst=o}Animation.prototype.buildTimelines=function(e,t,n,o,i){var r=Array.isArray(t)?normalizeStyles(t):t,a=Array.isArray(n)?normalizeStyles(n):n,s=[];i=i||new M;var l=buildAnimationTimelines(this._driver,e,this._animationAst,"ng-enter","ng-leave",r,a,o,i,s);if(s.length){var c="animation building failed:\n"+s.join("\n");throw new Error(c)}return l}}(),function(){function AnimationStyleNormalizer(){}return AnimationStyleNormalizer}()),k=(function(){function NoopAnimationStyleNormalizer(){}NoopAnimationStyleNormalizer.prototype.normalizePropertyName=function(e,t){return e},NoopAnimationStyleNormalizer.prototype.normalizeStyleValue=function(e,t,n,o){return n}}(),function(e){function WebAnimationsStyleNormalizer(){return null!==e&&e.apply(this,arguments)||this}return Object(i.b)(WebAnimationsStyleNormalizer,e),WebAnimationsStyleNormalizer.prototype.normalizePropertyName=function(e,t){return dashCaseToCamelCase(e)},WebAnimationsStyleNormalizer.prototype.normalizeStyleValue=function(e,t,n,o){var i="",r=n.toString().trim();if(D[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&o.push("Please provide a CSS unit value for "+e+":"+n)}return r+i},WebAnimationsStyleNormalizer}(I)),D=function(e){var t={};return e.forEach(function(e){return t[e]=!0}),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")),z={},L=function(){function AnimationTransitionFactory(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}return AnimationTransitionFactory.prototype.match=function(e,t){return oneOrMoreTransitionsMatch(this.ast.matchers,e,t)},AnimationTransitionFactory.prototype.buildStyles=function(e,t,n){var o=this._stateStyles["*"],i=this._stateStyles[e],r=o?o.buildStyles(t,n):{};return i?i.buildStyles(t,n):r},AnimationTransitionFactory.prototype.build=function(e,t,n,o,r,a,s,l,c){var u=[],p=this.ast.options&&this.ast.options.params||z,m=s&&s.params||z,f=this.buildStyles(n,m,u),d=l&&l.params||z,h=this.buildStyles(o,d,u),y=new Set,v=new Map,g=new Map,b="void"===o,C={params:Object(i.a)({},p,d)},S=buildAnimationTimelines(e,t,this.ast.animation,r,a,f,h,C,c,u);if(u.length)return createTransitionInstruction(t,this._triggerName,n,o,b,f,h,[],[],v,g,u);S.forEach(function(e){var n=e.element,o=getOrSetAsInMap(v,n,{});e.preStyleProps.forEach(function(e){return o[e]=!0});var i=getOrSetAsInMap(g,n,{});e.postStyleProps.forEach(function(e){return i[e]=!0}),n!==t&&y.add(n)});var _=iteratorToArray(y.values());return createTransitionInstruction(t,this._triggerName,n,o,b,f,h,S,_,v,g)},AnimationTransitionFactory}(),K=function(){function AnimationStateStyles(e,t){this.styles=e,this.defaultParams=t}return AnimationStateStyles.prototype.buildStyles=function(e,t){var n={},o=copyObj(this.defaultParams);return Object.keys(e).forEach(function(t){var n=e[t];null!=n&&(o[t]=n)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var i=e;Object.keys(i).forEach(function(e){var r=i[e];r.length>1&&(r=interpolateParams(r,o,t)),n[e]=r})}}),n},AnimationStateStyles}(),q=function(){function AnimationTrigger(e,t){var n=this;this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(function(e){var t=e.options&&e.options.params||{};n.states[e.name]=new K(e.style,t)}),balanceProperties(this.states,"true","1"),balanceProperties(this.states,"false","0"),t.transitions.forEach(function(t){n.transitionFactories.push(new L(e,t,n.states))}),this.fallbackTransition=createFallbackTransition(e,this.states)}return Object.defineProperty(AnimationTrigger.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),AnimationTrigger.prototype.matchTransition=function(e,t){return this.transitionFactories.find(function(n){return n.match(e,t)})||null},AnimationTrigger.prototype.matchStyles=function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)},AnimationTrigger}(),W=new M,Q=function(){function TimelineAnimationEngine(e,t){this._driver=e,this._normalizer=t,this._animations={},this._playersById={},this.players=[]}return TimelineAnimationEngine.prototype.register=function(e,t){var n=[],o=buildAnimationAst(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[e]=o},TimelineAnimationEngine.prototype._buildPlayer=function(e,t,n){var o=e.element,i=normalizeKeyframes(this._driver,this._normalizer,o,e.keyframes,t,n);return this._driver.animate(o,i,e.duration,e.delay,e.easing,[])},TimelineAnimationEngine.prototype.create=function(e,t,n){var i=this;void 0===n&&(n={});var r,a=[],s=this._animations[e],l=new Map;if(s?(r=buildAnimationTimelines(this._driver,t,s,"ng-enter","ng-leave",{},{},n,W,a),r.forEach(function(e){var t=getOrSetAsInMap(l,e.element,{});e.postStyleProps.forEach(function(e){return t[e]=null})})):(a.push("The requested animation doesn't exist or has already been destroyed"),r=[]),a.length)throw new Error("Unable to create the animation due to the following errors: "+a.join("\n"));l.forEach(function(e,t){Object.keys(e).forEach(function(n){e[n]=i._driver.computeStyle(t,n,o.AUTO_STYLE)})});var c=r.map(function(e){var t=l.get(e.element);return i._buildPlayer(e,{},t)}),u=optimizeGroupPlayer(c);return this._playersById[e]=u,u.onDestroy(function(){return i.destroy(e)}),this.players.push(u),u},TimelineAnimationEngine.prototype.destroy=function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)},TimelineAnimationEngine.prototype._getPlayer=function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by "+e);return t},TimelineAnimationEngine.prototype.listen=function(e,t,n,o){var i=makeAnimationEvent(t,"","","");return listenOnPlayer(this._getPlayer(e),n,i,o),function(){}},TimelineAnimationEngine.prototype.command=function(e,t,n,o){if("register"==n)return void this.register(e,o[0]);if("create"==n){var i=o[0]||{};return void this.create(e,t,i)}var r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}},TimelineAnimationEngine}(),H=[],U={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!1},J={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!0},G="__ng_removed",Y=function(){function StateValue(e,t){void 0===t&&(t=""),this.namespaceId=t;var n=e&&e.hasOwnProperty("value"),o=n?e.value:e;if(this.value=normalizeTriggerValue(o),n){var i=copyObj(e);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(StateValue.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),StateValue.prototype.absorbOptions=function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach(function(e){null==n[e]&&(n[e]=t[e])})}},StateValue}(),$=new Y("void"),Z=new Y("DELETED"),X=function(){function AnimationTransitionNamespace(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,addClass(t,this._hostClassName)}return AnimationTransitionNamespace.prototype.listen=function(e,t,n,o){var i=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+t+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+t+'" because the provided event is undefined!');if(!isTriggerEventValid(n))throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+t+'" is not supported!');var r=getOrSetAsInMap(this._elementListeners,e,[]),a={name:t,phase:n,callback:o};r.push(a);var s=getOrSetAsInMap(this._engine.statesByElement,e,{});return s.hasOwnProperty(t)||(addClass(e,"ng-trigger"),addClass(e,"ng-trigger-"+t),s[t]=$),function(){i._engine.afterFlush(function(){var e=r.indexOf(a);e>=0&&r.splice(e,1),i._triggers[t]||delete s[t]})}},AnimationTransitionNamespace.prototype.register=function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)},AnimationTransitionNamespace.prototype._getTrigger=function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'+e+'" has not been registered!');return t},AnimationTransitionNamespace.prototype.trigger=function(e,t,n,o){var i=this;void 0===o&&(o=!0);var r=this._getTrigger(t),a=new te(this.id,t,e),s=this._engine.statesByElement.get(e);s||(addClass(e,"ng-trigger"),addClass(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));var l=s[t],c=new Y(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),s[t]=c,l){if(l===Z)return a}else l=$;if("void"===c.value||l.value!==c.value){var u=getOrSetAsInMap(this._engine.playersByElement,e,[]);u.forEach(function(e){e.namespaceId==i.id&&e.triggerName==t&&e.queued&&e.destroy()});var p=r.matchTransition(l.value,c.value),m=!1;if(!p){if(!o)return;p=r.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:p,fromState:l,toState:c,player:a,isFallbackTransition:m}),m||(addClass(e,"ng-animate-queued"),a.onStart(function(){removeClass(e,"ng-animate-queued")})),a.onDone(function(){var t=i.players.indexOf(a);t>=0&&i.players.splice(t,1);var n=i._engine.playersByElement.get(e);if(n){var o=n.indexOf(a);o>=0&&n.splice(o,1)}}),this.players.push(a),u.push(a),a}if(!objEquals(l.params,c.params)){var f=[],d=r.matchStyles(l.value,l.params,f),h=r.matchStyles(c.value,c.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){eraseStyles(e,d),setStyles(e,h)})}},AnimationTransitionNamespace.prototype.deregister=function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(t,n){delete t[e]}),this._elementListeners.forEach(function(n,o){t._elementListeners.set(o,n.filter(function(t){return t.name!=e}))})},AnimationTransitionNamespace.prototype.clearElementCache=function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))},AnimationTransitionNamespace.prototype._signalRemovalForInnerTriggers=function(e,t,n){var o=this;void 0===n&&(n=!1),this._engine.driver.query(e,g,!0).forEach(function(e){if(!e[G]){var n=o._engine.fetchNamespacesByElement(e);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(e,t,!1,!0)}):o.clearElementCache(e)}})},AnimationTransitionNamespace.prototype.triggerLeaveAnimation=function(e,t,n,o){var i=this,r=this._engine.statesByElement.get(e);if(r){var a=[];if(Object.keys(r).forEach(function(t){if(i._triggers[t]){var n=i.trigger(e,t,"void",o);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&optimizeGroupPlayer(a).onDone(function(){return i._engine.processLeaveNode(e)}),!0}return!1},AnimationTransitionNamespace.prototype.prepareLeaveAnimationListeners=function(e){var t=this,n=this._elementListeners.get(e);if(n){var o=new Set;n.forEach(function(n){var i=n.name;if(!o.has(i)){o.add(i);var r=t._triggers[i],a=r.fallbackTransition,s=t._engine.statesByElement.get(e),l=s[i]||$,c=new Y("void"),u=new te(t.id,i,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:i,transition:a,fromState:l,toState:c,player:u,isFallbackTransition:!0})}})}},AnimationTransitionNamespace.prototype.removeNode=function(e,t){var n=this,o=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),!this.triggerLeaveAnimation(e,t,!0)){var i=!1;if(o.totalAnimations){var r=o.players.length?o.playersByQueriedElement.get(e):[];if(r&&r.length)i=!0;else for(var a=e;a=a.parentNode;){var s=o.statesByElement.get(a);if(s){i=!0;break}}}this.prepareLeaveAnimationListeners(e),i?o.markElementAsRemoved(this.id,e,!1,t):(o.afterFlush(function(){return n.clearElementCache(e)}),o.destroyInnerAnimations(e),o._onRemovalComplete(e,t))}},AnimationTransitionNamespace.prototype.insertNode=function(e,t){addClass(e,this._hostClassName)},AnimationTransitionNamespace.prototype.drainQueuedTransitions=function(e){var t=this,n=[];return this._queue.forEach(function(o){var i=o.player;if(!i.destroyed){var r=o.element,a=t._elementListeners.get(r);a&&a.forEach(function(t){if(t.name==o.triggerName){var n=makeAnimationEvent(r,o.triggerName,o.fromState.value,o.toState.value);n._data=e,listenOnPlayer(o.player,t.phase,n,t.callback)}}),i.markedForDestroy?t._engine.afterFlush(function(){i.destroy()}):n.push(o)}}),this._queue=[],n.sort(function(e,n){var o=e.transition.ast.depCount,i=n.transition.ast.depCount;return 0==o||0==i?o-i:t._engine.driver.containsElement(e.element,n.element)?1:-1})},AnimationTransitionNamespace.prototype.destroy=function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)},AnimationTransitionNamespace.prototype.elementContainsData=function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(function(t){return t.element===e})||t},AnimationTransitionNamespace}(),ee=function(){function TransitionAnimationEngine(e,t){this.driver=e,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return TransitionAnimationEngine.prototype._onRemovalComplete=function(e,t){this.onRemovalComplete(e,t)},Object.defineProperty(TransitionAnimationEngine.prototype,"queuedPlayers",{get:function(){var e=[];return this._namespaceList.forEach(function(t){t.players.forEach(function(t){t.queued&&e.push(t)})}),e},enumerable:!0,configurable:!0}),TransitionAnimationEngine.prototype.createNamespace=function(e,t){var n=new X(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n},TransitionAnimationEngine.prototype._balanceNamespaceList=function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var o=!1,i=n;i>=0;i--){var r=this._namespaceList[i];if(this.driver.containsElement(r.hostElement,t)){this._namespaceList.splice(i+1,0,e),o=!0;break}}o||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e},TransitionAnimationEngine.prototype.register=function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n},TransitionAnimationEngine.prototype.registerTrigger=function(e,t,n){var o=this._namespaceLookup[e];o&&o.register(t,n)&&this.totalAnimations++},TransitionAnimationEngine.prototype.destroy=function(e,t){var n=this;if(e){var o=this._fetchNamespace(e);this.afterFlush(function(){n.namespacesByHostElement.delete(o.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(o);t>=0&&n._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(function(){return o.destroy(t)})}},TransitionAnimationEngine.prototype._fetchNamespace=function(e){return this._namespaceLookup[e]},TransitionAnimationEngine.prototype.fetchNamespacesByElement=function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var o=Object.keys(n),i=0;i<o.length;i++){var r=n[o[i]].namespaceId;if(r){var a=this._fetchNamespace(r);a&&t.add(a)}}return t},TransitionAnimationEngine.prototype.trigger=function(e,t,n,o){return!!isElementNode(t)&&(this._fetchNamespace(e).trigger(t,n,o),!0)},TransitionAnimationEngine.prototype.insertNode=function(e,t,n,o){if(isElementNode(t)){var i=t[G];i&&i.setForRemoval&&(i.setForRemoval=!1),e&&this._fetchNamespace(e).insertNode(t,n),o&&this.collectEnterElement(t)}},TransitionAnimationEngine.prototype.collectEnterElement=function(e){this.collectedEnterElements.push(e)},TransitionAnimationEngine.prototype.markElementAsDisabled=function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),addClass(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),removeClass(e,"ng-animate-disabled"))},TransitionAnimationEngine.prototype.removeNode=function(e,t,n){if(!isElementNode(t))return void this._onRemovalComplete(t,n);var o=e?this._fetchNamespace(e):null;o?o.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n)},TransitionAnimationEngine.prototype.markElementAsRemoved=function(e,t,n,o){this.collectedLeaveElements.push(t),t[G]={namespaceId:e,setForRemoval:o,hasAnimation:n,removedBeforeQueried:!1}},TransitionAnimationEngine.prototype.listen=function(e,t,n,o,i){return isElementNode(t)?this._fetchNamespace(e).listen(t,n,o,i):function(){}},TransitionAnimationEngine.prototype._buildInstruction=function(e,t,n,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,o,e.fromState.options,e.toState.options,t)},TransitionAnimationEngine.prototype.destroyInnerAnimations=function(e){var t=this,n=this.driver.query(e,g,!0);n.forEach(function(e){return t.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,b,!0),n.forEach(function(e){return t.finishActiveQueriedAnimationOnElement(e)}))},TransitionAnimationEngine.prototype.destroyActiveAnimationsForElement=function(e){var t=this.playersByElement.get(e);t&&t.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()});var n=this.statesByElement.get(e);n&&Object.keys(n).forEach(function(e){return n[e]=Z})},TransitionAnimationEngine.prototype.finishActiveQueriedAnimationOnElement=function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach(function(e){return e.finish()})},TransitionAnimationEngine.prototype.whenRenderingDone=function(){var e=this;return new Promise(function(t){if(e.players.length)return optimizeGroupPlayer(e.players).onDone(function(){return t()});t()})},TransitionAnimationEngine.prototype.processLeaveNode=function(e){var t=this,n=e[G];if(n&&n.setForRemoval){if(e[G]=U,n.namespaceId){this.destroyInnerAnimations(e);var o=this._fetchNamespace(n.namespaceId);o&&o.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(function(n){t.markElementAsDisabled(e,!1)})},TransitionAnimationEngine.prototype.flush=function(e){var t=this;void 0===e&&(e=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,n){return t._balanceNamespaceList(e,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var o=0;o<this.collectedEnterElements.length;o++){var i=this.collectedEnterElements[o];addClass(i,"ng-star-inserted")}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var r=[];try{n=this._flushAnimations(r,e)}finally{for(var o=0;o<r.length;o++)r[o]()}}else for(var o=0;o<this.collectedLeaveElements.length;o++){var a=this.collectedLeaveElements[o];this.processLeaveNode(a)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?optimizeGroupPlayer(n).onDone(function(){s.forEach(function(e){return e()})}):s.forEach(function(e){return e()})}},TransitionAnimationEngine.prototype.reportError=function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))},TransitionAnimationEngine.prototype._flushAnimations=function(e,t){var n=this,r=new M,a=[],s=new Map,l=[],c=new Map,u=new Map,p=new Map,m=new Set;this.disabledNodes.forEach(function(e){m.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),o=0;o<t.length;o++)m.add(t[o])});var f=getBodyNode(),d=Array.from(this.statesByElement.keys()),h=buildRootMap(d,this.collectedEnterElements),y=new Map,v=0;h.forEach(function(e,t){var n="ng-enter"+v++;y.set(t,n),e.forEach(function(e){return addClass(e,n)})});for(var g=[],C=new Set,S=new Set,_=0;_<this.collectedLeaveElements.length;_++){var E=this.collectedLeaveElements[_],A=E[G];A&&A.setForRemoval&&(g.push(E),C.add(E),A.hasAnimation?this.driver.query(E,".ng-star-inserted",!0).forEach(function(e){return C.add(e)}):S.add(E))}var T=new Map,w=buildRootMap(d,Array.from(C));w.forEach(function(e,t){var n="ng-leave"+v++;T.set(t,n),e.forEach(function(e){return addClass(e,n)})}),e.push(function(){h.forEach(function(e,t){var n=y.get(t);e.forEach(function(e){return removeClass(e,n)})}),w.forEach(function(e,t){var n=T.get(t);e.forEach(function(e){return removeClass(e,n)})}),g.forEach(function(e){n.processLeaveNode(e)})});for(var P=[],O=[],R=this._namespaceList.length-1;R>=0;R--){this._namespaceList[R].drainQueuedTransitions(t).forEach(function(e){var t=e.player;P.push(t);var o=e.element;if(!f||!n.driver.containsElement(f,o))return void t.destroy();var i=T.get(o),s=y.get(o),m=n._buildInstruction(e,r,s,i);if(m.errors&&m.errors.length)return void O.push(m);if(e.isFallbackTransition)return t.onStart(function(){return eraseStyles(o,m.fromStyles)}),t.onDestroy(function(){return setStyles(o,m.toStyles)}),void a.push(t);m.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),r.append(o,m.timelines);var d={instruction:m,player:t,element:o};l.push(d),m.queriedElements.forEach(function(e){return getOrSetAsInMap(c,e,[]).push(t)}),m.preStyleProps.forEach(function(e,t){var n=Object.keys(e);if(n.length){var o=u.get(t);o||u.set(t,o=new Set),n.forEach(function(e){return o.add(e)})}}),m.postStyleProps.forEach(function(e,t){var n=Object.keys(e),o=p.get(t);o||p.set(t,o=new Set),n.forEach(function(e){return o.add(e)})})})}if(O.length){var V=[];O.forEach(function(e){V.push("@"+e.triggerName+" has failed due to:\n"),e.errors.forEach(function(e){return V.push("- "+e+"\n")})}),P.forEach(function(e){return e.destroy()}),this.reportError(V)}var j=new Map,F=new Map;l.forEach(function(e){var t=e.element;r.has(t)&&(F.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,j))}),a.forEach(function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(function(e){getOrSetAsInMap(j,t,[]).push(e),e.destroy()})});var B=g.filter(function(e){return replacePostStylesAsPre(e,u,p)}),N=new Map;cloakAndComputeStyles(N,this.driver,S,p,o.AUTO_STYLE).forEach(function(e){replacePostStylesAsPre(e,u,p)&&B.push(e)});var x=new Map;h.forEach(function(e,t){cloakAndComputeStyles(x,n.driver,new Set(e),u,o["ɵPRE_STYLE"])}),B.forEach(function(e){var t=N.get(e),n=x.get(e);N.set(e,Object(i.a)({},t,n))});var I=[],k=[],D={};l.forEach(function(e){var t=e.element,o=e.player,i=e.instruction;if(r.has(t)){if(m.has(t))return o.onDestroy(function(){return setStyles(t,i.toStyles)}),void a.push(o);var l=D;if(F.size>1){for(var c=t,u=[];c=c.parentNode;){var p=F.get(c);if(p){l=p;break}u.push(c)}u.forEach(function(e){return F.set(e,l)})}var f=n._buildAnimation(o.namespaceId,i,j,s,x,N);if(o.setRealPlayer(f),l===D)I.push(o);else{var d=n.playersByElement.get(l);d&&d.length&&(o.parentPlayer=optimizeGroupPlayer(d)),a.push(o)}}else eraseStyles(t,i.fromStyles),o.onDestroy(function(){return setStyles(t,i.toStyles)}),k.push(o),m.has(t)&&a.push(o)}),k.forEach(function(e){var t=s.get(e.element);if(t&&t.length){var n=optimizeGroupPlayer(t);e.setRealPlayer(n)}}),a.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var z=0;z<g.length;z++){var E=g[z],A=E[G];if(removeClass(E,"ng-leave"),!A||!A.hasAnimation){var L=[];if(c.size){var K=c.get(E);K&&K.length&&L.push.apply(L,K);for(var q=this.driver.query(E,b,!0),W=0;W<q.length;W++){var Q=c.get(q[W]);Q&&Q.length&&L.push.apply(L,Q)}}var H=L.filter(function(e){return!e.destroyed});H.length?removeNodesAfterAnimationDone(this,E,H):this.processLeaveNode(E)}}return g.length=0,I.forEach(function(e){n.players.push(e),e.onDone(function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)}),e.play()}),I},TransitionAnimationEngine.prototype.elementContainsData=function(e,t){var n=!1,o=t[G];return o&&o.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n},TransitionAnimationEngine.prototype.afterFlush=function(e){this._flushFns.push(e)},TransitionAnimationEngine.prototype.afterFlushAnimationsDone=function(e){this._whenQuietFns.push(e)},TransitionAnimationEngine.prototype._getPreviousPlayers=function(e,t,n,o,i){var r=[];if(t){var a=this.playersByQueriedElement.get(e);a&&(r=a)}else{var s=this.playersByElement.get(e);if(s){var l=!i||"void"==i;s.forEach(function(e){e.queued||(l||e.triggerName==o)&&r.push(e)})}}return(n||o)&&(r=r.filter(function(e){return(!n||n==e.namespaceId)&&(!o||o==e.triggerName)})),r},TransitionAnimationEngine.prototype._beforeAnimationBuild=function(e,t,n){for(var o=t.triggerName,i=t.element,r=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:o,s=this,l=0,c=t.timelines;l<c.length;l++){var u=c[l];!function(e){var o=e.element,l=o!==i,c=getOrSetAsInMap(n,o,[]);s._getPreviousPlayers(o,l,r,a,t.toState).forEach(function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),c.push(e)})}(u)}eraseStyles(i,t.fromStyles)},TransitionAnimationEngine.prototype._buildAnimation=function(e,t,n,i,r,a){var s=this,l=t.triggerName,c=t.element,u=[],p=new Set,m=new Set,f=t.timelines.map(function(t){var f=t.element;p.add(f);var d=f[G];if(d&&d.removedBeforeQueried)return new o.NoopAnimationPlayer;var h=f!==c,y=flattenGroupPlayers((n.get(f)||H).map(function(e){return e.getRealPlayer()})).filter(function(e){var t=e;return!!t.element&&t.element===f}),v=r.get(f),g=a.get(f),b=normalizeKeyframes(s.driver,s._normalizer,f,t.keyframes,v,g),C=s._buildPlayer(t,b,y);if(t.subTimeline&&i&&m.add(f),h){var S=new te(e,l,f);S.setRealPlayer(C),u.push(S)}return C});u.forEach(function(e){getOrSetAsInMap(s.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return deleteOrUnsetInMap(s.playersByQueriedElement,e.element,e)})}),p.forEach(function(e){return addClass(e,"ng-animating")});var d=optimizeGroupPlayer(f);return d.onDestroy(function(){p.forEach(function(e){return removeClass(e,"ng-animating")}),setStyles(c,t.toStyles)}),m.forEach(function(e){getOrSetAsInMap(i,e,[]).push(d)}),d},TransitionAnimationEngine.prototype._buildPlayer=function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new o.NoopAnimationPlayer},TransitionAnimationEngine}(),te=function(){function TransitionAnimationPlayer(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new o.NoopAnimationPlayer,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.queued=!0}return TransitionAnimationPlayer.prototype.setRealPlayer=function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(n){t._queuedCallbacks[n].forEach(function(t){return listenOnPlayer(e,n,void 0,t)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.queued=!1)},TransitionAnimationPlayer.prototype.getRealPlayer=function(){return this._player},TransitionAnimationPlayer.prototype.syncPlayerEvents=function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart(function(){return n.triggerCallback("start")}),e.onDone(function(){return t.finish()}),e.onDestroy(function(){return t.destroy()})},TransitionAnimationPlayer.prototype._queueEvent=function(e,t){getOrSetAsInMap(this._queuedCallbacks,e,[]).push(t)},TransitionAnimationPlayer.prototype.onDone=function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)},TransitionAnimationPlayer.prototype.onStart=function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)},TransitionAnimationPlayer.prototype.onDestroy=function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)},TransitionAnimationPlayer.prototype.init=function(){this._player.init()},TransitionAnimationPlayer.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},TransitionAnimationPlayer.prototype.play=function(){!this.queued&&this._player.play()},TransitionAnimationPlayer.prototype.pause=function(){!this.queued&&this._player.pause()},TransitionAnimationPlayer.prototype.restart=function(){!this.queued&&this._player.restart()},TransitionAnimationPlayer.prototype.finish=function(){this._player.finish()},TransitionAnimationPlayer.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},TransitionAnimationPlayer.prototype.reset=function(){!this.queued&&this._player.reset()},TransitionAnimationPlayer.prototype.setPosition=function(e){this.queued||this._player.setPosition(e)},TransitionAnimationPlayer.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},Object.defineProperty(TransitionAnimationPlayer.prototype,"totalTime",{get:function(){return this._player.totalTime},enumerable:!0,configurable:!0}),TransitionAnimationPlayer.prototype.triggerCallback=function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)},TransitionAnimationPlayer}(),ne="$$classes",oe=function(){function AnimationEngine(e,t){var n=this;this._driver=e,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new ee(e,t),this._timelineEngine=new Q(e,t),this._transitionEngine.onRemovalComplete=function(e,t){return n.onRemovalComplete(e,t)}}return AnimationEngine.prototype.registerTrigger=function(e,t,n,o,i){var r=e+"-"+o,a=this._triggerCache[r];if(!a){var s=[],l=buildAnimationAst(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'+o+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=buildTrigger(o,l),this._triggerCache[r]=a}this._transitionEngine.registerTrigger(t,o,a)},AnimationEngine.prototype.register=function(e,t){this._transitionEngine.register(e,t)},AnimationEngine.prototype.destroy=function(e,t){this._transitionEngine.destroy(e,t)},AnimationEngine.prototype.onInsert=function(e,t,n,o){this._transitionEngine.insertNode(e,t,n,o)},AnimationEngine.prototype.onRemove=function(e,t,n){this._transitionEngine.removeNode(e,t,n)},AnimationEngine.prototype.disableAnimations=function(e,t){this._transitionEngine.markElementAsDisabled(e,t)},AnimationEngine.prototype.process=function(e,t,n,o){if("@"==n.charAt(0)){var i=parseTimelineCommand(n),r=i[0],a=i[1],s=o;this._timelineEngine.command(r,t,a,s)}else this._transitionEngine.trigger(e,t,n,o)},AnimationEngine.prototype.listen=function(e,t,n,o,i){if("@"==n.charAt(0)){var r=parseTimelineCommand(n),a=r[0],s=r[1];return this._timelineEngine.listen(a,t,s,i)}return this._transitionEngine.listen(e,t,n,o,i)},AnimationEngine.prototype.flush=function(e){void 0===e&&(e=-1),this._transitionEngine.flush(e)},Object.defineProperty(AnimationEngine.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),AnimationEngine.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},AnimationEngine}(),ie=function(){function WebAnimationsPlayer(e,t,n,o){void 0===o&&(o=[]);var i=this;this.element=e,this.keyframes=t,this.options=n,this.previousPlayers=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.previousStyles={},this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay,allowPreviousPlayerStylesMerge(this._duration,this._delay)&&o.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return i.previousStyles[e]=t[e]})})}return WebAnimationsPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},WebAnimationsPlayer.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},WebAnimationsPlayer.prototype._buildPlayer=function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes.map(function(e){return copyStyles(e,!1)}),n=Object.keys(this.previousStyles);if(n.length&&t.length){var o=t[0],i=[];if(n.forEach(function(t){o.hasOwnProperty(t)||i.push(t),o[t]=e.previousStyles[t]}),i.length)for(var r=this,a=1;a<t.length;a++)!function(){var e=t[a];i.forEach(function(t){e[t]=_computeStyle(r.element,t)})}()}this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",function(){return e._onFinish()})}},WebAnimationsPlayer.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},WebAnimationsPlayer.prototype._triggerWebAnimation=function(e,t,n){return e.animate(t,n)},WebAnimationsPlayer.prototype.onStart=function(e){this._onStartFns.push(e)},WebAnimationsPlayer.prototype.onDone=function(e){this._onDoneFns.push(e)},WebAnimationsPlayer.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},WebAnimationsPlayer.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},WebAnimationsPlayer.prototype.pause=function(){this.init(),this.domPlayer.pause()},WebAnimationsPlayer.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},WebAnimationsPlayer.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},WebAnimationsPlayer.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},WebAnimationsPlayer.prototype.restart=function(){this.reset(),this.play()},WebAnimationsPlayer.prototype.hasStarted=function(){return this._started},WebAnimationsPlayer.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},WebAnimationsPlayer.prototype.setPosition=function(e){this.domPlayer.currentTime=e*this.time},WebAnimationsPlayer.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(WebAnimationsPlayer.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),WebAnimationsPlayer.prototype.beforeDestroy=function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:_computeStyle(e.element,n))}),this.currentSnapshot=t},WebAnimationsPlayer.prototype.triggerCallback=function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0},WebAnimationsPlayer}(),re=function(){function WebAnimationsDriver(){}return WebAnimationsDriver.prototype.validateStyleProperty=function(e){return validateStyleProperty(e)},WebAnimationsDriver.prototype.matchesElement=function(e,t){return m(e,t)},WebAnimationsDriver.prototype.containsElement=function(e,t){return f(e,t)},WebAnimationsDriver.prototype.query=function(e,t,n){return d(e,t,n)},WebAnimationsDriver.prototype.computeStyle=function(e,t,n){return window.getComputedStyle(e)[t]},WebAnimationsDriver.prototype.animate=function(e,t,n,o,i,r){void 0===r&&(r=[]);var a=0==o?"both":"forwards",s={duration:n,delay:o,fill:a};i&&(s.easing=i);var l=r.filter(function(e){return e instanceof ie});return new ie(e,t,s,l)},WebAnimationsDriver}()},1371:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(e){function AppErrorHandler(){return null!==e&&e.apply(this,arguments)||this}return o(AppErrorHandler,e),AppErrorHandler.prototype.handleError=function(t){var n=document.getElementsByClassName("errorbox");n.length>0&&(n[0].innerHTML='<h2>Javascript Error:</h2>\n<p>\n  A Javascript error has occured. This could be due to an error within your\n  ScriptedForms template or an issue with ScriptedForms itself.\n</p>\n<div class="jp-OutputArea-child">\n  <div class="jp-OutputPrompt"></div>\n  <div class="jp-RenderedText" data-mime-type="application/vnd.jupyter.stderr">\n    <pre style="white-space: pre-wrap;">\n  '+t+"</pre></div></div>"),e.prototype.handleError.call(this,t)},AppErrorHandler}(i.ErrorHandler);t.AppErrorHandler=r},1372:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(7),a=n(587),s=function(){function FormBuilderModule(){}return FormBuilderModule=o([i.NgModule({imports:[r.CommonModule],declarations:[a.FormBuilderComponent],exports:[a.FormBuilderComponent]})],FormBuilderModule)}();t.FormBuilderModule=s},1373:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(7),a=n(103),s=n(1374),l=n(254),c=function(){function ToolbarModule(){}return ToolbarModule=o([i.NgModule({imports:[r.CommonModule,a.MatButtonModule,a.MatIconModule],declarations:[l.ToolbarButtonComponent,s.ToolbarComponent],exports:[l.ToolbarButtonComponent,s.ToolbarComponent]})],ToolbarModule)}();t.ToolbarModule=c},1374:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),a=n(2),s=n(2),l=n(25),c=n(254),u=n(253),p=n(129),m=function(){function ToolbarComponent(e,t,n,o){this.myComponentFactoryResolver=e,this.myToolbarService=t,this.myFormService=n,this.changeDetectorRef=o,this.restartingKernel=new r.BehaviorSubject(!1)}return ToolbarComponent.prototype.ngAfterViewInit=function(){var e=this;this.addButton({icon:"chrome_reader_mode",click:function(){window.open("http://scriptedforms.com.au","_blank")},tooltip:"ScriptedForms documentation, installation instructions, and source code."}),this.addButton({click:function(){window.print()},icon:"print",tooltip:"Print your ScriptedForm"}),this.addButton({click:function(){e.restartKernel()},icon:"refresh",disable:this.restartingKernel,tooltip:"Restart the Jupyter Python Kernel. This will reset your inputs."}),this.myToolbarService.addSpacer(),this.changeDetectorRef.detectChanges()},ToolbarComponent.prototype.addButton=function(e){var t;this.buttonFactory=this.myComponentFactoryResolver.resolveComponentFactory(c.ToolbarButtonComponent);var n=this.container.createComponent(this.buttonFactory);n.instance.click=e.click,e.icon&&(n.instance.icon=e.icon,t=e.icon),e.disable&&(n.instance.disable=e.disable),e.tooltip&&(n.instance.tooltip=e.tooltip),e.iconClass&&(n.instance.iconClass=e.iconClass,t=e.iconClass);var o=new l.Widget({node:n.instance.myElementRef.nativeElement});this.myToolbarService.addItem(t,o)},ToolbarComponent.prototype.restartKernel=function(){var e=this;this.restartingKernel.next(!0),this.myFormService.restartFormKernel().then(function(){e.restartingKernel.next(!1)})},o([a.ViewChild("container",{read:a.ViewContainerRef}),i("design:type",a.ViewContainerRef)],ToolbarComponent.prototype,"container",void 0),ToolbarComponent=o([s.Component({selector:"toolbar",template:"<span #container></span><toolbar-button hidden></toolbar-button>"}),i("design:paramtypes",[a.ComponentFactoryResolver,u.ToolbarService,p.FormService,a.ChangeDetectorRef])],ToolbarComponent)}();t.ToolbarComponent=m},241:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(103),a=function(){function MaterialModule(){}return MaterialModule=o([i.NgModule({imports:[r.MatButtonModule,r.MatIconModule,r.MatCardModule,r.MatInputModule,r.MatTableModule,r.MatCheckboxModule,r.MatSlideToggleModule,r.MatSliderModule,r.MatSelectModule,r.MatExpansionModule,r.MatProgressSpinnerModule],exports:[r.MatButtonModule,r.MatIconModule,r.MatCardModule,r.MatInputModule,r.MatTableModule,r.MatCheckboxModule,r.MatSlideToggleModule,r.MatSliderModule,r.MatSelectModule,r.MatExpansionModule,r.MatProgressSpinnerModule]})],MaterialModule)}();t.MaterialModule=a},242:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(243),a=n(2),s=function(e){function ToggleComponent(){return null!==e&&e.apply(this,arguments)||this}return o(ToggleComponent,e),ToggleComponent=i([a.Component({selector:"variable-toggle",template:'\n<span #variablecontainer *ngIf="variableName === undefined">\n  <ng-content></ng-content>\n</span>\n\n<mat-slide-toggle \n[required]="required"\n[(ngModel)]="variableValue"\n(ngModelChange)="variableChanged()"\n[disabled]="!isFormReady">\n  {{placeholderValue}}\n</mat-slide-toggle>'})],ToggleComponent)}(r.BooleanBaseComponent);t.ToggleComponent=s},243:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(94),a=n(2),s=function(e){function BooleanBaseComponent(){return null!==e&&e.apply(this,arguments)||this}return o(BooleanBaseComponent,e),BooleanBaseComponent.prototype.pythonValueReference=function(){return this.variableValue?"True":"False"},BooleanBaseComponent=i([a.Component({})],BooleanBaseComponent)}(r.VariableBaseComponent);t.BooleanBaseComponent=s},244:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(243),a=n(2),s=function(e){function TickComponent(){return null!==e&&e.apply(this,arguments)||this}return o(TickComponent,e),TickComponent=i([a.Component({selector:"variable-tick",template:'\n<span #variablecontainer *ngIf="variableName === undefined">\n  <ng-content></ng-content>\n</span>\n\n<mat-checkbox \n[required]="required"\n[(ngModel)]="variableValue"\n(ngModelChange)="variableChanged()"\n[disabled]="!isFormReady">\n  {{placeholderValue}}\n</mat-checkbox>'})],TickComponent)}(r.BooleanBaseComponent);t.TickComponent=s},245:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(243),a=n(2),s=function(e){function ConditionalComponent(){return null!==e&&e.apply(this,arguments)||this}return o(ConditionalComponent,e),ConditionalComponent=i([a.Component({selector:"variable-conditional",template:'<span #variablecontainer *ngIf="variableName === undefined"><ng-content></ng-content></span><span></span>'})],ConditionalComponent)}(r.BooleanBaseComponent);t.ConditionalComponent=s},246:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(590),a=n(2),s=function(e){function NumberComponent(){return null!==e&&e.apply(this,arguments)||this}return o(NumberComponent,e),NumberComponent=i([a.Component({selector:"variable-number",template:'\n<span #variablecontainer *ngIf="variableName === undefined">\n  <ng-content></ng-content>\n</span>\n\n<mat-input-container class="variableNumber" *ngIf="variableName" >\n  <input\n  [required]="required"\n  matInput\n  [disabled]="!isFormReady"\n  [placeholder]="placeholderValue"\n  [(ngModel)]="variableValue"\n  (ngModelChange)="variableChanged($event)"\n  (blur)="onBlur()" \n  (focus)="onFocus()"\n  [max]="max"\n  [min]="min"\n  [step]="step"\n  type="number">\n</mat-input-container>\n<div class="jp-RenderedText" *ngIf="usedSeparator">\n  <pre>\n    <span class="ansi-red-fg">\n      The use of commas or semicolons to separate inputs is deprecated. \n      Please instead use html parameters like so:\n      &lt;variable-number min="{{min}}" max="{{max}}" step="{{step}}"&gt;{{variableName}}&lt;/variable-number&gt;\n    </span>\n  </pre>\n</div>',styles:[".variableNumber {\n    width: 200px;\n  }\n  "]})],NumberComponent)}(r.NumberBaseComponent);t.NumberComponent=s},247:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(590),l=function(e){function SliderComponent(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=0,t.max=100,t}return o(SliderComponent,e),SliderComponent.prototype.updateValue=function(e){this.variableValue=e,this.variableChanged()},i([a.Input(),r("design:type",Number)],SliderComponent.prototype,"min",void 0),i([a.Input(),r("design:type",Number)],SliderComponent.prototype,"max",void 0),SliderComponent=i([a.Component({selector:"variable-slider",template:'\n<span #variablecontainer *ngIf="variableName === undefined">\n  <ng-content></ng-content>\n</span>\n\n<span class="container">{{placeholderValue}}\n  <mat-slider class="variableSlider" *ngIf="variableName"\n  [disabled]="!isFormReady"\n  [value]="variableValue"\n  (input)="updateValue($event.value)"\n  (blur)="onBlur()" \n  (focus)="onFocus()"\n  [max]="max"\n  [min]="min"\n  [step]="step"\n  [thumb-label]="true">\n  </mat-slider>\n</span>\n<div class="jp-RenderedText" *ngIf="usedSeparator">\n  <pre>\n  <span class="ansi-red-fg">\n  The use of commas or semicolons to separate inputs is deprecated. \n  Please instead use html parameters like so:\n  &lt;variable-slider min="{{min}}" max="{{max}}" step="{{step}}"&gt;{{variableName}}&lt;/variable-slider&gt;\n</span>\n  </pre>\n</div>',styles:["\n.container {\n  display: flex;\n}\n  \n.variableSlider {\n  flex-grow: 1;\n}\n"]})],SliderComponent)}(s.NumberBaseComponent);t.SliderComponent=l},248:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(103),s=n(121),l=n(94),c=function(e){function TableComponent(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnDefs=[],t.oldColumnDefs=[],t.dataSource=new a.MatTableDataSource,t.isPandas=!0,t.focus=[null,null],t}return o(TableComponent,e),TableComponent.prototype.updateVariableView=function(e){var t,n=this;t=!!this.variableValue&&e.data.length==this.variableValue.data.length,this.variableValue=e;var o=[];e.schema.fields.forEach(function(e){o.push(e.name)}),this.oldColumnDefs=this.columnDefs,this.columnDefs=o,this.oldColumnDefs.length==this.columnDefs.length&&this.columnDefs.every(function(e,t){return e===n.oldColumnDefs[t]})&&t?e.data.forEach(function(e,t){Object.keys(e).forEach(function(o,i){t===n.focus[0]&&o===n.focus[1]||n.oldVariableValue.data[t][o]!==e[o]&&(n.dataSource.data[t][o]=e[o],n.oldVariableValue.data[t][o]=e[o])})}):(this.dataSource.data=e.data,this.updateOldVariable())},TableComponent.prototype.onVariableChange=function(){return this.variableValue.data=JSON.parse(JSON.stringify(this.dataSource.data)),Promise.resolve(null)},TableComponent.prototype.testIfDifferent=function(){return!(s(this.variableValue)===s(this.oldVariableValue))},TableComponent.prototype.pythonValueReference=function(){return"_json_table_to_df('"+JSON.stringify(this.variableValue)+"')"},TableComponent.prototype.pythonVariableEvaluate=function(){return"json.loads("+this.variableName+".to_json(orient='table'))"},TableComponent.prototype.onBlur=function(e){this.focus=[null,null]},TableComponent.prototype.onFocus=function(e){this.focus=e},TableComponent=i([r.Component({selector:"variable-table",template:'\n<span #variablecontainer *ngIf="variableName === undefined">\n  <ng-content></ng-content>\n</span>\n\n<div class="container mat-elevation-z8" >\n  <mat-table #table [dataSource]="dataSource" *ngIf="variableValue">\n    <ng-container [matColumnDef]="column" *ngFor="let column of columnDefs; let i = index">\n      <mat-header-cell *matHeaderCellDef> {{column}} </mat-header-cell>\n      <mat-cell *matCellDef="let row; let j = index">\n        <span *ngIf="column == variableValue.schema.primaryKey || isOutput">\n          {{row[column]}}\n        </span>\n        <mat-input-container *ngIf="column != variableValue.schema.primaryKey && !isOutput">\n          <input\n          [required]="required"\n          matInput\n          (blur)="onBlur([j, column])"\n          (focus)="onFocus([j, column])"\n          [disabled]="!isFormReady"\n          [(ngModel)]="row[column]"\n          (ngModelChange)="variableChanged()"\n          type="number">\n        </mat-input-container>\n      </mat-cell>\n    </ng-container>\n\n    <mat-header-row *matHeaderRowDef="columnDefs"></mat-header-row>\n    <mat-row *matRowDef="let row; columns: columnDefs;"></mat-row>\n  </mat-table>\n</div>\n',styles:["\n.container {\n  display: flex;\n  flex-direction: column;\n  min-width: 300px;\n}\n\n.mat-form-field {\n  font-size: 14px;\n  width: 100%;\n}\n\n.mat-table {\n  overflow: auto;\n  max-height: 500px;\n}\n"]})],TableComponent)}(l.VariableBaseComponent);t.TableComponent=c},249:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(94),a=n(2),s=function(e){function StringComponent(){return null!==e&&e.apply(this,arguments)||this}return o(StringComponent,e),StringComponent.prototype.pythonValueReference=function(){var e=this.variableValue.replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return'"""'+String(e)+'"""'},StringComponent=i([a.Component({selector:"variable-string",template:'\n<span #variablecontainer *ngIf="variableName === undefined">\n  <ng-content></ng-content>\n</span>\n<mat-input-container class="variableString" *ngIf="variableName">\n  <textarea\n  [required]="required"\n  matInput matTextareaAutosize\n  [disabled]="!isFormReady"\n  [placeholder]="placeholderValue"\n  [(ngModel)]="variableValue"\n  (ngModelChange)="variableChanged()"\n  (blur)="onBlur()" \n  (focus)="onFocus()"\n  type="text" class="variableString"></textarea>\n</mat-input-container>',styles:[".variableString {\n  width: 100%;\n}\n"]})],StringComponent)}(r.VariableBaseComponent);t.StringComponent=s},250:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(94),l=n(251),c=function(e){function DropdownComponent(){var t=null!==e&&e.apply(this,arguments)||this;return t.deprecatedOptions=[],t.options=[],t.usedSeparator=!1,t}return o(DropdownComponent,e),DropdownComponent.prototype.pythonValueReference=function(){var e;if("string"==typeof this.variableValue){var t=String(this.variableValue).replace(/\\/g,"\\\\").replace(/\"/g,'\\"');e='"""'+String(t)+'"""'}else e=String(this.variableValue);return e},DropdownComponent.prototype.loadVariableName=function(){var e=this,t=this.variablecontainer.nativeElement,n=this.htmlDecode(t.innerHTML).trim(),o=n.split(/[,;]/);o.length>1&&(this.usedSeparator=!0),this.variableName=o[0].trim(),o.slice(1).forEach(function(t){e.options=e.options.concat([t.trim()])}),this.deprecatedOptions=this.options,this.items&&(this.options=this.stringListParameterComponent.variableValue,this.stringListParameterComponent.variableChange.asObservable().subscribe(function(t){e.options=t}))},i([a.Input(),r("design:type",String)],DropdownComponent.prototype,"items",void 0),i([a.ViewChild("stringListParameterComponent"),r("design:type",l.StringListParameterComponent)],DropdownComponent.prototype,"stringListParameterComponent",void 0),DropdownComponent=i([a.Component({selector:"variable-dropdown",template:'\n<span #variablecontainer *ngIf="variableName === undefined">\n  <ng-content></ng-content>\n</span>\n<variable-string-list-parameter #stringListParameterComponent *ngIf="items">{{items}}</variable-string-list-parameter>\n<mat-form-field>\n  <mat-select \n  [required]="required"\n  [disabled]="!isFormReady"\n  [placeholder]="placeholderValue"\n  [(ngModel)]="variableValue"\n  (ngModelChange)="variableChanged($event)"\n  (blur)="onBlur()" \n  (focus)="onFocus()">\n    <mat-option *ngFor="let option of options" [value]="option">{{option}}</mat-option>\n  </mat-select>\n</mat-form-field>\n<div class="jp-RenderedText" *ngIf="usedSeparator">\n  <pre>\n    <span class="ansi-red-fg">\n      The use of commas or semicolons to separate inputs is deprecated. \n      Please instead use the items html parameter like so:\n      &lt;variable-dropdown items="[<span *ngFor="let option of deprecatedOptions.slice(0,-1)">\'{{option}}\', </span>\'{{deprecatedOptions.slice(-1)}}\']"&gt;{{variableName}}&lt;/variable-dropdown&gt;\n    </span>\n  </pre>\n</div>'})],DropdownComponent)}(s.VariableBaseComponent);t.DropdownComponent=c},251:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(94),a=n(2),s=function(e){function StringListParameterComponent(){return null!==e&&e.apply(this,arguments)||this}return o(StringListParameterComponent,e),StringListParameterComponent=i([a.Component({selector:"variable-string-list-parameter",template:'<span #variablecontainer *ngIf="variableName === undefined"><ng-content></ng-content></span><span></span>'})],StringListParameterComponent)}(r.VariableBaseComponent);t.StringListParameterComponent=s},252:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),a=n(2),s=n(9),l=n(36),c=n(128),u=n(84),p=n(129),m=n(74),f=n(1366),d=function(){function WatchdogService(e,t,n,o){this.myFileService=e,this.myJupyterService=t,this.myFormService=n,this.myKernelService=o,this.everythingIdle=new s.PromiseDelegate,this.watchdogError=new r.BehaviorSubject(null),this.fileChanged=new r.BehaviorSubject(null)}return WatchdogService.prototype.runDevModeWatchdog=function(){var e=new s.PromiseDelegate,t="scriptedforms_watchdog_development_mode_kernel",n=l.ServerConnection.makeSettings({}),o={kernelName:"python3",serverSettings:n,path:t};this.myJupyterService.serviceManager.sessions.findByPath(t).then(function(t){l.Session.connectTo(t,n).then(function(t){e.resolve(t)})}).catch(function(){l.Session.startNew(o).then(function(t){t.kernel.requestExecute({code:f.watchdogWatchModeCode}),e.resolve(t)})}),e.promise.then(function(e){e.iopubMessage.connect(function(e,t){if(l.KernelMessage.isErrorMsg(t)){var n=t;console.error(n.content)}if(t.content.text){var o=String(t.content.text).trim(),i=o.split("\n");console.log(i),location.reload(!0)}})})},WatchdogService.prototype.startWatchdog=function(){var e=this;Object({production:!0}).development&&this.runDevModeWatchdog();var t="scriptedforms_watchdog_kernel",n=l.ServerConnection.makeSettings({}),o={kernelName:"python3",serverSettings:n,path:t};this.myJupyterService.serviceManager.sessions.findByPath(t).then(function(t){l.Session.connectTo(t,n).then(function(t){e.watchdogFormUpdate(t)})}).catch(function(){l.Session.startNew(o).then(function(t){t.kernel.requestExecute({code:f.startWatchdogSessionCode}),e.watchdogFormUpdate(t)})})},WatchdogService.prototype.watchdogFormUpdate=function(e){var t=this;this.session=e,e.iopubMessage.connect(function(e,n){if(l.KernelMessage.isErrorMsg(n)){var o=n;console.error(o.content),t.watchdogError.next(n)}if(n.content.text){var i=String(n.content.text).trim(),r=i.split("\n");console.log(r);var a=t.myFileService.path.getValue(),s=t.myFormService.currentFormSessionId;r.some(function(e){return e.startsWith("relative: ")&&(e.replace("\\","/")==="relative: "+a||e.includes("goutputstream"))})&&(t.myKernelService.sessionStore[t.myKernelService.currentSession].isNewSession=!1,t.myFileService.loadFileContents(a,s)),r.forEach(function(e){var n=e.replace("absolute: ","").replace("relative: ","");t.fileChanged.next(n)})}}),this.myFileService.path.subscribe(function(e){console.log("File service path changed to: "+e),t.addFilepathObserver(e)})},WatchdogService.prototype.addFilepathObserver=function(e){console.log("Watchdog service: Adding "+e+" to watch list"),this.session.kernel.requestExecute({code:f.addObserverPathCode(e)})},WatchdogService=o([a.Injectable(),i("design:paramtypes",[u.FileService,c.JupyterService,p.FormService,m.KernelService])],WatchdogService)}();t.WatchdogService=d},253:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(80),a=n(9),s=function(){function ToolbarService(){this.toolbarReady=new a.PromiseDelegate}return ToolbarService.prototype.setToolbar=function(e){this.toolbar=e,this.toolbarReady.resolve(null)},ToolbarService.prototype.addSpacer=function(){var e=this;this.toolbarReady.promise.then(function(){e.toolbar.addItem("spacer",r.Toolbar.createSpacerItem())})},ToolbarService.prototype.addItem=function(e,t){var n=this;this.toolbarReady.promise.then(function(){n.toolbar.addItem(e,t)})},ToolbarService=o([i.Injectable()],ToolbarService)}();t.ToolbarService=s},254:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),a=n(2),s=function(){function ToolbarButtonComponent(e){this.myElementRef=e,this.previousSubscription=null,this.isDisabled=!1}return Object.defineProperty(ToolbarButtonComponent.prototype,"disable",{set:function(e){var t=this;this.previousSubscription&&this.previousSubscription.unsubscribe(),this.previousSubscription=e.subscribe(function(e){t.isDisabled=e})},enumerable:!0,configurable:!0}),o([a.Input(),i("design:type",String)],ToolbarButtonComponent.prototype,"icon",void 0),o([a.Input(),i("design:type",String)],ToolbarButtonComponent.prototype,"tooltip",void 0),o([a.Input(),i("design:type",Function)],ToolbarButtonComponent.prototype,"click",void 0),o([a.Input(),i("design:type",r.BehaviorSubject),i("design:paramtypes",[r.BehaviorSubject])],ToolbarButtonComponent.prototype,"disable",null),o([a.Input(),i("design:type",String)],ToolbarButtonComponent.prototype,"iconClass",void 0),o([a.ViewChild("button"),i("design:type",a.ElementRef)],ToolbarButtonComponent.prototype,"button",void 0),ToolbarButtonComponent=o([a.Component({selector:"toolbar-button",template:'<button #button\n  (click)="click()"\n  [disabled]="isDisabled"\n  [title]="tooltip"\n  mat-icon-button>\n    <mat-icon *ngIf="!iconClass">{{icon}}</mat-icon>\n    <div *ngIf="iconClass" style="width:24px; height:24px; margin: 0 0; display:inline-block"><div [class]="iconClass"></div></div>\n</button>\n'}),i("design:paramtypes",[a.ElementRef])],ToolbarButtonComponent)}();t.ToolbarButtonComponent=s},586:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(92),s=n(237),l=n(587),c=n(595),u=n(84),p=n(129),m=n(74),f=n(93),d=function(){function AppComponent(e,t,n,o,i){this.myFileService=e,this.myFormService=t,this.myInitialisationService=n,this.myKernelSevice=o,this.myVariableService=i,this.kernelStatus="unknown",this.formStatus=null,this.variableStatus=null}return AppComponent.prototype.ngAfterViewInit=function(){var e=this;this.myFormService.formBuilderComponent=this.formBuilderComponent;var t=new a.RenderMimeRegistry({initialFactories:a.standardRendererFactories});this.myKernelSevice.jupyterError.subscribe(function(n){if(null!==n){var o=n.header.msg_type,i=new s.OutputAreaModel,r=n.content;r.output_type=o,i.add(r);var a=new s.OutputArea({model:i,rendermime:t}),l=e.jupyterErrorMsg.nativeElement,c=document.createElement("h2");c.innerText="Python Error:";var u=document.createElement("p");u.innerText="A Python error has occured. This could be due to an error within your ScriptedForms template or an issue with ScriptedForms itself.";var p=document.createElement("p");p.innerText="This error message will not go away until after a page refresh.",l.appendChild(c),l.appendChild(u),l.appendChild(a.node),l.appendChild(p)}}),this.myFormService.formStatus.subscribe(function(t){console.log("form: "+t),e.formStatus=t}),this.myVariableService.variableStatus.subscribe(function(t){console.log("variable: "+t),e.variableStatus=t}),this.myKernelSevice.kernelStatus.subscribe(function(t){console.log("kernel: "+t),e.kernelStatus=t})},AppComponent.prototype.initiliseScriptedForms=function(e){this.myInitialisationService.initiliseScriptedForms(e)},AppComponent.prototype.pathChanged=function(e){this.myFileService.path.next(e)},o([r.ViewChild("formBuilderComponent"),i("design:type",l.FormBuilderComponent)],AppComponent.prototype,"formBuilderComponent",void 0),o([r.ViewChild("jupyterErrorMsg"),i("design:type",r.ElementRef)],AppComponent.prototype,"jupyterErrorMsg",void 0),AppComponent=o([r.Component({selector:"app-root",template:'\n<div class="margin">\n  <div class="hide-on-print">\n    <toolbar></toolbar>\n    <mat-progress-spinner color="accent" *ngIf="kernelStatus !== \'idle\' || formStatus !== \'ready\' || variableStatus !== \'idle\'" class="floating-spinner" mode="indeterminate"></mat-progress-spinner>\n  </div>\n  <app-form-builder #formBuilderComponent><div #jupyterErrorMsg></div></app-form-builder>\n  <div class="footer-space"></div>\n</div>',styles:[".margin { margin: 20px;}"]}),i("design:paramtypes",[u.FileService,p.FormService,c.InitialisationService,m.KernelService,f.VariableService])],AppComponent)}();t.AppComponent=d},587:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(574),s=n(1362),l=n(84),c=n(9),u=function(){function FormBuilderComponent(e,t){this.compiler=e,this.myFileService=t,this.viewInitialised=new c.PromiseDelegate}return FormBuilderComponent.prototype.ngOnInit=function(){this.myMarkdownIt=new a({html:!0,linkify:!0,typographer:!0})},FormBuilderComponent.prototype.ngAfterViewInit=function(){this.errorboxDiv=this.errorbox.nativeElement,this.viewInitialised.resolve(null)},FormBuilderComponent.prototype.buildForm=function(e,t){var n=this;return this.viewInitialised.promise.then(function(){var o=n.convertTemplate(t),i=o.htmlTemplate,r=o.cssStyles,a=n.createFormFromTemplate(e,i,r);return a.formViewInitialised.promise.then(function(){return n.myFileService.renderComplete.resolve(null),a})})},FormBuilderComponent.prototype.stripStyleTags=function(e){var t=document.createElement("div");t.innerHTML=e;var n=Array.from(t.getElementsByTagName("style")),o=[];return n.forEach(function(e){o=o.concat([e.innerHTML])}),t.remove(),o},FormBuilderComponent.prototype.convertTemplate=function(e){var t=e.replace(/<\/?section-.+>/g,function(e){return"\n"+e+"\n"}),n=this.myMarkdownIt.render(t),o=this.stripStyleTags(n);return{htmlTemplate:n.replace(/{/g,"@~lb~@").replace(/}/g,"@~rb~@").replace(/@~lb~@/g,'{{ "{" }}').replace(/@~rb~@/g,'{{ "}" }}'),cssStyles:o}},FormBuilderComponent.prototype.createFormFromTemplate=function(e,t,n){var o={selector:"app-form",template:t,styles:n},i=s.createFormComponentFactory(e,this.compiler,o);return this.formComponentRef&&this.formComponentRef.destroy(),this.errorboxDiv.innerHTML="",this.formComponentRef=this.container.createComponent(i),this.formComponentRef.instance.formReady.promise.then(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}),this.formComponentRef.instance},o([r.ViewChild("errorbox"),i("design:type",r.ElementRef)],FormBuilderComponent.prototype,"errorbox",void 0),o([r.ViewChild("container",{read:r.ViewContainerRef}),i("design:type",r.ViewContainerRef)],FormBuilderComponent.prototype,"container",void 0),FormBuilderComponent=o([r.Component({selector:"app-form-builder",template:'<div class="form-contents"><ng-content></ng-content><div #errorbox class="errorbox"></div><div #container></div></div>'}),i("design:paramtypes",[r.Compiler,l.FileService])],FormBuilderComponent)}();t.FormBuilderComponent=u},588:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(85),s=function(){function StartComponent(){this.hasStartRun=!1}return Object.defineProperty(StartComponent.prototype,"sessionId",{set:function(e){this.initialiseCodeSessionId(e)},enumerable:!0,configurable:!0}),StartComponent.prototype.runCode=function(){this.codeComponents.toArray().forEach(function(e){e.runCode()}),this.hasStartRun=!0},StartComponent.prototype.setId=function(e){var t=this;this.startId=e,this.codeComponents.toArray().forEach(function(e,n){e.name='"start"_'+String(t.startId)+"_"+String(n)})},StartComponent.prototype.initialiseCodeSessionId=function(e){this.codeComponents.toArray().forEach(function(t,n){t.sessionId=e})},o([r.Input(),i("design:type",String)],StartComponent.prototype,"always",void 0),o([r.ContentChildren(a.CodeComponent),i("design:type",r.QueryList)],StartComponent.prototype,"codeComponents",void 0),StartComponent=o([r.Component({selector:"section-start",template:"<ng-content></ng-content>"})],StartComponent)}();t.StartComponent=s},589:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(242),s=n(244),l=n(245),c=n(246),u=n(247),p=n(248),m=n(249),f=n(250),d=n(85),h=function(){function LiveComponent(){this.variableComponents=[],this.afterViewInit=!1,this.isFormReady=!1}return LiveComponent.prototype.ngAfterViewInit=function(){var e=this;this.afterViewInit=!0,this.variableComponents=this.variableComponents.concat(this.toggleComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.tickComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.conditionalComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.numberComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.sliderComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.tableComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.stringComponents.toArray()),this.variableComponents=this.variableComponents.concat(this.dropdownComponents.toArray());for(var t=0,n=this.variableComponents;t<n.length;t++){n[t].variableChange.asObservable().subscribe(function(t){return e.runCode()})}},Object.defineProperty(LiveComponent.prototype,"sessionId",{set:function(e){this.initialiseCodeSessionId(e)},enumerable:!0,configurable:!0}),LiveComponent.prototype.runCode=function(){this.afterViewInit&&this.isFormReady&&this.codeComponents.toArray().forEach(function(e,t){e.runCode()})},LiveComponent.prototype.formReady=function(e){this.isFormReady=e},LiveComponent.prototype.setId=function(e){var t=this;this.liveId=e,this.codeComponents.toArray().forEach(function(e,n){e.name='"live"_'+String(t.liveId)+"_"+String(n)})},LiveComponent.prototype.initialiseCodeSessionId=function(e){this.codeComponents.toArray().forEach(function(t,n){t.sessionId=e})},o([r.ContentChildren(a.ToggleComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"toggleComponents",void 0),o([r.ContentChildren(s.TickComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"tickComponents",void 0),o([r.ContentChildren(l.ConditionalComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"conditionalComponents",void 0),o([r.ContentChildren(c.NumberComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"numberComponents",void 0),o([r.ContentChildren(u.SliderComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"sliderComponents",void 0),o([r.ContentChildren(p.TableComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"tableComponents",void 0),o([r.ContentChildren(m.StringComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"stringComponents",void 0),o([r.ContentChildren(f.DropdownComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"dropdownComponents",void 0),o([r.ContentChildren(d.CodeComponent),i("design:type",r.QueryList)],LiveComponent.prototype,"codeComponents",void 0),LiveComponent=o([r.Component({selector:"section-live",template:"<ng-content></ng-content>"})],LiveComponent)}();t.LiveComponent=h},590:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(94),l=function(e){function NumberBaseComponent(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=null,t.max=null,t.step=1,t.usedSeparator=!1,t}return o(NumberBaseComponent,e),NumberBaseComponent.prototype.loadVariableName=function(){var e=this.variablecontainer.nativeElement,t=this.htmlDecode(e.innerHTML).trim(),n=t.split(/[,;]/);n.length>1&&(this.usedSeparator=!0),this.variableName=n[0].trim(),n.length>1&&(this.min=Number(n[1])),n.length>2&&(this.max=Number(n[2])),n.length>3&&(this.step=Number(n[3]))},i([a.Input(),r("design:type",Number)],NumberBaseComponent.prototype,"min",void 0),i([a.Input(),r("design:type",Number)],NumberBaseComponent.prototype,"max",void 0),i([a.Input(),r("design:type",Number)],NumberBaseComponent.prototype,"step",void 0),NumberBaseComponent=i([a.Component({})],NumberBaseComponent)}(s.VariableBaseComponent);t.NumberBaseComponent=l},591:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(85),s=n(74),l=n(245),c=function(){function ButtonComponent(e){this.myKernelSevice=e,this.conditionalValue=!0,this.afterViewInit=!1,this.isFormReady=!1,this.codeRunning=!1}return ButtonComponent.prototype.ngAfterViewInit=function(){var e=this;if(this.afterViewInit=!0,this.conditional){var t=this.conditionalComponent.variableValue;this.conditionalValue=t,this.conditionalComponent.variableChange.asObservable().subscribe(function(t){e.conditionalValue=t})}},Object.defineProperty(ButtonComponent.prototype,"sessionId",{set:function(e){this._sessionId=e,this.initialiseCodeSessionId(e)},enumerable:!0,configurable:!0}),ButtonComponent.prototype.runCode=function(){var e=this;this.afterViewInit&&this.isFormReady&&(this.codeComponents.toArray().forEach(function(e,t){e.runCode()}),this.codeRunning=!0,this.myKernelSevice.sessionStore[this._sessionId].queue.then(function(){e.codeRunning=!1}))},ButtonComponent.prototype.formReady=function(e){this.isFormReady=e},ButtonComponent.prototype.setId=function(e){var t=this;this.buttonId=e,this.codeComponents.toArray().forEach(function(e,n){e.name='"button"_'+String(t.buttonId)+"_"+String(n)})},ButtonComponent.prototype.initialiseCodeSessionId=function(e){this.codeComponents.toArray().forEach(function(t,n){t.sessionId=e})},o([r.Input(),i("design:type",String)],ButtonComponent.prototype,"name",void 0),o([r.Input(),i("design:type",String)],ButtonComponent.prototype,"conditional",void 0),o([r.ContentChildren(a.CodeComponent),i("design:type",r.QueryList)],ButtonComponent.prototype,"codeComponents",void 0),o([r.ViewChild("conditionalComponent"),i("design:type",l.ConditionalComponent)],ButtonComponent.prototype,"conditionalComponent",void 0),ButtonComponent=o([r.Component({selector:"section-button",template:'<div style="min-height: 36px;">\n  <div style="float:right">\n    <variable-conditional #conditionalComponent *ngIf="conditional">{{conditional}}</variable-conditional>\n    <button *ngIf="name"\n    mat-raised-button color="accent"\n    (click)="runCode()"\n    [disabled]="!isFormReady || codeRunning || !conditionalValue">\n      {{name}}\n    </button>\n    <button *ngIf="!name"\n    mat-mini-fab\n    (click)="runCode()"\n    [disabled]="!isFormReady || codeRunning || !conditionalValue">\n      <mat-icon>keyboard_return</mat-icon>\n    </button>\n  </div>\n  <ng-content></ng-content>\n</div>\n'}),i("design:paramtypes",[s.KernelService])],ButtonComponent)}();t.ButtonComponent=c},592:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(93),s=n(85),l=function(){function OutputComponent(e){this.myVariableService=e}return Object.defineProperty(OutputComponent.prototype,"sessionId",{set:function(e){this._sessionId=e,this.initialiseCodeSessionId(e)},enumerable:!0,configurable:!0}),OutputComponent.prototype.runCode=function(){this.codeComponents.toArray().forEach(function(e){e.runCode()})},OutputComponent.prototype.subscribeToVariableChanges=function(){var e=this;this.variableSubscription=this.myVariableService.sessionVariableStore[this._sessionId].variableChangedObservable.subscribe(function(t){null!==t&&e.runCode()})},OutputComponent.prototype.ngOnDestroy=function(){this.variableSubscription.unsubscribe()},OutputComponent.prototype.setId=function(e){var t=this;this.outputId=e,this.codeComponents.toArray().forEach(function(e,n){e.name='"output"_'+String(t.outputId)+"_"+String(n)})},OutputComponent.prototype.initialiseCodeSessionId=function(e){this.codeComponents.toArray().forEach(function(t,n){t.sessionId=e})},o([r.ContentChildren(s.CodeComponent),i("design:type",r.QueryList)],OutputComponent.prototype,"codeComponents",void 0),OutputComponent=o([r.Component({selector:"section-output",template:"<ng-content></ng-content>"}),i("design:paramtypes",[a.VariableService])],OutputComponent)}();t.OutputComponent=l},593:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(251),s=n(252),l=n(85),c=function(){function SectionFileChangeComponent(e){this.myWatchdogService=e}return Object.defineProperty(SectionFileChangeComponent.prototype,"sessionId",{set:function(e){this._sessionId=e,this.initialiseCodeSessionId(e)},enumerable:!0,configurable:!0}),SectionFileChangeComponent.prototype.updateFilepathObserver=function(){var e=this;this.pathsConverted.forEach(function(t){e.myWatchdogService.addFilepathObserver(t)})},SectionFileChangeComponent.prototype.ngAfterViewInit=function(){var e=this;this.stringListParameterComponent.variableChange.asObservable().subscribe(function(t){e.pathsConverted=t,e.updateFilepathObserver()}),this.watchdogSubscription=this.myWatchdogService.fileChanged.subscribe(function(t){e.pathsConverted&&(e.pathsConverted.includes(t)||e.pathsConverted.includes("./"+t)||e.pathsConverted.includes(".\\"+t))&&e.runCode()})},SectionFileChangeComponent.prototype.runCode=function(){this.codeComponents.toArray().forEach(function(e){e.runCode()})},SectionFileChangeComponent.prototype.ngOnDestroy=function(){this.watchdogSubscription.unsubscribe()},SectionFileChangeComponent.prototype.setId=function(e){var t=this;this.id=e,this.codeComponents.toArray().forEach(function(e,n){e.name='"section-file"_'+String(t.id)+"_"+String(n)})},SectionFileChangeComponent.prototype.initialiseCodeSessionId=function(e){this.codeComponents.toArray().forEach(function(t,n){t.sessionId=e})},o([r.Input(),i("design:type",String)],SectionFileChangeComponent.prototype,"paths",void 0),o([r.ContentChildren(l.CodeComponent),i("design:type",r.QueryList)],SectionFileChangeComponent.prototype,"codeComponents",void 0),o([r.ViewChild("stringListParameterComponent"),i("design:type",a.StringListParameterComponent)],SectionFileChangeComponent.prototype,"stringListParameterComponent",void 0),SectionFileChangeComponent=o([r.Component({selector:"section-filechange",template:'<variable-string-list-parameter #stringListParameterComponent *ngIf="paths">\n[os.path.abspath(os.path.expanduser(os.path.expandvars(item))) for item in {{paths}}]\n</variable-string-list-parameter><ng-content></ng-content>'}),i("design:paramtypes",[s.WatchdogService])],SectionFileChangeComponent)}();t.SectionFileChangeComponent=c},594:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(7),a=n(32),s=n(241),l=n(242),c=n(244),u=n(245),p=n(246),m=n(247),f=n(248),d=n(249),h=n(250),y=n(251),v=function(){function VariablesModule(){}return VariablesModule=o([i.NgModule({imports:[r.CommonModule,s.MaterialModule,a.FormsModule],declarations:[l.ToggleComponent,c.TickComponent,u.ConditionalComponent,p.NumberComponent,m.SliderComponent,f.TableComponent,d.StringComponent,h.DropdownComponent,y.StringListParameterComponent],exports:[l.ToggleComponent,c.TickComponent,u.ConditionalComponent,p.NumberComponent,m.SliderComponent,f.TableComponent,d.StringComponent,h.DropdownComponent,y.StringListParameterComponent]})],VariablesModule)}();t.VariablesModule=v},595:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(128),s=n(252),l=n(84),c=n(253),u=function(){function InitialisationService(e,t,n,o){this.myJupyterService=e,this.myFileService=t,this.myWatchdogService=n,this.myToolbarService=o}return InitialisationService.prototype.initiliseScriptedForms=function(e){var t=this;this.myJupyterService.setServiceManager(e.serviceManager),this.myJupyterService.setContentsManager(e.contentsManager),this.myFileService.setNode(e.node),this.myToolbarService.setToolbar(e.toolbar),this.myFileService.openUrl(window.location.href),this.myWatchdogService.startWatchdog(),window.onpopstate=function(e){t.myFileService.openUrl(window.location.href)}},InitialisationService=o([r.Injectable(),i("design:paramtypes",[a.JupyterService,l.FileService,s.WatchdogService,c.ToolbarService])],InitialisationService)}();t.InitialisationService=u},74:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function fulfilled(e){try{step(o.next(e))}catch(e){r(e)}}function rejected(e){try{step(o.throw(e))}catch(e){r(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function verb(e){return function(t){return step([e,t])}}function step(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r};Object.defineProperty(t,"__esModule",{value:!0});var s=n(70),l=n(2),c=n(36),u=n(9),p=n(128),m=n(1363),f=n(1364),d=function(){function KernelService(e){this.myJupyterService=e,this.jupyterError=new s.BehaviorSubject(null),this.kernelStatus=new s.BehaviorSubject(null),this.sessionStore={},this.currentSession=null}return KernelService.prototype.restartKernel=function(){var e=this;return this.sessionConnected=new u.PromiseDelegate,this.sessionStore[this.currentSession].kernel.restart().then(function(){e.sessionStore[e.currentSession].queueId=0,e.sessionStore[e.currentSession].queueLog={},e.sessionStore[e.currentSession].queue=Promise.resolve(null),e.sessionStore[e.currentSession].isNewSession=!0,e.runCode(e.currentSession,m.sessionStartCode,"session_start_code").then(function(){e.sessionConnected.resolve(e.currentSession)})}),this.sessionConnected.promise},KernelService.prototype.sessionConnect=function(e){var t=this;this.sessionConnected=new u.PromiseDelegate;var n=Object.keys(this.sessionStore);return this.currentSession=null,f.jupyterSessionConnect(this.myJupyterService.serviceManager,e,n).then(function(e){var n=t.currentSession=e.session.id,o=e.session,i=e.isNewSession;n in t.sessionStore?t.sessionStore[n].isNewSession=i:(t.sessionStore[n]={session:o,kernel:o.kernel,queueId:0,queueLog:{},queue:Promise.resolve(null),isNewSession:i},o.iopubMessage.connect(function(e,n){if(c.KernelMessage.isErrorMsg(n)){var o=n;console.error(o.content),t.jupyterError.next(n)}c.KernelMessage.isStatusMsg(n)&&t.kernelStatus.next(n.content.execution_state)})),t.currentSession=n,i&&t.runCode(n,m.sessionStartCode,"session_start_code"),t.sessionConnected.resolve(n)}),this.sessionConnected.promise.then(function(e){}),this.sessionConnected.promise},KernelService.prototype.addToQueue=function(e,t,n){var o=this,i=this.sessionStore[e].queueId;this.sessionStore[e].queueLog[i]=t,this.sessionStore[e].queueId+=1;var s=this.sessionStore[e].queue;return this.sessionStore[e].queue=function(){return r(o,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,s];case 1:return t.sent(),delete this.sessionStore[e].queueLog[i],[2,n(i)]}})})}()},KernelService.prototype.runCode=function(e,t,n){var o,i,s=this,l=this.addToQueue(e,n,function(l){return r(s,void 0,void 0,function(){var r;return a(this,function(a){i=!0;for(r in this.sessionStore[e].queueLog)if(Number(r)>l&&this.sessionStore[e].queueLog[r]===n){i=!1;break}return i?(o=this.sessionStore[e].kernel.requestExecute({code:t}),[2,o]):[2,Promise.resolve()]})})}).catch(function(e){console.error(e)});return this.addToQueue(e,null,function(e){return r(s,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return i?[4,o.done]:[3,2];case 1:return[2,e.sent()];case 2:return[2,Promise.resolve()]}})})}),l},KernelService=o([l.Injectable(),i("design:paramtypes",[p.JupyterService])],KernelService)}();t.KernelService=d},84:function(e,t,n){"use strict";function escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(70),s=n(9),l=n(128),c=n(129),u=n(74),p=n(93),m=function(){function FileService(e,t,n,o){this.myFormService=e,this.myJupyterService=t,this.myKernelService=n,this.myVariableService=o,this.path=new a.BehaviorSubject("scriptedforms_default_path"),this.baseUrl=document.getElementsByTagName("base")[0].href}return FileService.prototype.setNode=function(e){this.node=e},FileService.prototype.setRenderType=function(e){if("template"!==e&&"results"!==e)throw new RangeError("renderType must be either template or results");this.renderType=e},FileService.prototype.handleFileContents=function(e,t){var n=this,o=this.node.scrollTop;return this.renderComplete=new s.PromiseDelegate,this.renderComplete.promise.then(function(){n.node.scrollTop=o}),"template"===this.renderType&&this.myFormService.setTemplate(e,t),this.renderComplete.promise},FileService.prototype.loadFileContents=function(e,t){var n=this;return this.myJupyterService.contentsManager.get(e).then(function(e){var o=e.content;return n.handleFileContents(o,t)})},FileService.prototype.setPath=function(e){this.path.next(e)},FileService.prototype.determineRenderType=function(e){var t,n=e.split(".").pop();if("md"===n)t="template";else{if("yaml"!==n)throw RangeError("File extension not recognised.");t="results"}return t},FileService.prototype.serviceSessionInitialisation=function(e){this.myFormService.formInitialisation(e),this.myVariableService.variableInitialisation(e)},FileService.prototype.openFile=function(e){var t=this;this.setPath(e),this.setRenderType(this.determineRenderType(e)),this.myKernelService.sessionConnect(e).then(function(n){return t.serviceSessionInitialisation(n),t.loadFileContents(e,n)})},FileService.prototype.urlToFilePath=function(e){var t=RegExp("^"+escapeRegExp(this.baseUrl)+"(.*.(md|yaml))"),n=t.exec(e);return null!==n?n[1]:null},FileService.prototype.openUrl=function(e){var t=this.urlToFilePath(window.location.href);null!==t&&this.openFile(t)},FileService.prototype.morphLinksToUpdateFile=function(e){var t=this;e.forEach(function(e){var n=t.urlToFilePath(e.href);null!==n&&e.addEventListener("click",function(o){o.preventDefault(),window.history.pushState(null,null,e.href),t.openFile(n)})})},FileService=o([r.Injectable(),i("design:paramtypes",[c.FormService,l.JupyterService,u.KernelService,p.VariableService])],FileService)}();t.FileService=m},85:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(92),s=n(237),l=n(152),c=n(74),u=n(84),p=function(){function CodeComponent(e,t,n){var o=this;this.myKernelSevice=e,this.myFileService=t,this._eRef=n,this._displayIdMap=new Map,this.renderMime=new a.RenderMimeRegistry({initialFactories:a.standardRendererFactories,sanitizer:{sanitize:function(e){return e}}}),this.model=new s.OutputAreaModel,this.outputAreaOptions={model:this.model,rendermime:this.renderMime},this.outputArea=new s.OutputArea(this.outputAreaOptions),this._onIOPub=function(e){var t,n,i=o.model,r=e.header.msg_type,a=e.content.transient||{},s=a.display_id;switch(r){case"execute_result":case"display_data":case"stream":case"error":t=e.content,t.output_type=r,i.add(t);break;case"clear_output":var l=e.content.wait;i.clear(l);break;case"update_display_data":if(t=e.content,t.output_type="display_data",n=o._displayIdMap.get(s))for(var c=0,u=n;c<u.length;c++){var p=u[c];i.set(p,t)}}s&&"display_data"===r&&(n=o._displayIdMap.get(s)||[],n.push(i.length-1),o._displayIdMap.set(s,n))}}return CodeComponent.prototype.updateOutputAreaModel=function(){this.outputAreaOptions={model:this.model,rendermime:this.renderMime},this.outputArea=new s.OutputArea(this.outputAreaOptions)},CodeComponent.prototype.ngAfterViewInit=function(){var e=this;this.code=this.codecontainer.nativeElement.innerText,l.Mode.ensure("python").then(function(t){var n=document.createElement("div");l.Mode.run(e.code,t.mime,n),e.codecontainer.nativeElement.innerHTML=n.innerHTML,e._eRef.nativeElement.classList.add("cm-s-jupyter")});var t=this._eRef.nativeElement;this.outputContainer=document.createElement("div"),this.outputContainer.appendChild(this.outputArea.node),t.parentNode.parentNode.insertBefore(this.outputContainer,t.parentNode),this.mutationObserver=new MutationObserver(function(){var t=Array.from(e.outputContainer.getElementsByTagName("a"));e.myFileService.morphLinksToUpdateFile(t)}),this.mutationObserver.observe(this.outputContainer,{childList:!0,subtree:!0})},CodeComponent.prototype.ngOnDestroy=function(){},CodeComponent.prototype.runCode=function(){var e=this;this.promise=this.myKernelSevice.runCode(this.sessionId,this.code,this.name),this.promise.then(function(t){t&&(e.model=new s.OutputAreaModel,t.onIOPub=e._onIOPub,t.done.then(function(){e.updateOutputAreaModel(),e.outputContainer.replaceChild(e.outputArea.node,e.outputContainer.firstChild),e.outputContainer.style.minHeight=String(e.outputArea.node.clientHeight)+"px"}))})},o([r.ViewChild("codecontainer"),i("design:type",r.ElementRef)],CodeComponent.prototype,"codecontainer",void 0),CodeComponent=o([r.Component({selector:"code.language-python",template:'<span #codecontainer [hidden]="this.name !== undefined"><ng-content></ng-content></span>'}),i("design:paramtypes",[c.KernelService,u.FileService,r.ElementRef])],CodeComponent)}();t.CodeComponent=p},93:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),a=n(9),s=n(36),l=n(121),c=n(583),u=n(2),p=n(74),m=function(){function VariableService(e){this.myKernelSevice=e,this.sessionVariableStore={},this.variableHandlerClass="_VariableHandler",this.handlerName="_scriptedforms_variable_handler",this.fetchVariablesCode="exec("+this.handlerName+".fetch_code)",this.variableStatus=new r.BehaviorSubject(null)}return VariableService.prototype.variableInitialisation=function(e){var t=this;e in this.sessionVariableStore||(this.sessionVariableStore[e]={variableStore:new r.BehaviorSubject({}),oldVariableStore:null,variableIdentifierMap:{},variableEvaluateMap:{},pythonVariables:{},variableChangedObservable:new r.BehaviorSubject(null),timestamps:new r.BehaviorSubject({}),variableComponentStore:{},executionCount:new r.BehaviorSubject(null),lastCode:new r.BehaviorSubject(null)},this.sessionVariableStore[e].lastCode.subscribe(function(n){n&&n!==t.fetchVariablesCode&&t.fetchAll(e)}),this.myKernelSevice.sessionStore[e].session.iopubMessage.connect(function(n,o){if(s.KernelMessage.isExecuteInputMsg(o)){var i=o;t.sessionVariableStore[e].executionCount.next(i.content.execution_count),t.sessionVariableStore[e].lastCode.next(i.content.code)}}))},VariableService.prototype.resetVariableService=function(e){this.variableStatus.next("reset"),this.sessionVariableStore[e].timestamps.next({}),this.sessionVariableStore[e].variableStore.next({}),this.sessionVariableStore[e].oldVariableStore={},this.sessionVariableStore[e].variableComponentStore={},this.sessionVariableStore[e].variableIdentifierMap={},this.sessionVariableStore[e].variableEvaluateMap={}},VariableService.prototype.allVariablesInitilised=function(e){var t=this;this.variableStatus.next("initialising");var n=this.handlerName+" = "+this.variableHandlerClass+'("""'+JSON.stringify(this.sessionVariableStore[e].variableEvaluateMap)+'""", "'+this.handlerName+'")';this.myKernelSevice.runCode(e,n,'"initialiseVariableHandler"').then(function(n){n.done.then(function(){t.fetchAll(e)})})},VariableService.prototype.appendToIdentifierMap=function(e,t,n){this.sessionVariableStore[e].variableIdentifierMap[t]=n},VariableService.prototype.appendToEvaluateMap=function(e,t,n){t in this.sessionVariableStore[e].variableEvaluateMap||(this.sessionVariableStore[e].variableEvaluateMap[t]=n)},VariableService.prototype.initialiseVariableComponent=function(e,t){var n=t.variableIdentifier;this.sessionVariableStore[e].variableComponentStore[n]=t;var o=t.pythonVariableEvaluate(),i=t.variableName;this.appendToIdentifierMap(e,n,i),this.appendToEvaluateMap(e,i,o)},VariableService.prototype.convertToVariableStore=function(e,t){var n=JSON.parse(t);this.sessionVariableStore[e].pythonVariables=n;var o={};Object.entries(this.sessionVariableStore[e].variableIdentifierMap).forEach(function(e){var t=e[0],i=e[1];o[t]=n[i]}),this.sessionVariableStore[e].variableStore.next(o)},VariableService.prototype.ifJsonString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},VariableService.prototype.fetchAll=function(e){var t=this;this.variableStatus.next("fetching");var n=new a.PromiseDelegate;return this.myKernelSevice.runCode(e,this.fetchVariablesCode,'"fetchAllVariables"').then(function(o){if(o){var i="";o.onIOPub=function(n){n.content.text&&(i=i.concat(String(n.content.text)),t.ifJsonString(i)&&(t.convertToVariableStore(e,i),t.checkForChanges(e)))},o.done.then(function(){n.resolve(null)})}}),n.promise},VariableService.prototype.updateComponentView=function(e,t){e.updateVariableView(t)},VariableService.prototype.updateTimestamp=function(e,t){var n=this.sessionVariableStore[e].timestamps.getValue();n[t]=Date.now(),this.sessionVariableStore[e].timestamps.next(n)},VariableService.prototype.variableHasChanged=function(e,t){this.updateComponentView(this.sessionVariableStore[e].variableComponentStore[t],this.sessionVariableStore[e].variableStore.getValue()[t].value),this.updateTimestamp(e,t)},VariableService.prototype.checkForChanges=function(e){var t=this;this.variableStatus.next("checking-for-changes");for(var n=Object.keys(this.sessionVariableStore[e].variableComponentStore),o=0,i=n;o<i.length;o++){var r=i[o];this.sessionVariableStore[e].variableStore.getValue()[r].defined&&(this.sessionVariableStore[e].oldVariableStore?l(this.sessionVariableStore[e].variableStore.getValue()[r])!=l(this.sessionVariableStore[e].oldVariableStore[r])&&this.variableHasChanged(e,r):this.variableHasChanged(e,r))}l(this.sessionVariableStore[e].variableStore.getValue())!=l(this.sessionVariableStore[e].oldVariableStore)?(this.sessionVariableStore[e].variableChangedObservable.next(this.sessionVariableStore[e].variableStore.getValue()),this.variableStatus.next("a-change-was-made")):this.variableStatus.next("no-change-was-made");var a=c.v4(),s="prepping-for-idle: "+a;this.variableStatus.next(s),this.myKernelSevice.sessionStore[this.myKernelSevice.currentSession].queue.then(function(){t.variableStatus.getValue()===s&&t.variableStatus.next("idle")}),this.sessionVariableStore[e].oldVariableStore=JSON.parse(JSON.stringify(this.sessionVariableStore[e].variableStore.getValue()))},VariableService.prototype.pushVariable=function(e,t,n,o){var i=n+" = "+o;return this.updateTimestamp(e,t),this.sessionVariableStore[e].oldVariableStore[t]={defined:!0,value:JSON.parse(JSON.stringify(o))},this.myKernelSevice.runCode(e,i,'"push"_"'+t+'"').then(function(e){if(e){return e.done}return Promise.resolve("ignore")})},VariableService=o([u.Injectable(),i("design:paramtypes",[p.KernelService])],VariableService)}();t.VariableService=m},94:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(93),s=function(){function VariableBaseComponent(e,t){this.myChangeDetectorRef=e,this.myVariableService=t,this.isOutput=!1,this.isFormReady=!1,this.isPandas=!1,this.isFocus=!1,this.variableChange=new r.EventEmitter,this.oldVariableValue=null,this.variableValue=null}return VariableBaseComponent.prototype.htmlDecode=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0].nodeValue;return t.remove(),n},VariableBaseComponent.prototype.loadVariableName=function(){var e=this.variablecontainer.nativeElement;this.variableName=this.htmlDecode(e.innerHTML).trim()},VariableBaseComponent.prototype.ngAfterViewInit=function(){this.loadVariableName(),this.name?this.placeholderValue=this.name:this.placeholderValue=this.variableName,this.myChangeDetectorRef.detectChanges()},VariableBaseComponent.prototype.onBlur=function(e){this.isFocus=!1},VariableBaseComponent.prototype.onFocus=function(e){this.isFocus=!0},VariableBaseComponent.prototype.pythonValueReference=function(){return String(this.variableValue)},VariableBaseComponent.prototype.pythonVariableEvaluate=function(){return""+this.variableName},VariableBaseComponent.prototype.testIfDifferent=function(){return this.variableValue!=this.oldVariableValue},VariableBaseComponent.prototype.updateOldVariable=function(){this.oldVariableValue=JSON.parse(JSON.stringify(this.variableValue))},VariableBaseComponent.prototype.onVariableChange=function(){return Promise.resolve(null)},VariableBaseComponent.prototype.variableChanged=function(){var e=this;this.onVariableChange().then(function(){if(e.testIfDifferent()){var t=e.pythonValueReference();e.myVariableService.pushVariable(e.sessionId,e.variableIdentifier,e.variableName,t).then(function(t){"ignore"!==t&&e.variableChange.emit(e.variableValue)}),e.updateOldVariable()}})},VariableBaseComponent.prototype.updateVariableView=function(e){this.isFocus||this.variableValue!=e&&(this.variableValue=e,this.updateOldVariable(),this.variableChange.emit(this.variableValue))},VariableBaseComponent.prototype.formReady=function(e){this.isFormReady=e},VariableBaseComponent.prototype.setId=function(e){this.variableIdentifier="("+String(e)+")-"+this.variableName},VariableBaseComponent.prototype.initialise=function(){this.myVariableService.initialiseVariableComponent(this.sessionId,this)},o([r.Input(),i("design:type",String)],VariableBaseComponent.prototype,"required",void 0),o([r.Output(),i("design:type",Object)],VariableBaseComponent.prototype,"variableChange",void 0),o([r.Input(),i("design:type",String)],VariableBaseComponent.prototype,"name",void 0),o([r.ViewChild("variablecontainer"),i("design:type",r.ElementRef)],VariableBaseComponent.prototype,"variablecontainer",void 0),VariableBaseComponent=o([r.Component({}),i("design:paramtypes",[r.ChangeDetectorRef,a.VariableService])],VariableBaseComponent)}();t.VariableBaseComponent=s}},[1357]);